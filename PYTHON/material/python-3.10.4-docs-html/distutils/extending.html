
<!DOCTYPE html>

<html lang="pt_BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>7. Estendendo Distutils &#8212; documentação Python 3.10.4</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Pesquisar dentro de documentação Python 3.10.4"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre esses documentos" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="copyright" title="Direitos autorais" href="../copyright.html" />
    <link rel="next" title="8. Referência de comando" href="commandref.html" />
    <link rel="prev" title="6. Exemplos de Distutils" href="examples.html" />
    <link rel="canonical" href="https://docs.python.org/3/distutils/extending.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Busca rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">7. Estendendo Distutils</a><ul>
<li><a class="reference internal" href="#integrating-new-commands">7.1. Integrando novos comandos</a></li>
<li><a class="reference internal" href="#adding-new-distribution-types">7.2. Adicionando novos tipos de distribuição</a></li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="examples.html"
                        title="capítulo anterior"><span class="section-number">6. </span>Exemplos de Distutils</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="commandref.html"
                        title="próximo capítulo"><span class="section-number">8. </span>Referência de comando</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/distutils/extending.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="commandref.html" title="8. Referência de comando"
             accesskey="N">próximo</a> |</li>
        <li class="right" >
          <a href="examples.html" title="6. Exemplos de Distutils"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Distribuindo Módulos Python (Versão legada)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7. </span>Estendendo Distutils</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="extending-distutils">
<span id="id1"></span><h1><span class="section-number">7. </span>Estendendo Distutils<a class="headerlink" href="#extending-distutils" title="Link permanente para este título">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Este documento está sendo mantido apenas até que a documentação do <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> em <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html">https://setuptools.readthedocs.io/en/latest/setuptools.html</a> cubra independentemente todas as informações relevantes atualmente incluídas aqui.</p>
</div>
<p>Distutils podem ser estendidos de várias maneiras. A maioria das extensões assume a forma de novos comandos ou substituições de comandos existentes. Novos comandos podem ser gravados para dar suporte a novos tipos de pacotes específicos da plataforma, por exemplo, enquanto substituições de comandos existentes podem ser feitas para modificar detalhes de como o comando opera em um pacote.</p>
<p>A maioria das extensões dos distutils é feita dentro de scripts <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> que desejam modificar comandos existentes; muitos simplesmente adicionam algumas extensões de arquivo que devem ser copiadas em pacotes, além de <code class="file docutils literal notranslate"><span class="pre">.py</span></code> como uma conveniência.</p>
<p>A maioria das implementações de comando distutils são subclasses da classe <a class="reference internal" href="apiref.html#distutils.cmd.Command" title="distutils.cmd.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">distutils.cmd.Command</span></code></a>. Novos comandos podem herdar diretamente de <code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code>, enquanto substituições geralmente derivam de <code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code> indiretamente, subclassificando diretamente o comando que eles estão substituindo. Os comandos são necessários para derivar de <code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code>.</p>
<section id="integrating-new-commands">
<h2><span class="section-number">7.1. </span>Integrando novos comandos<a class="headerlink" href="#integrating-new-commands" title="Link permanente para este título">¶</a></h2>
<p>Existem diferentes maneiras de integrar novas implementações de comando nos distutils. O mais difícil é fazer lobby para a inclusão dos novos recursos no próprio distutils e aguardar (e exigir) uma versão do Python que forneça esse suporte. Isso é realmente difícil por vários motivos.</p>
<p>O mais comum, e possivelmente o mais razoável para a maioria das necessidades, é incluir as novas implementações com o script <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> e fazer com que a função <a class="reference internal" href="apiref.html#distutils.core.setup" title="distutils.core.setup"><code class="xref py py-func docutils literal notranslate"><span class="pre">distutils.core.setup()</span></code></a> use-as:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distutils.command.build_py</span> <span class="kn">import</span> <span class="n">build_py</span> <span class="k">as</span> <span class="n">_build_py</span>
<span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="k">class</span> <span class="nc">build_py</span><span class="p">(</span><span class="n">_build_py</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Specialized Python source builder.&quot;&quot;&quot;</span>

    <span class="c1"># implement whatever needs to be different...</span>

<span class="n">setup</span><span class="p">(</span><span class="n">cmdclass</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;build_py&#39;</span><span class="p">:</span> <span class="n">build_py</span><span class="p">},</span>
      <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Essa abordagem é mais valiosa se as novas implementações precisarem ser usadas para usar um pacote específico, pois todos os interessados no pacote precisarão ter a nova implementação de comando.</p>
<p>A partir do Python 2.4, uma terceira opção está disponível, destinada a permitir que novos comandos sejam adicionados, os quais podem ter suporte a scripts <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> existentes sem exigir modificações na instalação do Python. Espera-se que isso permita que extensões de terceiros forneçam suporte a sistemas de empacotamento adicionais, mas os comandos podem ser usados ​​para qualquer coisa em que os comandos distutils possam ser usados. Uma nova opção de configuração, <code class="docutils literal notranslate"><span class="pre">command_packages</span></code> (opção da linha de comando <code class="xref std std-option docutils literal notranslate"><span class="pre">--command-packages</span></code>), pode ser usada para especificar pacotes adicionais a serem pesquisados ​​por módulos que implementam comandos. Como todas as opções do distutils, isso pode ser especificado na linha de comando ou em um arquivo de configuração. Esta opção só pode ser definida na seção <code class="docutils literal notranslate"><span class="pre">[global]</span></code> de um arquivo de configuração ou antes de qualquer comando na linha de comando. Se definido em um arquivo de configuração, ele poderá ser substituído na linha de comando; defini-lo como uma string vazia na linha de comando faz com que o padrão seja usado. Isso nunca deve ser definido em um arquivo de configuração fornecido com um pacote.</p>
<p>Esta nova opção pode ser usada para adicionar qualquer número de pacotes à lista de pacotes pesquisados para implementações de comandos; vários nomes de pacotes devem ser separados por vírgulas. Quando não especificada, a pesquisa é realizada apenas no pacote <a class="reference internal" href="apiref.html#module-distutils.command" title="distutils.command: Contains one module for each standard Distutils command."><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils.command</span></code></a>. Quando <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> é executado com a opção <code class="docutils literal notranslate"><span class="pre">--command-packages</span> <span class="pre">distcmds,buildcmds</span></code>, no entanto, os pacotes <a class="reference internal" href="apiref.html#module-distutils.command" title="distutils.command: Contains one module for each standard Distutils command."><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils.command</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">distcmds</span></code> e <code class="xref py py-mod docutils literal notranslate"><span class="pre">buildcmds</span></code> será pesquisado nessa ordem. Espera-se que novos comandos sejam implementados em módulos com o mesmo nome que o comando por classes que compartilham o mesmo nome. Dada a opção de linha de comando de exemplo acima, o comando <strong class="command">bdist_openpkg</strong> pode ser implementado pela classe <code class="xref py py-class docutils literal notranslate"><span class="pre">distcmds.bdist_openpkg.bdist_openpkg</span></code> ou <code class="xref py py-class docutils literal notranslate"><span class="pre">buildcmds.bdist_openpkg.bdist_openpkg</span></code>.</p>
</section>
<section id="adding-new-distribution-types">
<h2><span class="section-number">7.2. </span>Adicionando novos tipos de distribuição<a class="headerlink" href="#adding-new-distribution-types" title="Link permanente para este título">¶</a></h2>
<p>Os comandos que criam distribuições (arquivos no diretório <code class="file docutils literal notranslate"><span class="pre">dist/</span></code>) precisam adicionar pares <code class="docutils literal notranslate"><span class="pre">(command,</span> <span class="pre">filename)</span></code> ao <code class="docutils literal notranslate"><span class="pre">self.distribution.dist_files</span></code> para que <strong class="command">upload</strong> possa ser carregado para o PyPI. O <em>nome do arquivo</em> no par não contém informações de caminho, apenas o nome do próprio arquivo. No modo de execução a seco, os pares ainda devem ser adicionados para representar o que teria sido criado.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">7. Estendendo Distutils</a><ul>
<li><a class="reference internal" href="#integrating-new-commands">7.1. Integrando novos comandos</a></li>
<li><a class="reference internal" href="#adding-new-distribution-types">7.2. Adicionando novos tipos de distribuição</a></li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="examples.html"
                        title="capítulo anterior"><span class="section-number">6. </span>Exemplos de Distutils</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="commandref.html"
                        title="próximo capítulo"><span class="section-number">8. </span>Referência de comando</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/distutils/extending.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="commandref.html" title="8. Referência de comando"
             >próximo</a> |</li>
        <li class="right" >
          <a href="examples.html" title="6. Exemplos de Distutils"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Distribuindo Módulos Python (Versão legada)</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7. </span>Estendendo Distutils</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Direitos autorais</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Última atualização em jun. 04, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>