
<!DOCTYPE html>

<html lang="pt_BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Instalando módulos Python (versão legada) &#8212; documentação Python 3.10.4</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Pesquisar dentro de documentação Python 3.10.4"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre esses documentos" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="copyright" title="Direitos autorais" href="../copyright.html" />
    <link rel="prev" title="9. Referência da API" href="../distutils/apiref.html" />
    <link rel="canonical" href="https://docs.python.org/3/install/index.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Busca rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">Instalando módulos Python (versão legada)</a><ul>
<li><a class="reference internal" href="#introduction">Introdução</a><ul>
<li><a class="reference internal" href="#distutils-based-source-distributions">Distribuições de fonte baseadas em Distutils</a></li>
</ul>
</li>
<li><a class="reference internal" href="#standard-build-and-install">Construção e instalação padrão</a><ul>
<li><a class="reference internal" href="#platform-variations">Variações de plataforma</a></li>
<li><a class="reference internal" href="#splitting-the-job-up">Dividindo o trabalho</a></li>
<li><a class="reference internal" href="#how-building-works">Como a construção funciona</a></li>
<li><a class="reference internal" href="#how-installation-works">Como a instalação funciona</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternate-installation">Instalação alternativa</a><ul>
<li><a class="reference internal" href="#alternate-installation-the-user-scheme">Instalação alternativa: o esquema usuário</a></li>
<li><a class="reference internal" href="#alternate-installation-the-home-scheme">Instalação alternativa: o esquema home</a></li>
<li><a class="reference internal" href="#alternate-installation-unix-the-prefix-scheme">Instalação alternativa: Unix (o esquema prefixo)</a></li>
<li><a class="reference internal" href="#alternate-installation-windows-the-prefix-scheme">Instalação alternativa: Windows (o esquema prefixo)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-installation">Instalação personalizada</a><ul>
<li><a class="reference internal" href="#modifying-python-s-search-path">Modificando o caminho de pesquisa do Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#distutils-configuration-files">Arquivos de configuração do Distutils</a><ul>
<li><a class="reference internal" href="#location-and-names-of-config-files">Localização e nomes dos arquivos de configuração</a></li>
<li><a class="reference internal" href="#syntax-of-config-files">Sintaxe dos arquivos de configuração</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-extensions-tips-and-tricks">Building Extensions: Tips and Tricks</a><ul>
<li><a class="reference internal" href="#tweaking-compiler-linker-flags">Tweaking compiler/linker flags</a></li>
<li><a class="reference internal" href="#using-non-microsoft-compilers-on-windows">Using non-Microsoft compilers on Windows</a><ul>
<li><a class="reference internal" href="#borland-codegear-c">Borland/CodeGear C++</a></li>
<li><a class="reference internal" href="#gnu-c-cygwin-mingw">GNU C / Cygwin / MinGW</a><ul>
<li><a class="reference internal" href="#older-versions-of-python-and-mingw">Older Versions of Python and MinGW</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="../distutils/apiref.html"
                        title="capítulo anterior"><span class="section-number">9. </span>Referência da API</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/install/index.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="../distutils/apiref.html" title="9. Referência da API"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

        <li class="nav-item nav-item-this"><a href="">Instalando módulos Python (versão legada)</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installing-python-modules-legacy-version">
<span id="install-index"></span><h1>Instalando módulos Python (versão legada)<a class="headerlink" href="#installing-python-modules-legacy-version" title="Link permanente para este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Autor</dt>
<dd class="field-odd"><p>Greg Ward</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>The entire <code class="docutils literal notranslate"><span class="pre">distutils</span></code> package has been deprecated and will be
removed in Python 3.12. This documentation is retained as a
reference only, and will be removed with the package. See the
<a class="reference internal" href="../whatsnew/3.10.html#distutils-deprecated"><span class="std std-ref">What’s New</span></a> entry for more information.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver também</p>
<dl class="simple">
<dt><a class="reference internal" href="../installing/index.html#installing-index"><span class="std std-ref">Instalando módulos Python</span></a></dt><dd><p>A documentação de instalação do módulo atualizada. Para o uso regular do Python, você provavelmente deseja aquela documentação em vez desta.</p>
</dd>
</dl>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Este documento está sendo mantido apenas até que a documentação do <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> em <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html">https://setuptools.readthedocs.io/en/latest/setuptools.html</a> cubra independentemente todas as informações relevantes atualmente incluídas aqui.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Este guia cobre apenas as ferramentas básicas para construir e distribuir extensões que são fornecidas como parte desta versão do Python. Ferramentas de terceiros oferecem alternativas mais fáceis de usar e mais seguras. Consulte a <a class="reference external" href="https://packaging.python.org/guides/tool-recommendations/">quick recommendations section</a> no Guia do Usuário de Pacotes Python para maiores informações</p>
</div>
<section id="introduction">
<span id="inst-intro"></span><h2>Introdução<a class="headerlink" href="#introduction" title="Link permanente para este título">¶</a></h2>
<p>No Python 2.0, a API <code class="docutils literal notranslate"><span class="pre">distutils</span></code> foi adicionada pela primeira vez à biblioteca padrão. Isso forneceu aos mantenedores das distros Linux uma maneira padrão de converter projetos Python em pacotes de distro Linux, e aos administradores de sistema uma maneira padrão de instalá-los diretamente nos sistemas de destino.</p>
<p>Nos muitos anos desde que o Python 2.0 foi lançado, acoplar fortemente o sistema de compilação e o instalador do pacote ao ciclo de lançamento do tempo de execução da linguagem tornou-se problemático e agora é recomendado que os projetos usem o instalador de pacotes <code class="docutils literal notranslate"><span class="pre">pip</span></code> e o sistema de compilação <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, ao invés de usar <code class="docutils literal notranslate"><span class="pre">distutils</span></code> diretamente.</p>
<p>Veja <a class="reference internal" href="../installing/index.html#installing-index"><span class="std std-ref">Instalando módulos Python</span></a> e <a class="reference internal" href="../distributing/index.html#distributing-index"><span class="std std-ref">Distribuindo módulos Python</span></a> para mais detalhes.</p>
<p>Esta documentação legada está sendo mantida apenas até que tenhamos certeza de que a documentação do <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> cobre tudo o que é necessário.</p>
<section id="distutils-based-source-distributions">
<span id="inst-new-standard"></span><h3>Distribuições de fonte baseadas em Distutils<a class="headerlink" href="#distutils-based-source-distributions" title="Link permanente para este título">¶</a></h3>
<p>Se você fizer o download de uma distribuição fonte do módulo, poderá saber rapidamente se ele foi empacotado e distribuído da maneira padrão, ou seja, usando o Distutils. Primeiro, o nome da distribuição e o número da versão aparecerão de forma proeminente no nome do arquivo baixado, por exemplo, <code class="file docutils literal notranslate"><span class="pre">foo-1.0.tar.gz</span></code> ou <code class="file docutils literal notranslate"><span class="pre">widget-0.9.7.zip</span></code>. Em seguida, o arquivo será descompactado em um diretório com nome semelhante: <code class="file docutils literal notranslate"><span class="pre">foo-1.0</span></code> ou <code class="file docutils literal notranslate"><span class="pre">widget-0.9.7</span></code>. Além disso, a distribuição conterá um script de configuração <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code>, e um arquivo chamado <code class="file docutils literal notranslate"><span class="pre">README.txt</span></code> ou possivelmente apenas <code class="file docutils literal notranslate"><span class="pre">README</span></code>, que deve explicar a construção e instalação da distribuição de módulo é uma simples questão de executar um comando de um terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<p>Para Windows, este comando deve ser executado de uma janela de prompt de comando (<span class="menuselection">Iniciar ‣ Acessórios</span>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>setup.py install
</pre></div>
</div>
<p>Se tudo isso for verdade, então você já sabe como construir e instalar os módulos que acabou de baixar: execute o comando acima. A menos que você precise instalar coisas de uma maneira não padronizada ou personalizar o processo de construção, você realmente não precisa deste manual. Ou melhor, o comando acima é tudo que você precisa para extrair deste manual.</p>
</section>
</section>
<section id="standard-build-and-install">
<span id="inst-standard-install"></span><h2>Construção e instalação padrão<a class="headerlink" href="#standard-build-and-install" title="Link permanente para este título">¶</a></h2>
<p>Conforme descrito na seção <a class="reference internal" href="#inst-new-standard"><span class="std std-ref">Distribuições de fonte baseadas em Distutils</span></a>, construir e instalar uma distribuição de módulo usando o Distutils é geralmente um comando simples para executar a partir de um terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<section id="platform-variations">
<span id="inst-platform-variations"></span><h3>Variações de plataforma<a class="headerlink" href="#platform-variations" title="Link permanente para este título">¶</a></h3>
<p>Você deve sempre executar o comando de configuração a partir do diretório raiz da distribuição, ou seja, o subdiretório de nível superior no qual a distribuição fonte do módulo descompacta. Por exemplo, se você acabou de baixar uma distribuição fonte do módulo <code class="file docutils literal notranslate"><span class="pre">foo-1.0.tar.gz</span></code> em um sistema Unix, a coisa normal a fazer é:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gunzip -c foo-1.0.tar.gz | tar xf -    # unpacks into directory foo-1.0
cd foo-1.0
python setup.py install
</pre></div>
</div>
<p>No Windows, você provavelmente baixaria <code class="file docutils literal notranslate"><span class="pre">foo-1.0.zip</span></code>. Se você baixou o arquivo para <code class="file docutils literal notranslate"><span class="pre">C:\Temp</span></code>, então ele seria descompactado em <code class="file docutils literal notranslate"><span class="pre">C:\Temp\foo-1.0</span></code>; você pode usar um manipulador de arquivo com uma interface gráfica de usuário (como WinZip) ou uma ferramenta de linha de comando (como <strong class="program">unzip</strong> ou <strong class="program">pkunzip</strong>) para descompactar o arquivo. Em seguida, abra uma janela de prompt de comando e execute:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd c:\Temp\foo-1.0
python setup.py install
</pre></div>
</div>
</section>
<section id="splitting-the-job-up">
<span id="inst-splitting-up"></span><h3>Dividindo o trabalho<a class="headerlink" href="#splitting-the-job-up" title="Link permanente para este título">¶</a></h3>
<p>A execução de <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">install</span></code> constrói e instala todos os módulos de uma vez. Se você preferir trabalhar de forma incremental – especialmente útil se quiser personalizar o processo de construção ou se as coisas estiverem dando errado – você pode usar o script de configuração para fazer uma coisa por vez. Isto é particularmente útil quando a construção e instalação serão feitas por usuários diferentes – por exemplo, você pode querer construir uma distribuição de módulo e entregá-la a um administrador de sistema para instalação (ou faça você mesmo, com privilégios de superusuário).</p>
<p>Por exemplo, você pode construir tudo em uma etapa e, em seguida, instalar tudo em uma segunda etapa, invocando o script de configuração duas vezes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build
python setup.py install
</pre></div>
</div>
<p>Se você fizer isso, você notará que executar o comando <strong class="command">install</strong> primeiro executa o comando <strong class="command">build</strong>, que – neste caso – rapidamente nota que não tem nada a fazer, já que tudo no diretório <code class="file docutils literal notranslate"><span class="pre">build</span></code> está atualizado.</p>
<p>Você pode não precisar dessa habilidade para quebrar as coisas com frequência se tudo o que fizer for instalar módulos baixados da rede, mas é muito útil para tarefas mais avançadas. Se você começar a distribuir seus próprios módulos e extensões Python, executará muitos comandos distutils individuais por conta própria.</p>
</section>
<section id="how-building-works">
<span id="inst-how-build-works"></span><h3>Como a construção funciona<a class="headerlink" href="#how-building-works" title="Link permanente para este título">¶</a></h3>
<p>Como implícito acima, o comando <strong class="command">build</strong> é responsável por colocar os arquivos a serem instalados em um <em>diretório de construção</em>. Por padrão, é <code class="file docutils literal notranslate"><span class="pre">build</span></code> na raiz da distribuição; se você está excessivamente preocupado com a velocidade, ou deseja manter a árvore de fontes intocada, você pode alterar o diretório de construção com a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--build-base</span></code>. Por exemplo:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --build-base=/path/to/pybuild/foo-1.0
</pre></div>
</div>
<p>(Ou você poderia fazer isso permanentemente com uma diretiva em seu sistema ou arquivo de configuração pessoal do Distutils; consulte a seção <a class="reference internal" href="#inst-config-files"><span class="std std-ref">Arquivos de configuração do Distutils</span></a>.) Normalmente, isso não é necessário.</p>
<p>O layout padrão para a árvore de construção é o seguinte:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--- build/ --- lib/
or
--- build/ --- lib.&lt;plat&gt;/
               temp.&lt;plat&gt;/
</pre></div>
</div>
<p>onde <code class="docutils literal notranslate"><span class="pre">&lt;plat&gt;</span></code> expande-se para uma breve descrição do sistema operacional/plataforma de hardware atual e versão Python. A primeira forma, com apenas um diretório <code class="file docutils literal notranslate"><span class="pre">lib</span></code>, é usada para “distribuições de módulos puros” – isto é, distribuições de módulos que incluem apenas módulos Python puros. Se uma distribuição de módulo contém quaisquer extensões (módulos escritos em C/C++), então a segunda forma, com dois diretórios <code class="docutils literal notranslate"><span class="pre">&lt;plat&gt;</span></code>, é usada. Nesse caso, o diretório <code class="file docutils literal notranslate"><span class="pre">temp.</span><em><span class="pre">plat</span></em></code> contém arquivos temporários gerados pelo processo de compilação/vinculação que não são realmente instalados. Em ambos os casos, o diretório <code class="file docutils literal notranslate"><span class="pre">lib</span></code> (ou <code class="file docutils literal notranslate"><span class="pre">lib.</span><em><span class="pre">plat</span></em></code>) contém todos os módulos Python (Python puro e extensões) que serão instalados.</p>
<p>No futuro, mais diretórios serão adicionados para lidar com scripts Python, documentação, executáveis binários e tudo o mais que for necessário para lidar com o trabalho de instalação de módulos e aplicações Python.</p>
</section>
<section id="how-installation-works">
<span id="inst-how-install-works"></span><h3>Como a instalação funciona<a class="headerlink" href="#how-installation-works" title="Link permanente para este título">¶</a></h3>
<p>Depois que o comando <strong class="command">build</strong> é executado (se você o executa explicitamente ou o comando <strong class="command">install</strong> faz isso por você), o trabalho do comando <strong class="command">install</strong> é relativamente simples: tudo o que ele tem a fazer é copiar tudo em <code class="file docutils literal notranslate"><span class="pre">build/lib</span></code> (ou <code class="file docutils literal notranslate"><span class="pre">build/lib.</span><em><span class="pre">plat</span></em></code>) para o diretório de instalação escolhido.</p>
<p>If you don’t choose an installation directory—i.e., if you just run <code class="docutils literal notranslate"><span class="pre">setup.py</span>
<span class="pre">install</span></code>—then the <strong class="command">install</strong> command installs to the standard
location for third-party Python modules.  This location varies by platform and
by how you built/installed Python itself.  On Unix (and macOS, which is also
Unix-based), it also depends on whether the module distribution being installed
is pure Python or contains extensions (“non-pure”):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 42%" />
<col style="width: 39%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Plataforma</p></th>
<th class="head"><p>Local de instalação padrão</p></th>
<th class="head"><p>Valor padrão</p></th>
<th class="head"><p>Notas</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Unix (puro)</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">/usr/local/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p>Unix (não puro)</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em><span class="pre">/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">/usr/local/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-even"><td><p>Windows</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">\Lib\site-packages</span></code></p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">C:\Python</span><em><span class="pre">XY</span></em><span class="pre">\Lib\site-packages</span></code></p></td>
<td><p>(2)</p></td>
</tr>
</tbody>
</table>
<p>Notas:</p>
<ol class="arabic simple">
<li><p>A maioria das distribuições Linux inclui Python como uma parte padrão do sistema, então <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code> e <code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em></code> são geralmente <code class="file docutils literal notranslate"><span class="pre">/usr</span></code> no Linux. Se você construir Python no Linux (ou qualquer sistema semelhante ao Unix), o padrão de <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code> e <code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em></code> é <code class="file docutils literal notranslate"><span class="pre">/usr/local</span></code>.</p></li>
<li><p>O diretório de instalação padrão no Windows era <code class="file docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Python</span></code> no Python 1.6a1, 1.5.2 e anterior.</p></li>
</ol>
<p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code> and <code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em></code> stand for the directories that Python
is installed to, and where it finds its libraries at run-time.  They are always
the same under Windows, and very often the same under Unix and macOS.  You
can find out what your Python installation uses for <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code> and
<code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em></code> by running Python in interactive mode and typing a few
simple commands. Under Unix, just type <code class="docutils literal notranslate"><span class="pre">python</span></code> at the shell prompt.  Under
Windows, choose <span class="menuselection">Start ‣ Programs ‣ Python X.Y ‣
Python (command line)</span>.   Once the interpreter is started, you type Python code
at the prompt.  For example, on my Linux system, I type the three Python
statements shown below, and get the output as shown, to find out my
<code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code> and <code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go">Python 2.4 (#26, Aug  7 2004, 17:19:02)</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">prefix</span>
<span class="go">&#39;/usr&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">exec_prefix</span>
<span class="go">&#39;/usr&#39;</span>
</pre></div>
</div>
<p>Alguns outros espaços reservados são usados neste documento: <code class="file docutils literal notranslate"><em><span class="pre">X.Y</span></em></code> representa a versão do Python, por exemplo <code class="docutils literal notranslate"><span class="pre">3.2</span></code>; <code class="file docutils literal notranslate"><em><span class="pre">abiflags</span></em></code> será substituído pelo valor de <a class="reference internal" href="../library/sys.html#sys.abiflags" title="sys.abiflags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.abiflags</span></code></a> ou pela string vazia para plataformas que não definem sinalizadores ABI; <code class="file docutils literal notranslate"><em><span class="pre">distname</span></em></code> será substituído pelo nome da distribuição de módulo sendo instalado. Pontos e letras maiúsculas são importantes nos caminhos; por exemplo, um valor que usa <code class="docutils literal notranslate"><span class="pre">python3.2</span></code> no UNIX normalmente usará <code class="docutils literal notranslate"><span class="pre">Python32</span></code> no Windows.</p>
<p>Se você não deseja instalar módulos no local padrão, ou se não tem permissão para escrever lá, então você precisa ler sobre instalações alternativas na seção <a class="reference internal" href="#inst-alt-install"><span class="std std-ref">Instalação alternativa</span></a>. Se você deseja personalizar seus diretórios de instalação mais intensamente, consulte a seção <a class="reference internal" href="#inst-custom-install"><span class="std std-ref">Instalação personalizada</span></a> sobre instalações personalizadas.</p>
</section>
</section>
<section id="alternate-installation">
<span id="inst-alt-install"></span><h2>Instalação alternativa<a class="headerlink" href="#alternate-installation" title="Link permanente para este título">¶</a></h2>
<p>Frequentemente, é necessário ou desejável instalar módulos em um local diferente do local padrão para módulos Python de terceiros. Por exemplo, em um sistema Unix, você pode não ter permissão para escrever no diretório de módulo de terceiros padrão. Ou você pode querer experimentar um módulo antes de torná-lo uma parte padrão da instalação local do Python. Isso é especialmente verdadeiro ao atualizar uma distribuição já presente: você deseja ter certeza de que sua base de scripts existente ainda funciona com a nova versão antes de realmente atualizar.</p>
<p>O comando <strong class="command">install</strong> do Distutils é projetado para tornar a instalação de distribuições de módulos em um local alternativo simples e indolor. A ideia básica é que você forneça um diretório base para a instalação, e o comando <strong class="command">install</strong> escolhe um conjunto de diretórios (chamado de <em>esquema de instalação</em>) neste diretório base no qual deseja instalar os arquivos. Os detalhes variam entre as plataformas, portanto, leia qualquer uma das seções a seguir que se aplique a você.</p>
<p>Observe que os vários esquemas de instalação alternativos são mutuamente exclusivos: você pode passar <code class="docutils literal notranslate"><span class="pre">--user</span></code>, ou <code class="docutils literal notranslate"><span class="pre">--home</span></code>, ou <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> e <code class="docutils literal notranslate"><span class="pre">--exec-prefix</span></code>, ou <code class="docutils literal notranslate"><span class="pre">--install-base</span></code> e <code class="docutils literal notranslate"><span class="pre">--install-platbase</span></code>, mas você não pode misturar a partir destes grupos.</p>
<section id="alternate-installation-the-user-scheme">
<span id="inst-alt-install-user"></span><h3>Instalação alternativa: o esquema usuário<a class="headerlink" href="#alternate-installation-the-user-scheme" title="Link permanente para este título">¶</a></h3>
<p>Este esquema foi projetado para ser a solução mais conveniente para usuários que não têm permissão de escrita no diretório global de pacotes de sites ou não desejam instalar nele. É habilitado com uma opção simples:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --user
</pre></div>
</div>
<p>Files will be installed into subdirectories of <a class="reference internal" href="../library/site.html#site.USER_BASE" title="site.USER_BASE"><code class="xref py py-data docutils literal notranslate"><span class="pre">site.USER_BASE</span></code></a> (written
as <code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em></code> hereafter).  This scheme installs pure Python modules and
extension modules in the same location (also known as <a class="reference internal" href="../library/site.html#site.USER_SITE" title="site.USER_SITE"><code class="xref py py-data docutils literal notranslate"><span class="pre">site.USER_SITE</span></code></a>).
Here are the values for UNIX, including macOS:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Diretório de instalação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>scripts</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">/bin</span></code></p></td>
</tr>
<tr class="row-even"><td><p>dados</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em></code></p></td>
</tr>
<tr class="row-odd"><td><p>cabeçalhos do C</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">/include/python</span><em><span class="pre">X.Y</span></em><em><span class="pre">abiflags</span></em><span class="pre">/</span><em><span class="pre">distname</span></em></code></p></td>
</tr>
</tbody>
</table>
<p>E aqui estão os valores usados no Windows:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Diretório de instalação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">\Python</span><em><span class="pre">XY</span></em><span class="pre">\site-packages</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>scripts</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">\Python</span><em><span class="pre">XY</span></em><span class="pre">\Scripts</span></code></p></td>
</tr>
<tr class="row-even"><td><p>dados</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em></code></p></td>
</tr>
<tr class="row-odd"><td><p>cabeçalhos do C</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">\Python</span><em><span class="pre">XY</span></em><span class="pre">\Include{distname}</span></code></p></td>
</tr>
</tbody>
</table>
<p>A vantagem de usar este esquema em comparação com os outros descritos abaixo é que o diretório de pacotes do site do usuário está, em condições normais, sempre incluído em <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> (veja <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> para mais informações), o que significa que não há etapa adicional a ser executada após a execução do script <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> para finalizar a instalação.</p>
<p>O comando <strong class="command">build_ext</strong> também tem uma opção <code class="docutils literal notranslate"><span class="pre">--user</span></code> para adicionar <code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">/include</span></code> ao caminho de pesquisa do compilador para arquivos de cabeçalho e <code class="file docutils literal notranslate"><em><span class="pre">userbase</span></em><span class="pre">/lib</span></code> para o caminho de pesquisa do compilador para bibliotecas, bem como para o caminho de pesquisa em tempo de execução para bibliotecas C compartilhadas (rpath).</p>
</section>
<section id="alternate-installation-the-home-scheme">
<span id="inst-alt-install-home"></span><h3>Instalação alternativa: o esquema home<a class="headerlink" href="#alternate-installation-the-home-scheme" title="Link permanente para este título">¶</a></h3>
<p>A ideia por trás do “esquema home” é que você construa e mantenha um estoque pessoal de módulos Python. O nome deste esquema é derivado da ideia de um diretório “home” no Unix, uma vez que não é incomum para um usuário Unix fazer seu diretório home ter um layout semelhante a <code class="file docutils literal notranslate"><span class="pre">/usr/</span></code> ou <code class="file docutils literal notranslate"><span class="pre">/usr/local/</span></code>. Este esquema pode ser usado por qualquer pessoa, independentemente do sistema operacional para o qual está instalando.</p>
<p>Instalando uma nova distribuição de módulo é tão simples quanto</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --home=&lt;dir&gt;
</pre></div>
</div>
<p>onde você pode fornecer qualquer diretório que desejar para a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--home</span></code>. No Unix, digitadores preguiçosos podem simplesmente digitar um til (<code class="docutils literal notranslate"><span class="pre">~</span></code>); o comando <strong class="command">install</strong> vai expandir isso para o seu diretório home:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --home=~
</pre></div>
</div>
<p>Para fazer o Python encontrar as distribuições instaladas com este esquema, você deve <a class="reference internal" href="#inst-search-path"><span class="std std-ref">modificar o caminho de pesquisa do Python</span></a> ou editar <code class="xref py py-mod docutils literal notranslate"><span class="pre">sitecustomize</span></code> (veja <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a>) para chamar <code class="xref py py-func docutils literal notranslate"><span class="pre">site.additedir()</span></code> ou editar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>.</p>
<p>A opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--home</span></code> define o diretório base de instalação. Os arquivos são instalados nos seguintes diretórios na base de instalação da seguinte maneira:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Diretório de instalação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">home</span></em><span class="pre">/lib/python</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>scripts</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">home</span></em><span class="pre">/bin</span></code></p></td>
</tr>
<tr class="row-even"><td><p>dados</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">home</span></em></code></p></td>
</tr>
<tr class="row-odd"><td><p>cabeçalhos do C</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">home</span></em><span class="pre">/include/python/</span><em><span class="pre">distname</span></em></code></p></td>
</tr>
</tbody>
</table>
<p>(Substitua mentalmente as barras por contrabarras se estiver no Windows.)</p>
</section>
<section id="alternate-installation-unix-the-prefix-scheme">
<span id="inst-alt-install-prefix-unix"></span><h3>Instalação alternativa: Unix (o esquema prefixo)<a class="headerlink" href="#alternate-installation-unix-the-prefix-scheme" title="Link permanente para este título">¶</a></h3>
<p>O “esquema prefixo” é útil quando você deseja usar uma instalação Python para realizar a compilação/instalação (ou seja, para executar o script de configuração), mas instalar módulos no diretório de módulo de terceiros de uma instalação Python diferente (ou algo que parece uma instalação diferente do Python). Se isso parece um pouco incomum, então é – é por isso que os esquemas usuário e home vêm antes. No entanto, existem pelo menos dois casos conhecidos em que o esquema prefixo será útil.</p>
<p>Primeiro, considere que muitas distribuições Linux colocam Python em <code class="file docutils literal notranslate"><span class="pre">/usr</span></code>, ao invés do mais tradicional <code class="file docutils literal notranslate"><span class="pre">/usr/local</span></code>. Isso é totalmente apropriado, já que, nesses casos, o Python é parte do “sistema” em vez de um complemento local. No entanto, se você estiver instalando módulos Python a partir do código-fonte, provavelmente deseja que eles entrem em <code class="file docutils literal notranslate"><span class="pre">/usr/local/lib/python2.</span><em><span class="pre">X</span></em></code> em vez de <code class="file docutils literal notranslate"><span class="pre">/usr/lib/python2.</span><em><span class="pre">X</span></em></code>. Isso pode ser feito com</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/usr/bin/python setup.py install --prefix=/usr/local
</pre></div>
</div>
<p>Outra possibilidade é um sistema de arquivos de rede onde o nome usado para escrever em um diretório remoto é diferente do nome usado para lê-lo: por exemplo, o interpretador Python acessado como <code class="file docutils literal notranslate"><span class="pre">/usr/local/bin/python</span></code> pode pesquisar por módulos em <code class="file docutils literal notranslate"><span class="pre">/usr/local/lib/python2.</span><em><span class="pre">X</span></em></code>, mas esses módulos teriam que ser instalados em, digamos, <code class="file docutils literal notranslate"><span class="pre">/mnt/</span><em><span class="pre">&#64;server</span></em><span class="pre">/export/lib/python2.</span><em><span class="pre">X</span></em></code>. Isso pode ser feito com</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/usr/local/bin/python setup.py install --prefix=/mnt/@server/export
</pre></div>
</div>
<p>Em ambos os casos, a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code> define a base de instalação, e a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> define a base de instalação específica da plataforma, que é usada para arquivos específicos da plataforma. (Atualmente, isso significa apenas distribuições de módulos não puros, mas pode ser expandido para bibliotecas C, executáveis binários, etc.) Se <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> não for fornecido, o padrão é <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code>. Os arquivos são instalados da seguinte forma:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Diretório de instalação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos Python</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>módulos de extensão</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">exec-prefix</span></em><span class="pre">/lib/python</span><em><span class="pre">X.Y</span></em><span class="pre">/site-packages</span></code></p></td>
</tr>
<tr class="row-even"><td><p>scripts</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/bin</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>dados</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code></p></td>
</tr>
<tr class="row-even"><td><p>cabeçalhos do C</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/include/python</span><em><span class="pre">X.Y</span></em><em><span class="pre">abiflags</span></em><span class="pre">/</span><em><span class="pre">distname</span></em></code></p></td>
</tr>
</tbody>
</table>
<p>Não há nenhum requisito de que <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code> ou <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> realmente apontem para uma instalação alternativa do Python; se os diretórios listados acima ainda não existirem, eles serão criados no momento da instalação.</p>
<p>A propósito, a verdadeira razão pela qual o esquema prefixo é importante é simplesmente que uma instalação Unix padrão usa o esquema prefixo, mas com <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code> e <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> fornecidos pelo próprio Python como <code class="docutils literal notranslate"><span class="pre">sys.prefix</span></code> e <code class="docutils literal notranslate"><span class="pre">sys.exec_prefix</span></code>. Portanto, você pode pensar que nunca usará o esquema prefixo, mas toda vez que executa <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> sem qualquer outra opção, você o está usando.</p>
<p>Observe que instalar extensões para uma instalação alternativa do Python não tem efeito sobre como essas extensões são construídas: em particular, os arquivos de cabeçalho Python (<code class="file docutils literal notranslate"><span class="pre">Python.h</span></code> e amigos) instalados com o interpretador Python usado para executar o script de configuração vão ser usador na compilação de extensões. É sua responsabilidade garantir que o interpretador usado para executar as extensões instaladas dessa maneira seja compatível com o interpretador usado para criá-las. A melhor maneira de fazer isso é garantir que os dois interpretadores sejam da mesma versão do Python (possivelmente compilações diferentes ou possivelmente cópias da mesma compilação). (Claro, se seu <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code> e seu <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> nem mesmo apontam para uma instalação alternativa do Python, isso é imaterial.)</p>
</section>
<section id="alternate-installation-windows-the-prefix-scheme">
<span id="inst-alt-install-prefix-windows"></span><h3>Instalação alternativa: Windows (o esquema prefixo)<a class="headerlink" href="#alternate-installation-windows-the-prefix-scheme" title="Link permanente para este título">¶</a></h3>
<p>O Windows não tem o conceito de diretório pessoal do usuário e, como a instalação padrão do Python no Windows é mais simples do que no Unix, a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code> tem sido tradicionalmente usada para instalar pacotes adicionais em locais separados no Windows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --prefix=&quot;\Temp\Python&quot;
</pre></div>
</div>
<p>para instalar módulos para o diretório <code class="file docutils literal notranslate"><span class="pre">\Temp\Python</span></code> na unidade atual.</p>
<p>A base de instalação é definida pela opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--prefix</span></code>; a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--exec-prefix</span></code> não é suportada no Windows, o que significa que módulos Python puros e módulos de extensão são instalados no mesmo local. Os arquivos são instalados da seguinte forma:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Diretório de instalação</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">\Lib\site-packages</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>scripts</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">\Scripts</span></code></p></td>
</tr>
<tr class="row-even"><td><p>dados</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code></p></td>
</tr>
<tr class="row-odd"><td><p>cabeçalhos do C</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">\Include{distname}</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="custom-installation">
<span id="inst-custom-install"></span><h2>Instalação personalizada<a class="headerlink" href="#custom-installation" title="Link permanente para este título">¶</a></h2>
<p>Às vezes, os esquemas de instalação alternativos descritos na seção <a class="reference internal" href="#inst-alt-install"><span class="std std-ref">Instalação alternativa</span></a> simplesmente não fazem o que você quer. Você pode querer ajustar apenas um ou dois diretórios enquanto mantém tudo sob o mesmo diretório base, ou você pode querer redefinir completamente o esquema de instalação. Em ambos os casos, você está criando um <em>esquema de instalação personalizada</em>.</p>
<p>Para criar um esquema de instalação personalizada, você começa com um dos esquemas alternativos e substitui alguns dos diretórios de instalação usados para os vários tipos de arquivos, usando estas opções:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Opção de substituição</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>módulos Python</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-purelib</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>módulos de extensão</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-platlib</span></code></p></td>
</tr>
<tr class="row-even"><td><p>todos os módulos</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-lib</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>scripts</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-scripts</span></code></p></td>
</tr>
<tr class="row-even"><td><p>dados</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-data</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>cabeçalhos do C</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">--install-headers</span></code></p></td>
</tr>
</tbody>
</table>
<p>Essas opções de substituição podem ser relativas, absolutas ou explicitamente definidas em termos de um dos diretórios base da instalação. (Existem dois diretórios básicos de instalação, e eles são normalmente os mesmos – eles só diferem quando você usa o “esquema prefixo” do Unix e fornece opções diferentes de <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> e <code class="docutils literal notranslate"><span class="pre">--exec-prefix</span></code>; usar <code class="docutils literal notranslate"><span class="pre">--install-lib</span></code> irá substituir os valores calculados ou fornecidos para <code class="docutils literal notranslate"><span class="pre">--install-purelib</span></code> e <code class="docutils literal notranslate"><span class="pre">--install-platlib</span></code>, e é recomendado para esquemas que não fazem diferença entre Python e módulos de extensão.)</p>
<p>Por exemplo, digamos que você esteja instalando uma distribuição de módulo em seu diretório pessoal no Unix – mas deseja que os scripts estejam em <code class="file docutils literal notranslate"><span class="pre">~/scripts</span></code> em vez de <code class="file docutils literal notranslate"><span class="pre">~/bin</span></code>. Como você pode esperar, você pode substituir este diretório com a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--install-scripts</span></code>; neste caso, faz mais sentido fornecer um caminho relativo, que será interpretado em relação ao diretório base da instalação (seu diretório home, neste caso):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --home=~ --install-scripts=scripts
</pre></div>
</div>
<p>Outro exemplo Unix: suponha que sua instalação Python foi construída e instalada com um prefixo de <code class="file docutils literal notranslate"><span class="pre">/usr/local/python</span></code>, então sob uma instalação padrão os scripts irão acabar em <code class="file docutils literal notranslate"><span class="pre">/usr/local/python/bin</span></code>. Se você os quiser em <code class="file docutils literal notranslate"><span class="pre">/usr/local/bin</span></code> em vez disso, você deve fornecer este diretório absoluto para a opção <code class="xref std std-option docutils literal notranslate"><span class="pre">--install-scripts</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --install-scripts=/usr/local/bin
</pre></div>
</div>
<p>(Isso executa uma instalação usando o “esquema prefixo”, onde o prefixo é com o que seu interpretador Python foi instalado – <code class="file docutils literal notranslate"><span class="pre">/usr/local/python</span></code> neste caso.)</p>
<p>Se você mantém o Python no Windows, pode querer que os módulos de terceiros fiquem em um subdiretório de <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code>, ao invés do próprio <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code>. Isso é quase tão fácil quanto personalizar o diretório de instalação do script – você apenas tem que lembrar que há dois tipos de módulos com os quais se preocupar, Python e módulos de extensão, que podem ser convenientemente controlados por uma opção:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --install-lib=Site
</pre></div>
</div>
<p>O diretório de instalação especificado é relativo a <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em></code>. Obviamente, você também deve garantir que esse diretório esteja no caminho de pesquisa do módulo do Python, por exemplo, colocando um arquivo <code class="file docutils literal notranslate"><span class="pre">.pth</span></code> em um diretório de site (consulte <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a>). Veja a seção <a class="reference internal" href="#inst-search-path"><span class="std std-ref">Modificando o caminho de pesquisa do Python</span></a> para descobrir como modificar o caminho de pesquisa do Python.</p>
<p>Se você deseja definir todo um esquema de instalação, basta fornecer todas as opções do diretório de instalação. A maneira recomendada de fazer isso é fornecer caminhos relativos; por exemplo, se você deseja manter todos os arquivos relacionados ao módulo Python em <code class="file docutils literal notranslate"><span class="pre">python</span></code> em seu diretório home, e deseja um diretório separado para cada plataforma de onde você usa seu diretório inicial, você pode definir o seguinte esquema de instalação:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --home=~ \
                        --install-purelib=python/lib \
                        --install-platlib=python/lib.$PLAT \
                        --install-scripts=python/scripts
                        --install-data=python/data
</pre></div>
</div>
<p>ou, equivalentemente,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --home=~/python \
                        --install-purelib=lib \
                        --install-platlib=&#39;lib.$PLAT&#39; \
                        --install-scripts=scripts
                        --install-data=data
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">$PLAT</span></code> não é (necessariamente) uma variável de ambiente – ela será expandida pelo Distutils conforme ele analisa suas opções de linha de comando, assim como faz ao analisar seu(s) arquivo(s) de configuração.</p>
<p>Obviamente, especificar todo o esquema de instalação toda vez que você instalar uma nova distribuição de módulo seria muito tedioso. Assim, você pode colocar essas opções em seu arquivo de configuração Distutils (consulte a seção <a class="reference internal" href="#inst-config-files"><span class="std std-ref">Arquivos de configuração do Distutils</span></a>):</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[install]</span><span class="w"></span>
<span class="na">install-base</span><span class="o">=</span><span class="s">$HOME</span><span class="w"></span>
<span class="na">install-purelib</span><span class="o">=</span><span class="s">python/lib</span><span class="w"></span>
<span class="na">install-platlib</span><span class="o">=</span><span class="s">python/lib.$PLAT</span><span class="w"></span>
<span class="na">install-scripts</span><span class="o">=</span><span class="s">python/scripts</span><span class="w"></span>
<span class="na">install-data</span><span class="o">=</span><span class="s">python/data</span><span class="w"></span>
</pre></div>
</div>
<p>ou, equivalentemente,</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[install]</span><span class="w"></span>
<span class="na">install-base</span><span class="o">=</span><span class="s">$HOME/python</span><span class="w"></span>
<span class="na">install-purelib</span><span class="o">=</span><span class="s">lib</span><span class="w"></span>
<span class="na">install-platlib</span><span class="o">=</span><span class="s">lib.$PLAT</span><span class="w"></span>
<span class="na">install-scripts</span><span class="o">=</span><span class="s">scripts</span><span class="w"></span>
<span class="na">install-data</span><span class="o">=</span><span class="s">data</span><span class="w"></span>
</pre></div>
</div>
<p>Observe que esses dois <em>não</em> são equivalentes se você fornecer um diretório base de instalação diferente ao executar o script de configuração. Por exemplo,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py install --install-base=/tmp
</pre></div>
</div>
<p>instalaria módulos puros em <code class="file docutils literal notranslate"><span class="pre">/tmp/python/lib</span></code> no primeiro caso e em <code class="file docutils literal notranslate"><span class="pre">/tmp/lib</span></code> no segundo caso. (Para o segundo caso, você provavelmente deseja fornecer uma base de instalação de <code class="file docutils literal notranslate"><span class="pre">/tmp/python</span></code>.)</p>
<p>Você provavelmente notou o uso de <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> e <code class="docutils literal notranslate"><span class="pre">$PLAT</span></code> na entrada do arquivo de configuração de amostra. Estas são variáveis de configuração Distutils, que apresentam uma forte semelhança com variáveis de ambiente. Na verdade, você pode usar variáveis de ambiente em arquivos de configuração em plataformas que têm essa noção, mas os Distutils definem adicionalmente algumas variáveis extras que podem não estar em seu ambiente, como <code class="docutils literal notranslate"><span class="pre">$PLAT</span></code>. (E, claro, em sistemas que não têm variáveis de ambiente, como Mac OS 9, as variáveis de configuração fornecidas pelo Distutils são as únicas que você pode usar.) Consulte a seção <a class="reference internal" href="#inst-config-files"><span class="std std-ref">Arquivos de configuração do Distutils</span></a> para detalhes.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Quando um <a class="reference internal" href="../library/venv.html#venv-def"><span class="std std-ref">ambiente virtual</span></a> é ativado, quaisquer opções que alterem o caminho de instalação serão ignoradas de todos os arquivos de configuração distutils para evitar a instalação inadvertida de projetos fora do ambiente virtual.</p>
</div>
<section id="modifying-python-s-search-path">
<span id="inst-search-path"></span><h3>Modificando o caminho de pesquisa do Python<a class="headerlink" href="#modifying-python-s-search-path" title="Link permanente para este título">¶</a></h3>
<p>Quando o interpretador Python executa uma instrução <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a>, ele procura tanto o código Python quanto os módulos de extensão ao longo de um caminho de busca. Um valor padrão para o caminho é configurado no binário Python quando o interpretador é construído. Você pode determinar o caminho importando o módulo <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> e imprimindo o valor de <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python
Python 2.2 (#11, Oct  3 2002, 13:31:27)
[GCC 2.96 20000731 (Red Hat Linux 7.3 2.96-112)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path
[&#39;&#39;, &#39;/usr/local/lib/python2.3&#39;, &#39;/usr/local/lib/python2.3/plat-linux2&#39;,
 &#39;/usr/local/lib/python2.3/lib-tk&#39;, &#39;/usr/local/lib/python2.3/lib-dynload&#39;,
 &#39;/usr/local/lib/python2.3/site-packages&#39;]
&gt;&gt;&gt;
</pre></div>
</div>
<p>A string nula em <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> representa o diretório de trabalho atual.</p>
<p>A convenção esperada para pacotes instalados localmente é colocá-los no diretório <code class="file docutils literal notranslate"><em><span class="pre">…</span></em><span class="pre">/site-packages/</span></code>, mas você pode querer instalar módulos Python em algum diretório arbitrário. Por exemplo, seu site pode ter uma convenção de manter todos os softwares relacionados ao servidor da web em <code class="file docutils literal notranslate"><span class="pre">/www</span></code>. Módulos add-on Python podem então pertencer a <code class="file docutils literal notranslate"><span class="pre">/www/python</span></code>, e para importá-los, este diretório deve ser adicionado a <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. Existem várias maneiras de adicionar o diretório.</p>
<p>A maneira mais conveniente é adicionar um arquivo de configuração de caminho a um diretório que já está no caminho do Python, geralmente para o diretório <code class="file docutils literal notranslate"><span class="pre">.../site-packages/</span></code>. Os arquivos de configuração de caminho têm uma extensão de <code class="file docutils literal notranslate"><span class="pre">.pth</span></code>, e cada linha deve conter um único caminho que será anexado a <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. (Como os novos caminhos são anexados a <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, os módulos nos diretórios adicionados não substituirão os módulos padrão. Isso significa que você não pode usar este mecanismo para instalar versões fixas de módulos padrão.)</p>
<p>Os caminhos podem ser absolutos ou relativos, nesse caso eles são relativos ao diretório que contém o arquivo <code class="file docutils literal notranslate"><span class="pre">.pth</span></code>. Veja a documentação do módulo <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> para mais informações.</p>
<p>Uma maneira um pouco menos conveniente é editar o arquivo  <code class="file docutils literal notranslate"><span class="pre">site.py</span></code> na biblioteca padrão do Python e modificar <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. <code class="file docutils literal notranslate"><span class="pre">site.py</span></code> é importado automaticamente quando o interpretador Python é executado, a menos que a opção <a class="reference internal" href="../using/cmdline.html#cmdoption-S"><code class="xref std std-option docutils literal notranslate"><span class="pre">-S</span></code></a> seja fornecida para suprimir este comportamento. Portanto, você pode simplesmente editar <code class="file docutils literal notranslate"><span class="pre">site.py</span></code> e adicionar duas linhas a ele:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/www/python/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>No entanto, se você reinstalar a mesma versão principal do Python (talvez ao atualizar de 2.2 para 2.2.2, por exemplo) <code class="file docutils literal notranslate"><span class="pre">site.py</span></code> será substituído pela versão padrão. Você teria que lembrar que ele foi modificado e salvar uma cópia antes de fazer a instalação.</p>
<p>Existem duas variáveis de ambiente que podem modificar <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. <span class="target" id="index-20"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONHOME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONHOME</span></code></a> define um valor alternativo para o prefixo da instalação do Python. Por exemplo, se <span class="target" id="index-21"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONHOME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONHOME</span></code></a> estiver definida como <code class="docutils literal notranslate"><span class="pre">/www/python</span></code>, o caminho de pesquisa será definido como <code class="docutils literal notranslate"><span class="pre">['',</span> <span class="pre">'/www/python/lib/pythonX.Y/',</span> <span class="pre">'/www/python/lib/pythonX.Y/plat-linux2',</span> <span class="pre">...]</span></code>.</p>
<p>A variável <span class="target" id="index-22"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> pode ser definida como uma lista de caminhos que serão adicionados ao início de <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. Por exemplo, se <span class="target" id="index-23"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> estiver definida como <code class="docutils literal notranslate"><span class="pre">/www/python:/opt/py</span></code>, o caminho de pesquisa começará com <code class="docutils literal notranslate"><span class="pre">['/www/python',</span> <span class="pre">'/opt/py']</span></code>. (Observe que os diretórios devem existir para serem adicionados ao <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>; o módulo <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> remove caminhos que não existem.)</p>
<p>Finalmente, <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> é apenas uma lista Python regular, então qualquer aplicação Python pode modificá-la adicionando ou removendo entradas.</p>
</section>
</section>
<section id="distutils-configuration-files">
<span id="inst-config-files"></span><h2>Arquivos de configuração do Distutils<a class="headerlink" href="#distutils-configuration-files" title="Link permanente para este título">¶</a></h2>
<p>Conforme mencionado acima, você pode usar os arquivos de configuração do Distutils para registrar preferências pessoais ou do site para qualquer opção do Distutils. Ou seja, qualquer opção para qualquer comando pode ser armazenada em um de dois ou três (dependendo da sua plataforma) arquivos de configuração, que serão consultados antes que a linha de comando seja analisada. Isso significa que os arquivos de configuração sobrescreverão os valores padrão e a linha de comando, por sua vez, sobrescreverá os arquivos de configuração. Além disso, se vários arquivos de configuração se aplicarem, os valores dos arquivos “anteriores” serão substituídos pelos arquivos “posteriores”.</p>
<section id="location-and-names-of-config-files">
<span id="inst-config-filenames"></span><h3>Localização e nomes dos arquivos de configuração<a class="headerlink" href="#location-and-names-of-config-files" title="Link permanente para este título">¶</a></h3>
<p>The names and locations of the configuration files vary slightly across
platforms.  On Unix and macOS, the three configuration files (in the order
they are processed) are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 73%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Localização e nome de arquivo</p></th>
<th class="head"><p>Notas</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sistema</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/lib/python</span><em><span class="pre">ver</span></em><span class="pre">/distutils/distutils.cfg</span></code></p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p>pessoal</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">$HOME/.pydistutils.cfg</span></code></p></td>
<td><p>(2)</p></td>
</tr>
<tr class="row-even"><td><p>local</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">setup.cfg</span></code></p></td>
<td><p>(3)</p></td>
</tr>
</tbody>
</table>
<p>E no Windows, os arquivos de configuração são:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 70%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tipo de arquivo</p></th>
<th class="head"><p>Localização e nome de arquivo</p></th>
<th class="head"><p>Notas</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sistema</p></td>
<td><p><code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">\Lib\distutils\distutils.cfg</span></code></p></td>
<td><p>(4)</p></td>
</tr>
<tr class="row-odd"><td><p>pessoal</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">%HOME%\pydistutils.cfg</span></code></p></td>
<td><p>(5)</p></td>
</tr>
<tr class="row-even"><td><p>local</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">setup.cfg</span></code></p></td>
<td><p>(3)</p></td>
</tr>
</tbody>
</table>
<p>Em todas as plataformas, o arquivo “pessoal” pode ser desativado temporariamente passando a opção <cite>–no-user-cfg</cite>.</p>
<p>Notas:</p>
<ol class="arabic simple">
<li><p>Estritamente falando, o arquivo de configuração de todo o sistema reside no diretório onde os Distutils estão instalados; no Python 1.6 e posterior no Unix, isso é mostrado. Para Python 1.5.2, o Distutils normalmente será instalado em <code class="file docutils literal notranslate"><em><span class="pre">prefix</span></em><span class="pre">/lib/python1.5/site-packages/distutils</span></code>, então o arquivo de configuração do sistema deve ser colocado lá em Python 1.5.2.</p></li>
<li><p>No Unix, se a variável de ambiente <span class="target" id="index-24"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code> não estiver definida, o diretório home do usuário será determinado com a função <code class="xref py py-func docutils literal notranslate"><span class="pre">getpwuid()</span></code> do módulo padrão <a class="reference internal" href="../library/pwd.html#module-pwd" title="pwd: The password database (getpwnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pwd</span></code></a>. Isso é feito pela função <a class="reference internal" href="../library/os.path.html#os.path.expanduser" title="os.path.expanduser"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.expanduser()</span></code></a> usada pelo Distutils.</p></li>
<li><p>Ou seja, no diretório atual (geralmente a localização do script de configuração).</p></li>
<li><p>(Consulte também a nota (1).) No Python 1.6 e posterior, o “prefixo de instalação” padrão do Python é <code class="file docutils literal notranslate"><span class="pre">C:\Python</span></code>, então o arquivo de configuração do sistema é normalmente <code class="file docutils literal notranslate"><span class="pre">C:\Python\Lib\distutils\distutils.cfg</span></code>. No Python 1.5.2, o prefixo padrão era <code class="file docutils literal notranslate"><span class="pre">C:\Arquivos</span> <span class="pre">de</span> <span class="pre">programas\Python</span></code>, e os Distutils não faziam parte da biblioteca padrão – de forma que o arquivo de configuração do sistema seria <code class="file docutils literal notranslate"><span class="pre">C:\Arquivos</span> <span class="pre">de</span> <span class="pre">programas\Python\distutils\distutils.cfg</span></code> em uma instalação padrão do Python 1.5.2 no Windows.</p></li>
<li><p>No Windows, Se a variável de ambiente <span class="target" id="index-25"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code> não estiver definida, <span class="target" id="index-26"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">USERPROFILE</span></code>, então <span class="target" id="index-27"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOMEDRIVE</span></code> e, por fim, <span class="target" id="index-28"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOMEPATH</span></code> serão tentados. Isso é feito pela função <a class="reference internal" href="../library/os.path.html#os.path.expanduser" title="os.path.expanduser"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.expanduser()</span></code></a> usada pelo Distutils.</p></li>
</ol>
</section>
<section id="syntax-of-config-files">
<span id="inst-config-syntax"></span><h3>Sintaxe dos arquivos de configuração<a class="headerlink" href="#syntax-of-config-files" title="Link permanente para este título">¶</a></h3>
<p>The Distutils configuration files all have the same syntax.  The config files
are grouped into sections.  There is one section for each Distutils command,
plus a <code class="docutils literal notranslate"><span class="pre">global</span></code> section for global options that affect every command.  Each
section consists of one option per line, specified as <code class="docutils literal notranslate"><span class="pre">option=value</span></code>.</p>
<p>For example, the following is a complete config file that just forces all
commands to run quietly by default:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[global]</span><span class="w"></span>
<span class="na">verbose</span><span class="o">=</span><span class="s">0</span><span class="w"></span>
</pre></div>
</div>
<p>If this is installed as the system config file, it will affect all processing of
any Python module distribution by any user on the current system.  If it is
installed as your personal config file (on systems that support them), it will
affect only module distributions processed by you.  And if it is used as the
<code class="file docutils literal notranslate"><span class="pre">setup.cfg</span></code> for a particular module distribution, it affects only that
distribution.</p>
<p>You could override the default “build base” directory and make the
<strong class="command">build*</strong> commands always forcibly rebuild all files with the
following:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[build]</span><span class="w"></span>
<span class="na">build-base</span><span class="o">=</span><span class="s">blib</span><span class="w"></span>
<span class="na">force</span><span class="o">=</span><span class="s">1</span><span class="w"></span>
</pre></div>
</div>
<p>which corresponds to the command-line arguments</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --build-base=blib --force
</pre></div>
</div>
<p>except that including the <strong class="command">build</strong> command on the command-line means
that command will be run.  Including a particular command in config files has no
such implication; it only means that if the command is run, the options in the
config file will apply.  (Or if other commands that derive values from it are
run, they will use the values in the config file.)</p>
<p>You can find out the complete list of options for any command using the
<code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code> option, e.g.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --help
</pre></div>
</div>
<p>and you can find out the complete list of global options by using
<code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code> without a command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py --help
</pre></div>
</div>
<p>See also the “Reference” section of the “Distributing Python Modules” manual.</p>
</section>
</section>
<section id="building-extensions-tips-and-tricks">
<span id="inst-building-ext"></span><h2>Building Extensions: Tips and Tricks<a class="headerlink" href="#building-extensions-tips-and-tricks" title="Link permanente para este título">¶</a></h2>
<p>Whenever possible, the Distutils try to use the configuration information made
available by the Python interpreter used to run the <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> script.
For example, the same compiler and linker flags used to compile Python will also
be used for compiling extensions.  Usually this will work well, but in
complicated situations this might be inappropriate.  This section discusses how
to override the usual Distutils behaviour.</p>
<section id="tweaking-compiler-linker-flags">
<span id="inst-tweak-flags"></span><h3>Tweaking compiler/linker flags<a class="headerlink" href="#tweaking-compiler-linker-flags" title="Link permanente para este título">¶</a></h3>
<p>Compiling a Python extension written in C or C++ will sometimes require
specifying custom flags for the compiler and linker in order to use a particular
library or produce a special kind of object code. This is especially true if the
extension hasn’t been tested on your platform, or if you’re trying to
cross-compile Python.</p>
<p>In the most general case, the extension author might have foreseen that
compiling the extensions would be complicated, and provided a <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> file
for you to edit.  This will likely only be done if the module distribution
contains many separate extension modules, or if they often require elaborate
sets of compiler flags in order to work.</p>
<p>A <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> file, if present, is parsed in order to get a list of extensions
to build.  Each line in a <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> describes a single module.  Lines have
the following structure:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module ... [sourcefile ...] [cpparg ...] [library ...]
</pre></div>
</div>
<p>Let’s examine each of the fields in turn.</p>
<ul class="simple">
<li><p><em>module</em> is the name of the extension module to be built, and should be a
valid Python identifier.  You can’t just change this in order to rename a module
(edits to the source code would also be needed), so this should be left alone.</p></li>
<li><p><em>sourcefile</em> is anything that’s likely to be a source code file, at least
judging by the filename.  Filenames ending in <code class="file docutils literal notranslate"><span class="pre">.c</span></code> are assumed to be
written in C, filenames ending in <code class="file docutils literal notranslate"><span class="pre">.C</span></code>, <code class="file docutils literal notranslate"><span class="pre">.cc</span></code>, and <code class="file docutils literal notranslate"><span class="pre">.c++</span></code> are
assumed to be C++, and filenames ending in <code class="file docutils literal notranslate"><span class="pre">.m</span></code> or <code class="file docutils literal notranslate"><span class="pre">.mm</span></code> are assumed
to be in Objective C.</p></li>
<li><p><em>cpparg</em> is an argument for the C preprocessor,  and is anything starting with
<code class="xref std std-option docutils literal notranslate"><span class="pre">-I</span></code>, <code class="xref std std-option docutils literal notranslate"><span class="pre">-D</span></code>, <code class="xref std std-option docutils literal notranslate"><span class="pre">-U</span></code> or <code class="xref std std-option docutils literal notranslate"><span class="pre">-C</span></code>.</p></li>
<li><p><em>library</em> is anything ending in <code class="file docutils literal notranslate"><span class="pre">.a</span></code> or beginning with <code class="xref std std-option docutils literal notranslate"><span class="pre">-l</span></code> or
<code class="xref std std-option docutils literal notranslate"><span class="pre">-L</span></code>.</p></li>
</ul>
<p>If a particular platform requires a special library on your platform, you can
add it by editing the <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> file and running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">build</span></code>.
For example, if the module defined by the line</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>foo foomodule.c
</pre></div>
</div>
<p>must be linked with the math library <code class="file docutils literal notranslate"><span class="pre">libm.a</span></code> on your platform, simply add
<code class="xref std std-option docutils literal notranslate"><span class="pre">-lm</span></code> to the line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>foo foomodule.c -lm
</pre></div>
</div>
<p>Arbitrary switches intended for the compiler or the linker can be supplied with
the <code class="xref std std-option docutils literal notranslate"><span class="pre">-Xcompiler</span></code> <em>arg</em> and <code class="xref std std-option docutils literal notranslate"><span class="pre">-Xlinker</span></code> <em>arg</em> options:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>foo foomodule.c -Xcompiler -o32 -Xlinker -shared -lm
</pre></div>
</div>
<p>The next option after <code class="xref std std-option docutils literal notranslate"><span class="pre">-Xcompiler</span></code> and <code class="xref std std-option docutils literal notranslate"><span class="pre">-Xlinker</span></code> will be
appended to the proper command line, so in the above example the compiler will
be passed the <code class="xref std std-option docutils literal notranslate"><span class="pre">-o32</span></code> option, and the linker will be passed
<code class="xref std std-option docutils literal notranslate"><span class="pre">-shared</span></code>.  If a compiler option requires an argument, you’ll have to
supply multiple <code class="xref std std-option docutils literal notranslate"><span class="pre">-Xcompiler</span></code> options; for example, to pass <code class="docutils literal notranslate"><span class="pre">-x</span> <span class="pre">c++</span></code>
the <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> file would have to contain <code class="docutils literal notranslate"><span class="pre">-Xcompiler</span> <span class="pre">-x</span> <span class="pre">-Xcompiler</span> <span class="pre">c++</span></code>.</p>
<p>Compiler flags can also be supplied through setting the <span class="target" id="index-9"></span><a class="reference internal" href="../using/configure.html#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a>
environment variable.  If set, the contents of <span class="target" id="index-10"></span><a class="reference internal" href="../using/configure.html#envvar-CFLAGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CFLAGS</span></code></a> will be added to
the compiler flags specified in the  <code class="file docutils literal notranslate"><span class="pre">Setup</span></code> file.</p>
</section>
<section id="using-non-microsoft-compilers-on-windows">
<span id="inst-non-ms-compilers"></span><h3>Using non-Microsoft compilers on Windows<a class="headerlink" href="#using-non-microsoft-compilers-on-windows" title="Link permanente para este título">¶</a></h3>
<section id="borland-codegear-c">
<h4>Borland/CodeGear C++<a class="headerlink" href="#borland-codegear-c" title="Link permanente para este título">¶</a></h4>
<p>This subsection describes the necessary steps to use Distutils with the Borland
C++ compiler version 5.5.  First you have to know that Borland’s object file
format (OMF) is different from the format used by the Python version you can
download from the Python or ActiveState web site.  (Python is built with
Microsoft Visual C++, which uses COFF as the object file format.) For this
reason you have to convert Python’s library <code class="file docutils literal notranslate"><span class="pre">python25.lib</span></code> into the
Borland format.  You can do this as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>coff2omf python25.lib python25_bcpp.lib
</pre></div>
</div>
<p>The <code class="file docutils literal notranslate"><span class="pre">coff2omf</span></code> program comes with the Borland compiler.  The file
<code class="file docutils literal notranslate"><span class="pre">python25.lib</span></code> is in the <code class="file docutils literal notranslate"><span class="pre">Libs</span></code> directory of your Python
installation.  If your extension uses other libraries (zlib, …) you have to
convert them too.</p>
<p>The converted files have to reside in the same directories as the normal
libraries.</p>
<p>How does Distutils manage to use these libraries with their changed names?  If
the extension needs a library (eg. <code class="file docutils literal notranslate"><span class="pre">foo</span></code>) Distutils checks first if it
finds a library with suffix <code class="file docutils literal notranslate"><span class="pre">_bcpp</span></code> (eg. <code class="file docutils literal notranslate"><span class="pre">foo_bcpp.lib</span></code>) and then
uses this library.  In the case it doesn’t find such a special library it uses
the default name (<code class="file docutils literal notranslate"><span class="pre">foo.lib</span></code>.) <a class="footnote-reference brackets" href="#id4" id="id1">1</a></p>
<p>To let Distutils compile your extension with Borland C++ you now have to type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --compiler=bcpp
</pre></div>
</div>
<p>If you want to use the Borland C++ compiler as the default, you could specify
this in your personal or system-wide configuration file for Distutils (see
section <a class="reference internal" href="#inst-config-files"><span class="std std-ref">Arquivos de configuração do Distutils</span></a>.)</p>
<div class="admonition seealso">
<p class="admonition-title">Ver também</p>
<dl class="simple">
<dt><a class="reference external" href="https://www.embarcadero.com/products">C++Builder Compiler</a></dt><dd><p>Information about the free C++ compiler from Borland, including links to the
download pages.</p>
</dd>
<dt><a class="reference external" href="http://www.cyberus.ca/~g_will/pyExtenDL.shtml">Creating Python Extensions Using Borland’s Free Compiler</a></dt><dd><p>Document describing how to use Borland’s free command-line C++ compiler to build
Python.</p>
</dd>
</dl>
</div>
</section>
<section id="gnu-c-cygwin-mingw">
<h4>GNU C / Cygwin / MinGW<a class="headerlink" href="#gnu-c-cygwin-mingw" title="Link permanente para este título">¶</a></h4>
<p>This section describes the necessary steps to use Distutils with the GNU C/C++
compilers in their Cygwin and MinGW distributions. <a class="footnote-reference brackets" href="#id5" id="id2">2</a> For a Python interpreter
that was built with Cygwin, everything should work without any of these
following steps.</p>
<p>Not all extensions can be built with MinGW or Cygwin, but many can.  Extensions
most likely to not work are those that use C++ or depend on Microsoft Visual C
extensions.</p>
<p>To let Distutils compile your extension with Cygwin you have to type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --compiler=cygwin
</pre></div>
</div>
<p>and for Cygwin in no-cygwin mode <a class="footnote-reference brackets" href="#id6" id="id3">3</a> or for MinGW type:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python setup.py build --compiler=mingw32
</pre></div>
</div>
<p>If you want to use any of these options/compilers as default, you should
consider writing it in your personal or system-wide configuration file for
Distutils (see section <a class="reference internal" href="#inst-config-files"><span class="std std-ref">Arquivos de configuração do Distutils</span></a>.)</p>
<section id="older-versions-of-python-and-mingw">
<h5>Older Versions of Python and MinGW<a class="headerlink" href="#older-versions-of-python-and-mingw" title="Link permanente para este título">¶</a></h5>
<p>The following instructions only apply if you’re using a version of Python
inferior to 2.4.1 with a MinGW inferior to 3.0.0 (with
binutils-2.13.90-20030111-1).</p>
<p>These compilers require some special libraries.  This task is more complex than
for Borland’s C++, because there is no program to convert the library.  First
you have to create a list of symbols which the Python DLL exports. (You can find
a good program for this task at
<a class="reference external" href="https://sourceforge.net/projects/mingw/files/MinGW/Extension/pexports/">https://sourceforge.net/projects/mingw/files/MinGW/Extension/pexports/</a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pexports python25.dll &gt;python25.def
</pre></div>
</div>
<p>The location of an installed <code class="file docutils literal notranslate"><span class="pre">python25.dll</span></code> will depend on the
installation options and the version and language of Windows.  In a “just for
me” installation, it will appear in the root of the installation directory.  In
a shared installation, it will be located in the system directory.</p>
<p>Then you can create from these information an import library for gcc.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/cygwin/bin/dlltool --dllname python25.dll --def python25.def --output-lib libpython25.a
</pre></div>
</div>
<p>The resulting library has to be placed in the same directory as
<code class="file docutils literal notranslate"><span class="pre">python25.lib</span></code>. (Should be the <code class="file docutils literal notranslate"><span class="pre">libs</span></code> directory under your Python
installation directory.)</p>
<p>If your extension uses other libraries (zlib,…) you might  have to convert
them too. The converted files have to reside in the same directories as the
normal libraries do.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver também</p>
<dl class="simple">
<dt><a class="reference external" href="http://old.zope.org/Members/als/tips/win32_mingw_modules">Building Python modules on MS Windows platform with MinGW</a></dt><dd><p>Information about building the required libraries for the MinGW environment.</p>
</dd>
</dl>
</div>
<p class="rubric">Notas de rodapé</p>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>This also means you could replace all existing COFF-libraries with OMF-libraries
of the same name.</p>
</dd>
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Check <a class="reference external" href="https://www.sourceware.org/cygwin/">https://www.sourceware.org/cygwin/</a> for more information</p>
</dd>
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>Then you have no POSIX emulation available, but you also don’t need
<code class="file docutils literal notranslate"><span class="pre">cygwin1.dll</span></code>.</p>
</dd>
</dl>
</section>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">Instalando módulos Python (versão legada)</a><ul>
<li><a class="reference internal" href="#introduction">Introdução</a><ul>
<li><a class="reference internal" href="#distutils-based-source-distributions">Distribuições de fonte baseadas em Distutils</a></li>
</ul>
</li>
<li><a class="reference internal" href="#standard-build-and-install">Construção e instalação padrão</a><ul>
<li><a class="reference internal" href="#platform-variations">Variações de plataforma</a></li>
<li><a class="reference internal" href="#splitting-the-job-up">Dividindo o trabalho</a></li>
<li><a class="reference internal" href="#how-building-works">Como a construção funciona</a></li>
<li><a class="reference internal" href="#how-installation-works">Como a instalação funciona</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternate-installation">Instalação alternativa</a><ul>
<li><a class="reference internal" href="#alternate-installation-the-user-scheme">Instalação alternativa: o esquema usuário</a></li>
<li><a class="reference internal" href="#alternate-installation-the-home-scheme">Instalação alternativa: o esquema home</a></li>
<li><a class="reference internal" href="#alternate-installation-unix-the-prefix-scheme">Instalação alternativa: Unix (o esquema prefixo)</a></li>
<li><a class="reference internal" href="#alternate-installation-windows-the-prefix-scheme">Instalação alternativa: Windows (o esquema prefixo)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-installation">Instalação personalizada</a><ul>
<li><a class="reference internal" href="#modifying-python-s-search-path">Modificando o caminho de pesquisa do Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#distutils-configuration-files">Arquivos de configuração do Distutils</a><ul>
<li><a class="reference internal" href="#location-and-names-of-config-files">Localização e nomes dos arquivos de configuração</a></li>
<li><a class="reference internal" href="#syntax-of-config-files">Sintaxe dos arquivos de configuração</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-extensions-tips-and-tricks">Building Extensions: Tips and Tricks</a><ul>
<li><a class="reference internal" href="#tweaking-compiler-linker-flags">Tweaking compiler/linker flags</a></li>
<li><a class="reference internal" href="#using-non-microsoft-compilers-on-windows">Using non-Microsoft compilers on Windows</a><ul>
<li><a class="reference internal" href="#borland-codegear-c">Borland/CodeGear C++</a></li>
<li><a class="reference internal" href="#gnu-c-cygwin-mingw">GNU C / Cygwin / MinGW</a><ul>
<li><a class="reference internal" href="#older-versions-of-python-and-mingw">Older Versions of Python and MinGW</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="../distutils/apiref.html"
                        title="capítulo anterior"><span class="section-number">9. </span>Referência da API</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/install/index.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="../distutils/apiref.html" title="9. Referência da API"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

        <li class="nav-item nav-item-this"><a href="">Instalando módulos Python (versão legada)</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Direitos autorais</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Última atualização em jun. 04, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>