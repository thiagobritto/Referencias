
<!DOCTYPE html>

<html lang="pt_BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>O que há de novo no Python 3.9 &#8212; documentação Python 3.10.4</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Pesquisar dentro de documentação Python 3.10.4"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre esses documentos" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="copyright" title="Direitos autorais" href="../copyright.html" />
    <link rel="next" title="O que há de novo no Python 3.8" href="3.8.html" />
    <link rel="prev" title="O que há de novo no Python 3.10" href="3.10.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.9.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Busca rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Você deve verificar DeprecationWarning no seu código</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Operadores de mesclagem &amp; atualização de dicionário</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Novos métodos de strings para remover prefixos e sufixos</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Type hinting genéricos nas coleções padrão</a></li>
<li><a class="reference internal" href="#new-parser">Novo analisador sintático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a><ul>
<li><a class="reference internal" href="#zoneinfo">zoneinfo</a></li>
<li><a class="reference internal" href="#graphlib">graphlib</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#compileall">compileall</a></li>
<li><a class="reference internal" href="#concurrent-futures">concurrent.futures</a></li>
<li><a class="reference internal" href="#curses">curses</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#distutils">distutils</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#ftplib">ftplib</a></li>
<li><a class="reference internal" href="#gc">gc</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#ipaddress">ipaddress</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#nntplib">nntplib</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#pydoc">pydoc</a></li>
<li><a class="reference internal" href="#random">random</a></li>
<li><a class="reference internal" href="#signal">signal</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tracemalloc">tracemalloc</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#removed">Removidos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portando para Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Alterações na API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Alterações na API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Alterações de compilação</a></li>
<li><a class="reference internal" href="#c-api-changes">Alterações na API C</a><ul>
<li><a class="reference internal" href="#id1">Novas funcionalidades</a></li>
<li><a class="reference internal" href="#id2">Portando para Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Alterações notáveis no Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4">typing</a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Suporte a macOS 11.0 (Big Sur) e Apple Silicon Mac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Alterações notáveis no Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc">collections.abc</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="3.10.html"
                        title="capítulo anterior">O que há de novo no Python 3.10</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="3.8.html"
                        title="próximo capítulo">O que há de novo no Python 3.8</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/3.9.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="O que há de novo no Python 3.8"
             accesskey="N">próximo</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="O que há de novo no Python 3.10"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-9">
<h1>O que há de novo no Python 3.9<a class="headerlink" href="#what-s-new-in-python-3-9" title="Link permanente para este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Versão</dt>
<dd class="field-odd"><p>3.10.4</p>
</dd>
<dt class="field-even">Data</dt>
<dd class="field-even"><p>junho 04, 2022</p>
</dd>
<dt class="field-odd">Editor</dt>
<dd class="field-odd"><p>Łukasz Langa</p>
</dd>
</dl>
<p>This article explains the new features in Python 3.9, compared to 3.8.
Python 3.9 was released on October 5, 2020.</p>
<p>Para detalhes completos, veja o <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver também</p>
<p><span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0596"><strong>PEP 596</strong></a> - Python 3.9 Release Schedule</p>
</div>
<section id="summary-release-highlights">
<h2>Resumo – Destaques da versão<a class="headerlink" href="#summary-release-highlights" title="Link permanente para este título">¶</a></h2>
<p>Novos recursos de sintaxe:</p>
<ul class="simple">
<li><p><span class="target" id="index-54"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0584"><strong>PEP 584</strong></a>, operadores de união adicionados ao <code class="docutils literal notranslate"><span class="pre">dict</span></code>;</p></li>
<li><p><span class="target" id="index-55"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0585"><strong>PEP 585</strong></a>, type hinting genéricos em coleções comuns;</p></li>
<li><p><span class="target" id="index-56"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0614"><strong>PEP 614</strong></a>, restrições de gramática relaxadas em decoradores.</p></li>
</ul>
<p>Novos recursos embutidos:</p>
<ul class="simple">
<li><p><span class="target" id="index-57"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0616"><strong>PEP 616</strong></a>, métodos de strings para remover prefixos e sufixos.</p></li>
</ul>
<p>Novos recursos na biblioteca padrão:</p>
<ul class="simple">
<li><p><span class="target" id="index-58"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0593"><strong>PEP 593</strong></a>, anotações flexíveis de função e variável;</p></li>
<li><p><a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> adicionada para permitidos gerenciamento de processo sem corridas e sinais.</p></li>
</ul>
<p>Melhorias no interpretador:</p>
<ul class="simple">
<li><p><span class="target" id="index-59"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0573"><strong>PEP 573</strong></a>, acesso rápido ao estado do módulo a partir de métodos de tipos de extensão C;</p></li>
<li><p><span class="target" id="index-60"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0617"><strong>PEP 617</strong></a>, CPython agora usa um novo analisador sintático com base em GASE;</p></li>
<li><p>vários tipos embutidos do Python (range, tuple, set, frozenset, list, dict) estão agora mais rápidos usando vectorcall da <span class="target" id="index-61"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0590"><strong>PEP 590</strong></a>;</p></li>
<li><p>coleta de lixo não causa bloqueio em objetos ressuscitados;</p></li>
<li><p>vários módulos do Python (<code class="xref py py-mod docutils literal notranslate"><span class="pre">_abc</span></code>, <a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_bz2</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_codecs</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_contextvars</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_crypt</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_functools</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_json</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_locale</span></code>, <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a>, <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>, <a class="reference internal" href="../library/resource.html#module-resource" title="resource: An interface to provide resource usage information on the current process. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">resource</span></code></a>, <a class="reference internal" href="../library/time.html#module-time" title="time: Time access and conversions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_weakref</span></code>) agora usam inicialização multifásica conforme definido pela PEP 489;</p></li>
<li><p>vários módulos da biblioteca padrão (<a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>, <a class="reference internal" href="../library/grp.html#module-grp" title="grp: The group database (getgrnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grp</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_hashlib</span></code>, <a class="reference internal" href="../library/pwd.html#module-pwd" title="pwd: The password database (getpwnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pwd</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_posixsubprocess</span></code>, <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a>, <a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a>, <a class="reference internal" href="../library/struct.html#module-struct" title="struct: Interpret bytes as packed binary data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a>, <a class="reference internal" href="../library/termios.html#module-termios" title="termios: POSIX style tty control. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">termios</span></code></a>, <a class="reference internal" href="../library/zlib.html#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code></a>) estão agora usando a ABI estável definida pela PEP 384.</p></li>
</ul>
<p>Novos módulos de biblioteca:</p>
<ul class="simple">
<li><p><span class="target" id="index-62"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0615"><strong>PEP 615</strong></a>, o banco de dados de fusos horários da IANA é agora apresentado na biblioteca padrão no módulo <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a>;</p></li>
<li><p>uma implementação de um tipo topológico de um grafo agora é fornecida no novo módulo <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>.</p></li>
</ul>
<p>Alterações no processo de lançamento:</p>
<ul class="simple">
<li><p><span class="target" id="index-63"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0602"><strong>PEP 602</strong></a>, CPython adota um ciclo de lançamento anual.</p></li>
</ul>
</section>
<section id="you-should-check-for-deprecationwarning-in-your-code">
<h2>Você deve verificar DeprecationWarning no seu código<a class="headerlink" href="#you-should-check-for-deprecationwarning-in-your-code" title="Link permanente para este título">¶</a></h2>
<p>Quando o Python 2.7 ainda tinha suporte, muitas funcionalidades do Python 3 foram mantidas para compatibilidade com versões anteriores do Python 2.7. Com o fim do suporte ao Python 2, essas camadas de compatibilidade com versões anteriores foram removidas ou serão removidas em breve. A maioria deles emitia um aviso de <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> por vários anos. Por exemplo, usar <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> em vez de <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code> emite uma <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> desde Python 3.3, lançado em 2012.</p>
<p>Teste sua aplicação com a opção de linha de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">default</span></code> para ver <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> e <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>, ou mesmo com <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">error</span></code> para tratá-los como erros. <a class="reference internal" href="../library/warnings.html#warning-filter"><span class="std std-ref">Filtro de avisos</span></a> pode ser usado para ignorar avisos de código de terceiros.</p>
<p>Python 3.9 é a última versão que fornece essas camadas de compatibilidade com versões anteriores do Python 2, para dar mais tempo aos mantenedores de projetos Python para organizar a remoção do suporte Python 2 e adicionar suporte para Python 3.9.</p>
<p>Aliases para <a class="reference internal" href="../library/collections.abc.html#collections-abstract-base-classes"><span class="std std-ref">classes bases abstratas</span></a> no módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>, como o alias <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> para <a class="reference internal" href="../library/collections.abc.html#collections.abc.Mapping" title="collections.abc.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a>, são mantidos para uma última versão para compatibilidade reversa. Eles serão removidos do Python 3.10.</p>
<p>De maneira mais geral, experimente executar seus testes no <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Modo de Desenvolvimento do Python</span></a>, que ajuda a preparar seu código para torná-lo compatível com a próxima versão do Python.</p>
<p>Observação: vários itens descontinuados pré-existentes também foram removidos nesta versão do Python. Consulte a seção <a class="reference internal" href="#removed-in-python-39"><span class="std std-ref">Removidos</span></a>.</p>
</section>
<section id="new-features">
<h2>Novas funcionalidades<a class="headerlink" href="#new-features" title="Link permanente para este título">¶</a></h2>
<section id="dictionary-merge-update-operators">
<h3>Operadores de mesclagem &amp; atualização de dicionário<a class="headerlink" href="#dictionary-merge-update-operators" title="Link permanente para este título">¶</a></h3>
<p>Operadores de mesclagem (<code class="docutils literal notranslate"><span class="pre">|</span></code>) e atualização (<code class="docutils literal notranslate"><span class="pre">|=</span></code>) foram adicionados à classe embutida <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. Eles complementam o métodos <code class="docutils literal notranslate"><span class="pre">dict.update</span></code> e <code class="docutils literal notranslate"><span class="pre">{**d1,</span> <span class="pre">**d2}</span></code> existentes de mesclagem de dicionários.</p>
<p>Exemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1 from x&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from x&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from y&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="s2">&quot;value3 from y&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">|</span> <span class="n">y</span>
<span class="go">{&#39;key1&#39;: &#39;value1 from x&#39;, &#39;key2&#39;: &#39;value2 from y&#39;, &#39;key3&#39;: &#39;value3 from y&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">|</span> <span class="n">x</span>
<span class="go">{&#39;key2&#39;: &#39;value2 from x&#39;, &#39;key3&#39;: &#39;value3 from y&#39;, &#39;key1&#39;: &#39;value1 from x&#39;}</span>
</pre></div>
</div>
<p>Veja <span class="target" id="index-64"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0584"><strong>PEP 584</strong></a> para uma descrição completa. (Contribuição de Brandt Bucher em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36144">bpo-36144</a>.)</p>
</section>
<section id="new-string-methods-to-remove-prefixes-and-suffixes">
<h3>Novos métodos de strings para remover prefixos e sufixos<a class="headerlink" href="#new-string-methods-to-remove-prefixes-and-suffixes" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/stdtypes.html#str.removeprefix" title="str.removeprefix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removeprefix(prefix)</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#str.removesuffix" title="str.removesuffix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removesuffix(suffix)</span></code></a> foram adicionados para remover facilmente um prefixo ou sufixo desnecessário de uma string. Os métodos correspondentes <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> e <code class="docutils literal notranslate"><span class="pre">collections.UserString</span></code> também foram adicionados. Veja <span class="target" id="index-65"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0616"><strong>PEP 616</strong></a> para uma descrição completa. (Contribuição de Dennis Sweeney em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39939">bpo-39939</a>.)</p>
</section>
<section id="type-hinting-generics-in-standard-collections">
<h3>Type hinting genéricos nas coleções padrão<a class="headerlink" href="#type-hinting-generics-in-standard-collections" title="Link permanente para este título">¶</a></h3>
<p>Agora, nas anotações de tipo, você pode usar tipos de coleção embutidos como <code class="docutils literal notranslate"><span class="pre">list</span></code> e <code class="docutils literal notranslate"><span class="pre">dict</span></code> como tipos genéricos, em vez de importar os tipos de letras maiúsculas correspondentes (por exemplo, <code class="docutils literal notranslate"><span class="pre">List</span></code> ou <code class="docutils literal notranslate"><span class="pre">Dict</span></code>) de <code class="docutils literal notranslate"><span class="pre">typing</span></code>. Agora, outros tipos na biblioteca padrão também são genéricos, por exemplo, <code class="docutils literal notranslate"><span class="pre">queue.Queue</span></code>.</p>
<p>Exemplo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greet_all</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Consulte <span class="target" id="index-66"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0585"><strong>PEP 585</strong></a> para mais detalhes. (Contribuição de Guido van Rossum, Ethan Smith e Batuhan Taşkaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39481">bpo-39481</a>.)</p>
</section>
<section id="new-parser">
<h3>Novo analisador sintático<a class="headerlink" href="#new-parser" title="Link permanente para este título">¶</a></h3>
<p>O Python 3.9 usa um novo analisador, baseado em <a class="reference external" href="https://pt.wikipedia.org/wiki/Gram%C3%A1tica_de_an%C3%A1lise_sint%C3%A1tica_de_express%C3%A3o">GASE</a> em vez de <a class="reference external" href="https://pt.wikipedia.org/wiki/Analisador_sint%C3%A1tico_LL">LL(1)</a>. O desempenho do novo analisador é aproximadamente comparável ao do analisador antigo, mas o formalismo do GASE é mais flexível que do LL(1) quando se trata de projetar novos recursos de linguagem. Começaremos a usar essa flexibilidade no Python 3.10 e posterior.</p>
<p>O módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> usa o novo analisador e produz o mesmo AST que o analisador antigo.</p>
<p>No Python 3.10, o analisador antigo será excluído e todas as funcionalidades que dependem dele (principalmente o módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code>, que foi descontinuado a muito tempo). No Python 3.9 <em>apenas</em>, você pode voltar ao analisador LL(1) usando uma opção de linha de comando (<code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">oldparser</span></code>) ou uma variável de ambiente (<code class="docutils literal notranslate"><span class="pre">PYTHONOLDPARSER=1</span></code>).</p>
<p>Consulte <span class="target" id="index-67"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0617"><strong>PEP 617</strong></a> para mais detalhes. (Contribuição de Guido van Rossum, Pablo Galindo e Lysandros Nikolaou em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40334">bpo-40334</a>.)</p>
</section>
</section>
<section id="other-language-changes">
<h2>Outras mudanças na linguagem<a class="headerlink" href="#other-language-changes" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> agora levanta <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> em vez de <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>, o que é usado para ocorrer quando uma importação relativa passou de seu um pacote de nível superior. (Contribuição de Ngalim Siregar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>.)</p></li>
<li><p>Agora, o Python obtém o caminho absoluto do nome do arquivo do script especificado na linha de comando (p.ex., <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">script.py</span></code>): o atributo <code class="docutils literal notranslate"><span class="pre">__file__</span></code> do módulo <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> tornou-se um caminho absoluto, não um caminho relativo. Esses caminhos agora permanecem válidos depois que o diretório atual é alterado por <a class="reference internal" href="../library/os.html#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.chdir()</span></code></a>. Como efeito colateral, o traceback também exibe o caminho absoluto para quadros de módulos de <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> neste caso. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20443">bpo-20443</a>.)</p></li>
<li><p>No <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Modo de Desenvolvimento do Python</span></a> e na <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">compilação de depuração</span></a> , os argumentos <em>encoding</em> e <em>errors</em> agora são verificados quanto às operações de codificação e decodificação de strings. Exemplos: <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a>.</p>
<p>Por padrão, para obter o melhor desempenho, o argumento <em>errors</em> é verificado apenas no primeiro erro de codificação/decodificação, e o argumento <em>encoding</em> às vezes é ignorado para strings vazias. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37388">bpo-37388</a>.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s,</span> <span class="pre">n)</span></code> agora retorna <code class="docutils literal notranslate"><span class="pre">s</span></code> em vez de uma string vazia para todos <code class="docutils literal notranslate"><span class="pre">n</span></code> não zero. Isso é agora consistente com <code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s)</span></code>. Há alterações similares para objetos <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28029">bpo-28029</a>.)</p></li>
<li><p>Qualquer expressão válida agora pode ser usada como <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorador</span></a>. Anteriormente, a gramática era muito mais restritiva. Veja <span class="target" id="index-68"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0614"><strong>PEP 614</strong></a> para detalhes. (Contribuição de Brandt Bucher em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39702">bpo-39702</a>.)</p></li>
<li><p>Aprimorada a ajuda para o módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">digitando</span></code>. Agora, as linhas de documento são mostradas para todos os formulários especiais e aliases genéricos especiais (como <code class="docutils literal notranslate"><span class="pre">Union</span></code> e <code class="docutils literal notranslate"><span class="pre">List</span></code>). Usando <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> com alias genérico como <code class="docutils literal notranslate"><span class="pre">List[int]</span></code> mostrará a ajuda para o tipo concreto correspondente (neste caso, <code class="docutils literal notranslate"><span class="pre">list</span></code>). (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>.)</p></li>
<li><p>A execução paralela de <a class="reference internal" href="../reference/expressions.html#agen.aclose" title="agen.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclose()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.asend" title="agen.asend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asend()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.athrow" title="agen.athrow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">athrow()</span></code></a> é agora proibida e <code class="docutils literal notranslate"><span class="pre">ag_running</span></code> agora reflete o status atual de execução do gerador async. (Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30773">bpo-30773</a>.)</p></li>
<li><p>Erros inesperados ao chamar o método <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> não são mais mascarados por <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> no operador <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a> e nas funções <a class="reference internal" href="../library/operator.html#operator.contains" title="operator.contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">contains()</span></code></a>, <a class="reference internal" href="../library/operator.html#operator.indexOf" title="operator.indexOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexOf()</span></code></a> e <a class="reference internal" href="../library/operator.html#operator.countOf" title="operator.countOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">countOf()</span></code></a> do módulo <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40824">bpo-40824</a>.)</p></li>
<li><p>Expressões lambda sem parênteses não podem mais ser a parte da expressão em uma cláusula <code class="docutils literal notranslate"><span class="pre">if</span></code> em compreensões e expressões geradoras. Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41848">bpo-41848</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43755">bpo-43755</a> para detalhes.</p></li>
</ul>
</section>
<section id="new-modules">
<h2>Novos módulos<a class="headerlink" href="#new-modules" title="Link permanente para este título">¶</a></h2>
<section id="zoneinfo">
<h3>zoneinfo<a class="headerlink" href="#zoneinfo" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> oferece suporte ao banco de dados de fuso horário da IANA para a biblioteca padrão. Ele adiciona <a class="reference internal" href="../library/zoneinfo.html#zoneinfo.ZoneInfo" title="zoneinfo.ZoneInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoneinfo.ZoneInfo</span></code></a>, uma implementação concreta <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></a>, apoiada pelos dados do fuso horário do sistema.</p>
<p>Exemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zoneinfo</span> <span class="kn">import</span> <span class="n">ZoneInfo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Daylight saving time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s2">&quot;America/Los_Angeles&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-10-31 12:00:00-07:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">()</span>
<span class="go">&#39;PDT&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Standard time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-11-07 12:00:00-08:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>
<span class="go">PST</span>
</pre></div>
</div>
<p>Como fonte alternativa de dados para plataformas que não entregam o banco de dados da IANA, o módulo <a class="reference external" href="https://pypi.org/project/tzdata/"><code class="docutils literal notranslate"><span class="pre">tzdata</span></code></a> foi lançado como um pacote inicial – distribuído via PyPI e mantido pela equipe principal do CPython.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver também</p>
<dl class="simple">
<dt><span class="target" id="index-69"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0615"><strong>PEP 615</strong></a> – Suporte ao banco de dados de fuso horário da IANA na biblioteca padrão</dt><dd><p>PEP escrita e implementada por Paul Ganssle</p>
</dd>
</dl>
</div>
</section>
<section id="graphlib">
<h3>graphlib<a class="headerlink" href="#graphlib" title="Link permanente para este título">¶</a></h3>
<p>Um novo módulo, <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>, foi adicionado contendo a classe <a class="reference internal" href="../library/graphlib.html#graphlib.TopologicalSorter" title="graphlib.TopologicalSorter"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphlib.TopologicalSorter</span></code></a> para oferecer funcionalidade de realizar classificação topológica de grafos. (Contribuição de Pablo Galindo, Tim Peters e Larry Hastings em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17005">bpo-17005</a>.)</p>
</section>
</section>
<section id="improved-modules">
<h2>Módulos melhorados<a class="headerlink" href="#improved-modules" title="Link permanente para este título">¶</a></h2>
<section id="ast">
<h3>ast<a class="headerlink" href="#ast" title="Link permanente para este título">¶</a></h3>
<p>Adicionada a opção <em>indent</em> a <a class="reference internal" href="../library/ast.html#ast.dump" title="ast.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a>, que permite produzir uma saída indentada com várias linhas. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37995">bpo-37995</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/ast.html#ast.unparse" title="ast.unparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.unparse()</span></code></a> como uma função no módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> que pode ser usado para remover um objeto <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> e produzir uma string com código que produziria um objeto <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> equivalente quando analisado. (Contribuição de Pablo Galindo e Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38870">bpo-38870</a>.)</p>
<p>Adicionadas docstrings aos nós AST que contêm a assinatura ASDL usada para construir esse nó. (Contribuição de Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39638">bpo-39638</a>.)</p>
</section>
<section id="asyncio">
<h3>asyncio<a class="headerlink" href="#asyncio" title="Link permanente para este título">¶</a></h3>
<p>Devido a significativas preocupações de segurança, o parâmetro <em>reuse_address</em> de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a> não é mais suportado. Isso ocorre devido ao comportamento da opção de soquete <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> no UDP. Para mais detalhes, consulte a documentação de <code class="docutils literal notranslate"><span class="pre">loop.create_datagram_endpoint()</span></code>. (Contribuição de Kyle Stanley, Antoine Pitrou e Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37228">bpo-37228</a>.)</p>
<p>Adicionada uma nova <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">corrotina</span></a> <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shutdown_default_executor()</span></code></a> que agenda um desligamento para o executor padrão que espera na <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> para concluir o fechamento. Além disso, <a class="reference internal" href="../library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> foi atualizada para usar o novo <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">corrotina</span></a>. (Contribuição de Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/asyncio-policy.html#asyncio.PidfdChildWatcher" title="asyncio.PidfdChildWatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.PidfdChildWatcher</span></code></a>, uma implementação de monitorador de filhos específica do Linux que controla descritores de arquivo de processo. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>)</p>
<p>Adicionada uma nova <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">corrotina</span></a> <a class="reference internal" href="../library/asyncio-task.html#asyncio.to_thread" title="asyncio.to_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.to_thread()</span></code></a>. É usada principalmente para executar funções vinculadas à E/S em uma thread separada para evitar o bloqueio do loop de eventos e funciona essencialmente como uma versão de alto nível de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.run_in_executor" title="asyncio.loop.run_in_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_executor()</span></code></a> que pode receber argumentos nomeados diretamente. (Contribuição de Kyle Stanley e Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32309">bpo-32309</a>.)</p>
<p>Ao cancelar a tarefa devido a um tempo limite, <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a> irá agora esperar até que o cancelamento seja concluído também no caso quando <em>timeout</em> é &lt;= 0, como acontece com tempos limite positivos. (Contribuição de Elvis Pranskevichus em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32751">bpo-32751</a>.)</p>
<p><a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> agora levanta <code class="xref py py-exc docutils literal notranslate"><span class="pre">TyperError</span></code> ao chamar métodos incompatíveis com um soquete <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLSocket</span></code></a>. (Contribuição de Ido Michael em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37404">bpo-37404</a>.)</p>
</section>
<section id="compileall">
<h3>compileall<a class="headerlink" href="#compileall" title="Link permanente para este título">¶</a></h3>
<p>Adicionada nova possibilidade de usar hardlinks para arquivos <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> duplicados: parâmetro <em>hardlink_dupes</em> e opção de linha de comando –hardlink-dupes. (Contribuição de Lumír ‘Frenzy’ Balhar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40495">bpo-40495</a>.)</p>
<p>Adicionadas novas opções para manipulação de caminho nos arquivos <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> resultantes: parâmetros <em>stripdir</em>, <em>prependdir</em>, <em>limit_sl_dest</em> e opções de linha de comando -s, -p, -e. Foi adicionada a possibilidade de especificar a opção para um nível de otimização várias vezes. (Contribuição de Lumír ‘Frenzy’ Balhar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38112">bpo-38112</a>.)</p>
</section>
<section id="concurrent-futures">
<h3>concurrent.futures<a class="headerlink" href="#concurrent-futures" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um novo parâmetro <em>cancel_futures</em> em <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.shutdown" title="concurrent.futures.Executor.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concurrent.futures.Executor.shutdown()</span></code></a> que cancela todos os futuros pendentes que ainda não começaram a ser executados, em vez de esperar que eles sejam concluídos antes de desligar o executor. (Contribuição de Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39349">bpo-39349</a>.)</p>
<p>Removidos as threads do daemon de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> e <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a>. Isso melhora a compatibilidade com subinterpretadores e a previsibilidade em seus processos de desligamento. (Contribuição de Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39812">bpo-39812</a>.)</p>
<p>Workers em <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a> agora são gerados sob demanda, apenas quando não há workers ociosos disponíveis para reutilização. Isso otimiza a sobrecarga da inicialização e reduz a quantidade de tempo perdido da CPU para os workers ociosos. (Contribuição de Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39207">bpo-39207</a>.)</p>
</section>
<section id="curses">
<h3>curses<a class="headerlink" href="#curses" title="Link permanente para este título">¶</a></h3>
<p>Adicionadas as funções <a class="reference internal" href="../library/curses.html#curses.get_escdelay" title="curses.get_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.set_escdelay" title="curses.set_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.get_tabsize" title="curses.get_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_tabsize()</span></code></a> e <a class="reference internal" href="../library/curses.html#curses.set_tabsize" title="curses.set_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_tabsize()</span></code></a>. (Contribuição de Anthony Sottile em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38312">bpo-38312</a>.)</p>
</section>
<section id="datetime">
<h3>datetime<a class="headerlink" href="#datetime" title="Link permanente para este título">¶</a></h3>
<p>Os métodos <a class="reference internal" href="../library/datetime.html#datetime.date.isocalendar" title="datetime.date.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> de <a class="reference internal" href="../library/datetime.html#datetime.date" title="datetime.date"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a> e <a class="reference internal" href="../library/datetime.html#datetime.datetime.isocalendar" title="datetime.datetime.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> de <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> agora retornam uma <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">namedtuple()</span></code></a> em vez de uma <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24416">bpo-24416</a>.)</p>
</section>
<section id="distutils">
<h3>distutils<a class="headerlink" href="#distutils" title="Link permanente para este título">¶</a></h3>
<p>O comando <strong class="command">upload</strong> agora cria digests de hash SHA2-256 e Blake2b-256. Ele pula o MD5 em plataformas que bloqueiam digest do MD5. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40698">bpo-40698</a>.)</p>
</section>
<section id="fcntl">
<h3>fcntl<a class="headerlink" href="#fcntl" title="Link permanente para este título">¶</a></h3>
<p>Adicionadas as constantes <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_GETLK</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_SETLK</span></code> e <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_SETLKW</span></code>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38602">bpo-38602</a>.)</p>
</section>
<section id="ftplib">
<h3>ftplib<a class="headerlink" href="#ftplib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> e <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> agora levantam a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> se o tempo limite especificado para o construtor for zero para impedir a criação de um soquete não-bloqueante. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="gc">
<h3>gc<a class="headerlink" href="#gc" title="Link permanente para este título">¶</a></h3>
<p>Quando o coletor de lixo faz uma coleção na qual alguns objetos ressuscitam (são alcançáveis fora dos ciclos isolados após a execução dos finalizadores), não bloqueia a coleção de todos os objetos que ainda estão inacessíveis. (Contribuição de Pablo Galindo e Tim Peters em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38379">bpo-38379</a>.)</p>
<p>Adicionada uma nova função <a class="reference internal" href="../library/gc.html#gc.is_finalized" title="gc.is_finalized"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.is_finalized()</span></code></a> para verificar se um objeto foi finalizado pelo coletor de lixo. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39322">bpo-39322</a>.)</p>
</section>
<section id="hashlib">
<h3>hashlib<a class="headerlink" href="#hashlib" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> pode agora usar hashes SHA3 e SHAKE XOF de OpenSSL quando disponível. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37630">bpo-37630</a>.)</p>
<p>Os módulos hash integrados agora podem ser desativados com <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--without-builtin-hashlib-hashes</span></code> ou ativados seletivamente com por exemplo <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-builtin-hashlib-hashes=sha3,blake2</span></code> para forçar o uso da implementação baseada em OpenSSL. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40479">bpo-40479</a>)</p>
</section>
<section id="http">
<h3>http<a class="headerlink" href="#http" title="Link permanente para este título">¶</a></h3>
<p>Códigos de status HTTP <code class="docutils literal notranslate"><span class="pre">103</span> <span class="pre">EARLY_HINTS</span></code>, <code class="docutils literal notranslate"><span class="pre">418</span> <span class="pre">IM_A_TEAPOT</span></code> e <code class="docutils literal notranslate"><span class="pre">425</span> <span class="pre">TOO_EARLY</span></code> foram adicionados a <a class="reference internal" href="../library/http.html#http.HTTPStatus" title="http.HTTPStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.HTTPStatus</span></code></a>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39509">bpo-39509</a> e Ross Rhodes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39507">bpo-39507</a>.)</p>
</section>
<section id="idle-and-idlelib">
<h3>IDLE e idlelib<a class="headerlink" href="#idle-and-idlelib" title="Link permanente para este título">¶</a></h3>
<p>Adicionada a opção para ativar e desativar o piscar do cursor. (Contribuição de Zackery Spytz na <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4603">bpo-4603</a>.)</p>
<p>A tecla Escape agora fecha as janelas de conclusão IDLE. (Contribuição de Johnny Najera em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38944">bpo-38944</a>.)</p>
<p>Adicionada argumentos nomeados à lista de completamento de nome de módulo. (Contribuição de Terry J. Reedy em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37765">bpo-37765</a>.)</p>
<p>New in 3.9 maintenance releases</p>
<p>Make IDLE invoke <a class="reference internal" href="../library/sys.html#sys.excepthook" title="sys.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.excepthook()</span></code></a> (when started without ‘-n’).
User hooks were previously ignored.  (Contributed by Ken Hilton in
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43008">bpo-43008</a>.)</p>
<p>As alterações acima foram portadas para versões de manutenção do 3.8.</p>
<p>Rearrange the settings dialog.  Split the General tab into Windows
and Shell/Ed tabs.  Move help sources, which extend the Help menu, to the
Extensions tab.  Make space for new options and shorten the dialog. The
latter makes the dialog better fit small screens.  (Contributed by Terry Jan
Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40468">bpo-40468</a>.)  Move the indent space setting from the Font tab to
the new Windows tab.  (Contributed by Mark Roseman and Terry Jan Reedy in
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33962">bpo-33962</a>.)</p>
<p>Apply syntax highlighting to <cite>.pyi</cite> files. (Contributed by Alex
Waygood and Terry Jan Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45447">bpo-45447</a>.)</p>
</section>
<section id="imaplib">
<h3>imaplib<a class="headerlink" href="#imaplib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4" title="imaplib.IMAP4"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4</span></code></a> e <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> agora possuem o parâmetro opcional <em>timeout</em> para seus construtores. Também, o método <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.open" title="imaplib.IMAP4.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open()</span></code></a> agora possui um parâmetro opcional <em>timeout</em> com esta alteração. Os métodos substituídos de <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> e <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_stream" title="imaplib.IMAP4_stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_stream</span></code></a> foram aplicados nesta alteração. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38615">bpo-38615</a>.)</p>
<p><a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a> foi adicionado. <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a> libera os recursos do servidor associados à caixa de correio selecionada e retorna o servidor ao estado autenticado. Este comando executa as mesmas ações que <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.close" title="imaplib.IMAP4.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.close()</span></code></a>, exceto que nenhuma mensagem é removida permanentemente da caixa de correio selecionada no momento. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40375">bpo-40375</a>.)</p>
</section>
<section id="importlib">
<h3>importlib<a class="headerlink" href="#importlib" title="Link permanente para este título">¶</a></h3>
<p>Para melhorar a consistência com as instruções de importação,  <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> agora levanta <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> em vez de <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para tentativas de importação relativas inválidas. (Contribuição de Ngalim Siregar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>.)</p>
<p>Carregadores de importação que publicam objetos de módulo imutáveis agora podem publicar pacotes imutáveis além de módulos individuais. (Contribuição de Dino Viehland em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39336">bpo-39336</a>.)</p>
<p>Adicionada a função <a class="reference internal" href="../library/importlib.html#importlib.resources.files" title="importlib.resources.files"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.files()</span></code></a> com suporte a subdiretórios nos dados do pacote, correspondendo ao backport na versão 1.5 do <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code>. (Contribuição de Jason R. Coombs em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39791">bpo-39791</a>.)</p>
<p>Renovado <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> de <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> versão 1.6.1.</p>
</section>
<section id="inspect">
<h3>inspect<a class="headerlink" href="#inspect" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/inspect.html#inspect.BoundArguments.arguments" title="inspect.BoundArguments.arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inspect.BoundArguments.arguments</span></code></a> foi alterado de <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> para dict regular. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36350">bpo-36350</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39775">bpo-39775</a>.)</p>
</section>
<section id="ipaddress">
<h3>ipaddress<a class="headerlink" href="#ipaddress" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> agora suporta endereços IPv6 com escopo definido (endereço IPv6 com sufixo <code class="docutils literal notranslate"><span class="pre">%&lt;scope_id&gt;</span></code>).</p>
<p>Os endereços IPv6 com escopo definido podem ser analisados usando <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address" title="ipaddress.IPv6Address"><code class="xref py py-class docutils literal notranslate"><span class="pre">ipaddress.IPv6Address</span></code></a>. Se presente, o ID da zona de escopo está disponível através do atributo <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address.scope_id" title="ipaddress.IPv6Address.scope_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scope_id</span></code></a>. (Contribuição de Oleksandr Pavliuk em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34788">bpo-34788</a>.)</p>
<p>A partir do Python 3.9.5, o módulo <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> não aceita mais zeros à esquerda em strings de endereço IPv4. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p>
</section>
<section id="math">
<h3>math<a class="headerlink" href="#math" title="Link permanente para este título">¶</a></h3>
<p>Expandida a função <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> para manipular vários argumentos. Anteriormente, tinha suporte apenas a dois argumentos. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39648">bpo-39648</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/math.html#math.lcm" title="math.lcm"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.lcm()</span></code></a>: retorna o menor múltiplo comum dos argumentos especificados. (Contribuição de Mark Dickinson, Ananthakrishnan e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39479">bpo-39479</a> e :issue:` 39648`.)</p>
<p>Adicionada <a class="reference internal" href="../library/math.html#math.nextafter" title="math.nextafter"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.nextafter()</span></code></a>: retorna o próximo valor de ponto flutuante após <em>x</em> em direção a <em>y</em>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39288">bpo-39288</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/math.html#math.ulp" title="math.ulp"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.ulp()</span></code></a>: retorna o valor do bit menos significativo de um ponto flutuante. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39310">bpo-39310</a>.)</p>
</section>
<section id="multiprocessing">
<h3>multiprocessing<a class="headerlink" href="#multiprocessing" title="Link permanente para este título">¶</a></h3>
<p>A classe <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue" title="multiprocessing.SimpleQueue"><code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.SimpleQueue</span></code></a> tem um novo método <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue.close" title="multiprocessing.SimpleQueue.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> para fechar explicitamente a fila. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30966">bpo-30966</a>.)</p>
</section>
<section id="nntplib">
<h3>nntplib<a class="headerlink" href="#nntplib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP</span></code></a> e <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP_SSL" title="nntplib.NNTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP_SSL</span></code></a> agora levantam uma exceção <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> se o tempo limite fornecido ao construtor é zero, para prevenir a criação de um socket não-bloqueante. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="os">
<h3>os<a class="headerlink" href="#os" title="Link permanente para este título">¶</a></h3>
<p>Adicionadas as constantes <a class="reference internal" href="../library/os.html#os.CLD_KILLED" title="os.CLD_KILLED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_KILLED</span></code></a> e <a class="reference internal" href="../library/os.html#os.CLD_STOPPED" title="os.CLD_STOPPED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_STOPPED</span></code></a> para <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_code</span></code>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38493">bpo-38493</a>.)</p>
<p>Exposta <a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> específica do Linux (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>) e <a class="reference internal" href="../library/os.html#os.P_PIDFD" title="os.P_PIDFD"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.P_PIDFD</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38713">bpo-38713</a>) para gerenciamento de processos com descritores de arquivo.</p>
<p>A função <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> agora também está disponível no Windows. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39413">bpo-39413</a>.)</p>
<p>As funções <a class="reference internal" href="../library/os.html#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.putenv()</span></code></a> e <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> estão agora sempre disponíveis. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>.)</p>
<p>Adicionada a função <a class="reference internal" href="../library/os.html#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.waitstatus_to_exitcode()</span></code></a>: converte um status de espera em um código de saída. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40094">bpo-40094</a>.)</p>
</section>
<section id="pathlib">
<h3>pathlib<a class="headerlink" href="#pathlib" title="Link permanente para este título">¶</a></h3>
<p>Adicionado <code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.readlink</span> <span class="pre">()</span></code>, que age de maneira semelhante a <a class="reference internal" href="../library/os.html#os.readlink" title="os.readlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readlink()</span></code></a>. (Contribuição de Girts Folkmanis em :issue: <cite>30618</cite>)</p>
</section>
<section id="pdb">
<h3>pdb<a class="headerlink" href="#pdb" title="Link permanente para este título">¶</a></h3>
<p>No Windows, agora <a class="reference internal" href="../library/pdb.html#pdb.Pdb" title="pdb.Pdb"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pdb</span></code></a> tem suporte a <code class="docutils literal notranslate"><span class="pre">~/.pdbrc</span></code>. (Contribuição de Tim Hopper e Dan Lidral-Porter em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20523">bpo-20523</a>.)</p>
</section>
<section id="poplib">
<h3>poplib<a class="headerlink" href="#poplib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/poplib.html#poplib.POP3" title="poplib.POP3"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3</span></code></a> e <a class="reference internal" href="../library/poplib.html#poplib.POP3_SSL" title="poplib.POP3_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3_SSL</span></code></a> agora levantam a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> se o tempo limite especificado para o construtor for zero para impedir a criação de um soquete sem bloqueio. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="pprint">
<h3>pprint<a class="headerlink" href="#pprint" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> agora pode imprimir <a class="reference internal" href="../library/types.html#types.SimpleNamespace" title="types.SimpleNamespace"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.SimpleNamespace</span></code></a>. (Contribuição de Carl Bordum Hansen em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37376">bpo-37376</a>.)</p>
</section>
<section id="pydoc">
<h3>pydoc<a class="headerlink" href="#pydoc" title="Link permanente para este título">¶</a></h3>
<p>A string de documentação agora é mostrada não apenas para classe, função, método etc, mas para qualquer objeto que tenha seu próprio atributo <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>.)</p>
</section>
<section id="random">
<h3>random<a class="headerlink" href="#random" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um novo método <code class="xref py py-attr docutils literal notranslate"><span class="pre">random.Random.randbytes</span></code>: gera bytes aleatórios. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40286">bpo-40286</a>.)</p>
</section>
<section id="signal">
<h3>signal<a class="headerlink" href="#signal" title="Link permanente para este título">¶</a></h3>
<p>Exposta a <a class="reference internal" href="../library/signal.html#signal.pidfd_send_signal" title="signal.pidfd_send_signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.pidfd_send_signal()</span></code></a> específica do Linux para enviar sinais a um processo usando um descritor de arquivo em vez de um pid. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38712">bpo-38712</a>)</p>
</section>
<section id="smtplib">
<h3>smtplib<a class="headerlink" href="#smtplib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/smtplib.html#smtplib.SMTP" title="smtplib.SMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP</span></code></a> e <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP_SSL" title="smtplib.SMTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP_SSL</span></code></a> agora levantam uma <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> se o tempo limite especificado para seu construtor for zero para impedir a criação de um soquete sem bloqueio. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
<p>O construtor de <a class="reference internal" href="../library/smtplib.html#smtplib.LMTP" title="smtplib.LMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">LMTP</span></code></a> agora tem um parâmetro opcional <em>timeout</em>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39329">bpo-39329</a>.)</p>
</section>
<section id="socket">
<h3>socket<a class="headerlink" href="#socket" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> agora exporta a constante <a class="reference internal" href="../library/socket.html#socket.CAN_RAW_JOIN_FILTERS" title="socket.CAN_RAW_JOIN_FILTERS"><code class="xref py py-data docutils literal notranslate"><span class="pre">CAN_RAW_JOIN_FILTERS</span></code></a> no Linux 4.1 e superior. (Contribuição de Stefan Tatschner e Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25780">bpo-25780</a>.)</p>
<p>O módulo socket agora suporta o protocolo <a class="reference internal" href="../library/socket.html#socket.CAN_J1939" title="socket.CAN_J1939"><code class="xref py py-data docutils literal notranslate"><span class="pre">CAN_J1939</span></code></a> nas plataformas que o suportam. (Contribuição de Karl Ding em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40291">bpo-40291</a>.)</p>
<p>O módulo socket agora tem as funções <a class="reference internal" href="../library/socket.html#socket.send_fds" title="socket.send_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.send_fds()</span></code></a> e <a class="reference internal" href="../library/socket.html#socket.recv_fds" title="socket.recv_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.recv_fds()</span></code></a>. (Contribuição de Joannah Nanjekye, Shinya Okano e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28724">bpo-28724</a>.)</p>
</section>
<section id="time">
<h3>time<a class="headerlink" href="#time" title="Link permanente para este título">¶</a></h3>
<p>No AIX, <a class="reference internal" href="../library/time.html#time.thread_time" title="time.thread_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">thread_time()</span></code></a> agora é implementado com <code class="docutils literal notranslate"><span class="pre">thread_cputime()</span></code> que possui resolução de nanossegundos, em vez de <code class="docutils literal notranslate"><span class="pre">clock_gettime(CLOCK_THREAD_CPUTIME_ID)</span></code>, que tem uma resolução de 10 ms. (Contribuição de Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40192">bpo-40192</a>)</p>
</section>
<section id="sys">
<h3>sys<a class="headerlink" href="#sys" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um novo atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a>: nome do diretório da biblioteca específica da plataforma. É usado para construir o caminho da biblioteca padrão e os caminhos dos módulos de extensão instalados. É igual a <code class="docutils literal notranslate"><span class="pre">&quot;lib&quot;</span></code> na maioria das plataformas. No Fedora e SuSE, é igual a <code class="docutils literal notranslate"><span class="pre">&quot;lib64&quot;</span></code> nas plataformas de 64 bits. (Contribuição de Jan Matějek, Matěj Cepl, Charalampos Stratakis e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p>
<p>Anteriormente, <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> era armazenado em buffer quando não interativo. Agora, <code class="docutils literal notranslate"><span class="pre">stderr</span></code> assume como padrão sempre o buffer de linha. (Contribuição de Jendrik Seipp em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=13601">bpo-13601</a>.)</p>
</section>
<section id="tracemalloc">
<h3>tracemalloc<a class="headerlink" href="#tracemalloc" title="Link permanente para este título">¶</a></h3>
<p>Adicionada <a class="reference internal" href="../library/tracemalloc.html#tracemalloc.reset_peak" title="tracemalloc.reset_peak"><code class="xref py py-func docutils literal notranslate"><span class="pre">tracemalloc.reset_peak()</span></code></a> para definir o tamanho do pico dos blocos de memória rastreados para o tamanho atual, para medir o pico de partes específicas do código. (Contribuição de Huon Wilson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40630">bpo-40630</a>.)</p>
</section>
<section id="typing">
<h3>typing<a class="headerlink" href="#typing" title="Link permanente para este título">¶</a></h3>
<p><span class="target" id="index-70"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0593"><strong>PEP 593</strong></a> introduziu um tipo <a class="reference internal" href="../library/typing.html#typing.Annotated" title="typing.Annotated"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Annotated</span></code></a> para decorar tipos existentes com metadados específicos de contexto e o novo parâmetro <code class="docutils literal notranslate"><span class="pre">include_extras</span></code> para <a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> para acessar os metadados em tempo de execução. (Contribuição de Till Varoquaux e Konstantin Kashin.)</p>
</section>
<section id="unicodedata">
<h3>unicodedata<a class="headerlink" href="#unicodedata" title="Link permanente para este título">¶</a></h3>
<p>O banco de dados Unicode foi atualizado para a versão 13.0.0. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39926">bpo-39926</a>).</p>
</section>
<section id="venv">
<h3>venv<a class="headerlink" href="#venv" title="Link permanente para este título">¶</a></h3>
<p>Os scripts de ativação fornecidos por <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> agora especificam sua personalização de prompt de forma consistente, sempre usando o valor especificado por <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code>. Anteriormente, alguns scripts usavam incondicionalmente <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code>, outros apenas se fosse definido (que era o caso padrão) e um usava <code class="docutils literal notranslate"><span class="pre">__VENV_NAME__</span></code>. (Contribuição de Brett Cannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37663">bpo-37663</a>.)</p>
</section>
<section id="xml">
<h3>xml<a class="headerlink" href="#xml" title="Link permanente para este título">¶</a></h3>
<p>Os caracteres de espaço em branco nos atributos agora são preservados ao serializar <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> para o arquivo XML. EOLNs não são mais normalizados para “n”. Este é o resultado da discussão sobre como interpretar a seção 2.11 da especificação XML. (Contribuição de Mefistotelis em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39011">bpo-39011</a>.)</p>
</section>
</section>
<section id="optimizations">
<h2>Otimizações<a class="headerlink" href="#optimizations" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>Otimizado o idioma para atribuição de uma variável temporária nas compreensões. Agora <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">y</span> <span class="pre">in</span> <span class="pre">[expr]</span></code> nas compreensões é tão rápido quanto uma atribuição simples <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">expr</span></code>. Por exemplo:</p>
<blockquote>
<div><p>sums = [s for s in [0] for x in data for s in [s + x]]</p>
</div></blockquote>
<p>Ao contrário do operador <code class="docutils literal notranslate"><span class="pre">:=</span></code>, este idioma não vaza uma variável para o escopo externo.</p>
<p>(Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32856">bpo-32856</a>.)</p>
</li>
<li><p>Otimizada a manipulação de sinais em aplicações multithread. Se uma thread diferente da thread principal obtiver um sinal, o loop de avaliação do bytecode não será mais interrompido a cada instrução de bytecode para verificar se há sinais pendentes que não podem ser manipulados. Somente o segmento principal do interpretador principal pode manipular sinais.</p>
<p>Anteriormente, o loop de avaliação do bytecode era interrompido em cada instrução até que a thread principal lidasse com os sinais. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40010">bpo-40010</a>.)</p>
</li>
<li><p>Otimizado o módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> no FreeBSD usando <code class="docutils literal notranslate"><span class="pre">closefrom()</span></code>. (Contribuição de Ed Maste, Conrad Meyer, Kyle Evans, Kubilay Kocak e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38061">bpo-38061</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/long.html#c.PyLong_FromDouble" title="PyLong_FromDouble"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_FromDouble()</span></code></a> está agora até 1.87x mais rápido para valores que cabem em um <span class="xref c c-texpr">long</span>. (Contribuição de Sergey Fedoseev em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37986">bpo-37986</a>.)</p></li>
<li><p>Vários componentes embutidos do Python (<a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) agora são acelerados usando o protocolo vectorcall da <span class="target" id="index-71"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0590"><strong>PEP 590</strong></a>. (Contribuição de Dong-hee Na, Mark Shannon, Jeroen Demeyer e Petr Viktorin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37207">bpo-37207</a>.)</p></li>
<li><p>Otimizada a <code class="xref py py-func docutils literal notranslate"><span class="pre">difference_update()</span></code> para o caso em que o outro conjunto é muito maior do que o conjunto base. (Sugestão de Evgeny Kapun com contribuição de código de Michele Orrù em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8425">bpo-8425</a>.)</p></li>
<li><p>O alocador de pequenos objetos do Python (<code class="docutils literal notranslate"><span class="pre">obmalloc.c</span></code>) agora permite (não mais que) uma arena vazia para permanecer disponível para reutilização imediata, sem retorná-la ao sistema operacional. Isso evita o desperdiçar loops simples, onde uma arena pode ser criada e destruída novamente em cada iteração. (Contribuição de Tim Peters em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37257">bpo-37257</a>.)</p></li>
<li><p><a class="reference internal" href="../glossary.html#term-floor-division"><span class="xref std std-term">divisão pelo piso</span></a> de operação flutuante agora tem um melhor desempenho. Além disso, a mensagem de <a class="reference internal" href="../library/exceptions.html#ZeroDivisionError" title="ZeroDivisionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code></a> para esta operação foi atualizada. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39434">bpo-39434</a>.)</p></li>
<li><p>A decodificação de strings curtas ASCII com codecs UTF-8 e ascii é agora cerca de 15% mais rápida. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37348">bpo-37348</a>.)</p></li>
</ul>
<p>Aqui está um resumo das melhorias de desempenho do Python 3.4 ao Python 3.9:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Python version                       3.4     3.5     3.6     3.7     3.8    3.9
--------------                       ---     ---     ---     ---     ---    ---

Variable and attribute read access:
    read_local                       7.1     7.1     5.4     5.1     3.9    3.9
    read_nonlocal                    7.1     8.1     5.8     5.4     4.4    4.5
    read_global                     15.5    19.0    14.3    13.6     7.6    7.8
    read_builtin                    21.1    21.6    18.5    19.0     7.5    7.8
    read_classvar_from_class        25.6    26.5    20.7    19.5    18.4   17.9
    read_classvar_from_instance     22.8    23.5    18.8    17.1    16.4   16.9
    read_instancevar                32.4    33.1    28.0    26.3    25.4   25.3
    read_instancevar_slots          27.8    31.3    20.8    20.8    20.2   20.5
    read_namedtuple                 73.8    57.5    45.0    46.8    18.4   18.7
    read_boundmethod                37.6    37.9    29.6    26.9    27.7   41.1

Variable and attribute write access:
    write_local                      8.7     9.3     5.5     5.3     4.3    4.3
    write_nonlocal                  10.5    11.1     5.6     5.5     4.7    4.8
    write_global                    19.7    21.2    18.0    18.0    15.8   16.7
    write_classvar                  92.9    96.0   104.6   102.1    39.2   39.8
    write_instancevar               44.6    45.8    40.0    38.9    35.5   37.4
    write_instancevar_slots         35.6    36.1    27.3    26.6    25.7   25.8

Data structure read access:
    read_list                       24.2    24.5    20.8    20.8    19.0   19.5
    read_deque                      24.7    25.5    20.2    20.6    19.8   20.2
    read_dict                       24.3    25.7    22.3    23.0    21.0   22.4
    read_strdict                    22.6    24.3    19.5    21.2    18.9   21.5

Data structure write access:
    write_list                      27.1    28.5    22.5    21.6    20.0   20.0
    write_deque                     28.7    30.1    22.7    21.8    23.5   21.7
    write_dict                      31.4    33.3    29.3    29.2    24.7   25.4
    write_strdict                   28.4    29.9    27.5    25.2    23.1   24.5

Stack (or queue) operations:
    list_append_pop                 93.4   112.7    75.4    74.2    50.8   50.6
    deque_append_pop                43.5    57.0    49.4    49.2    42.5   44.2
    deque_append_popleft            43.7    57.3    49.7    49.7    42.8   46.4

Timing loop:
    loop_overhead                    0.5     0.6     0.4     0.3     0.3    0.3
</pre></div>
</div>
<p>Estes resultados foram gerados a partir do script de benchmark de acesso variável em: <code class="docutils literal notranslate"><span class="pre">Tools/scripts/var_access_benchmark.py</span></code>. O script de benchmark exibe tempos em nanossegundos. Os benchmarks foram medidos em um processador Intel® Core ™ i7-4960HQ &lt;<a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.html">https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.html</a>&gt;`_ executando as compilações do macOS de 64 bits encontradas em <a class="reference external" href="https://www.python.org/downloads/mac-osx/">python.org</a>.</p>
</section>
<section id="deprecated">
<h2>Descontinuados<a class="headerlink" href="#deprecated" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>O comando <code class="docutils literal notranslate"><span class="pre">bdist_msi</span></code> do distutils está agora descontinuado, use <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (pacotes wheel). (Contribuição de Hugo van Kemenade em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39586">bpo-39586</a>.)</p></li>
<li><p>Atualmente <a class="reference internal" href="../library/math.html#math.factorial" title="math.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.factorial()</span></code></a> aceita instâncias da <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> com valores inteiros não negativos (como <code class="docutils literal notranslate"><span class="pre">5.0</span></code>). Ela levanta uma <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para flutuadores não integrais e negativos. Agora está descontinuado. Nas versões futuras do Python, será levantada uma <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> para todos os flutuadores. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37315">bpo-37315</a>.)</p></li>
<li><p>Os módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code> e <code class="xref py py-mod docutils literal notranslate"><span class="pre">symbol</span></code> foram descontinuados e serão removidos em versões futuras do Python. Para a maioria dos casos de uso, os usuários podem aproveitar o estágio de geração e compilação da Árvores de Sintaxe Abstrata (AST), usando o módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>.</p></li>
<li><p>As funções públicas de API C <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlagsFilename()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyNode_Compile()</span></code> foram descontinuados e serão removidos no Python 3.10 junto com o analisador sintático antigo.</p></li>
<li><p>O uso de <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> em um contexto booleano foi descontinuado, pois é quase exclusivamente o resultado de implementações incorretas de comparadores avançados. Isso será tornado em uma <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> em uma versão futura do Python. (Contribuição de Josh Rosenberg em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35712">bpo-35712</a>.)</p></li>
<li><p>O módulo <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> atualmente aceita qualquer tipo hasheável como um possível valor inicial. Infelizmente, alguns desses tipos não têm garantia de ter um valor de hash determinístico. Após o Python 3.9, o módulo restringirá suas sementes a <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> e <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>.</p></li>
<li><p>A abertura do arquivo <a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">GzipFile</span></code></a> para escrita sem especificar o argumento <em>mode</em> foi descontinuado. Nas versões futuras do Python, ele sempre será aberto para leitura por padrão. Especifique o argumento <em>mode</em> para abri-lo para escrever e silenciar um aviso. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28286">bpo-28286</a>.)</p></li>
<li><p>Descontinuado o método <code class="docutils literal notranslate"><span class="pre">split()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">_tkinter.TkappType</span></code> a favor do método <code class="docutils literal notranslate"><span class="pre">splitlist()</span></code> que possui um comportamento mais consistente e previsível. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38371">bpo-38371</a>.)</p></li>
<li><p>A passagem explícita dos objetos da corrotina para <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a> foi descontinuada e será removida na versão 3.11. (Contribuição de Yury Selivanov e Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34790">bpo-34790</a>.)</p></li>
<li><p>Os padrões binhex4 e hexbin4 agora estão obsoletos. O módulo <a class="reference internal" href="../library/binhex.html#module-binhex" title="binhex: Encode and decode files in binhex4 format."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binhex</span></code></a> e as seguintes funções <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> foram descontinuadas:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/binascii.html#binascii.b2a_hqx" title="binascii.b2a_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">b2a_hqx()</span></code></a>, <a class="reference internal" href="../library/binascii.html#binascii.a2b_hqx" title="binascii.a2b_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">a2b_hqx()</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/binascii.html#binascii.rlecode_hqx" title="binascii.rlecode_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">rlecode_hqx()</span></code></a>, <a class="reference internal" href="../library/binascii.html#binascii.rledecode_hqx" title="binascii.rledecode_hqx"><code class="xref py py-func docutils literal notranslate"><span class="pre">rledecode_hqx()</span></code></a></p></li>
</ul>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39353">bpo-39353</a>.)</p>
</li>
<li><p>As classes <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Index</span></code> e <code class="docutils literal notranslate"><span class="pre">ExtSlice</span></code> de <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> são consideradas descontinuadas e serão removidas nas versões futuras do Python. O próprio <code class="docutils literal notranslate"><span class="pre">value</span></code> deve ser usado em vez de <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code>. <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code> deve ser usada em vez de <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code>. (Contribuição de Serhiy Storchaka em  <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>.)</p></li>
<li><p>As classes <code class="docutils literal notranslate"><span class="pre">Suite</span></code>, <code class="docutils literal notranslate"><span class="pre">Param</span></code>, <code class="docutils literal notranslate"><span class="pre">AugLoad</span></code> e <code class="docutils literal notranslate"><span class="pre">AugStore</span></code> de <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> são consideradas descontinuadas e serão removidas nas versões futuras do Python. Elas não foram geradas pelo analisador sintático e não foram aceitos pelo gerador de código no Python 3. (Contribuição de Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39639">bpo-39639</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39969">bpo-39969</a> e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39988">bpo-39988</a>.)</p></li>
<li><p>As funções <a class="reference internal" href="../c-api/init.html#c.PyEval_InitThreads" title="PyEval_InitThreads"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyEval_ThreadsInitialized" title="PyEval_ThreadsInitialized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ThreadsInitialized()</span></code></a> agora estão descontinuadas e serão removidas no Python 3.11. Chamar <a class="reference internal" href="../c-api/init.html#c.PyEval_InitThreads" title="PyEval_InitThreads"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code></a> agora não faz nada. O <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a> é inicializado por <a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a> desde o Python 3.7. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39877">bpo-39877</a>.)</p></li>
<li><p>Passar <code class="docutils literal notranslate"><span class="pre">None</span></code> como o primeiro argumento para a função <a class="reference internal" href="../library/shlex.html#shlex.split" title="shlex.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.split()</span></code></a> foi descontinuada.  (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33262">bpo-33262</a>.)</p></li>
<li><p><a class="reference internal" href="../library/smtpd.html#smtpd.MailmanProxy" title="smtpd.MailmanProxy"><code class="xref py py-func docutils literal notranslate"><span class="pre">smtpd.MailmanProxy()</span></code></a> está agora descontinuado, pois está inutilizável sem um módulo externo, <code class="docutils literal notranslate"><span class="pre">mailman</span></code>.  (Contribuição de Samuel Colvin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35800">bpo-35800</a>.)</p></li>
<li><p>O módulo <a class="reference internal" href="../library/2to3.html#module-lib2to3" title="lib2to3: The 2to3 library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lib2to3</span></code></a> agora emite um <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>. Python 3.9 mudou para um analisador sintático GASE (veja <span class="target" id="index-72"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0617"><strong>PEP 617</strong></a>) e Python 3.10 pode incluir uma nova sintaxe de linguagem que não é analisável pelo analisador sintático LL(1) de lib2to3. O módulo <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code> pode ser removido da biblioteca padrão em uma versão futura do Python. Considere alternativas de terceiros, como <a class="reference external" href="https://libcst.readthedocs.io/">LibCST</a> ou <a class="reference external" href="https://parso.readthedocs.io/">parso</a>. (Contribuição de Carl Meyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40360">bpo-40360</a>.)</p></li>
<li><p>Adicionado o parâmetro <em>random</em> da <a class="reference internal" href="../library/random.html#random.shuffle" title="random.shuffle"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.shuffle()</span></code></a> foi descontinuado. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40465">bpo-40465</a>)</p></li>
</ul>
</section>
<section id="removed">
<span id="removed-in-python-39"></span><h2>Removidos<a class="headerlink" href="#removed" title="Link permanente para este título">¶</a></h2>
<ul class="simple">
<li><p>A versão errônea em <code class="xref py py-data docutils literal notranslate"><span class="pre">unittest.mock.__version__</span></code> foi removida.</p></li>
<li><p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">nntplib.NNTP</span></code></a>: os métodos <code class="docutils literal notranslate"><span class="pre">xpath()</span></code> e <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code> foram removidos. Esses métodos foram descontinuados desde Python 3.3. Geralmente, essas extensões não são suportadas ou não são habilitadas pelos administradores do servidor NNTP. Para <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code>, use <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.descriptions" title="nntplib.NNTP.descriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.descriptions()</span></code></a> ou <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.description" title="nntplib.NNTP.description"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.description()</span></code></a>. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39366">bpo-39366</a>.)</p></li>
<li><p><a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a>: os métodos <code class="docutils literal notranslate"><span class="pre">tostring()</span></code> e <code class="docutils literal notranslate"><span class="pre">fromstring()</span></code> foram removidos. Eles eram aliases para <code class="docutils literal notranslate"><span class="pre">tobytes()</span></code> e <code class="docutils literal notranslate"><span class="pre">frombytes()</span></code>, descontinuado desde Python 3.2. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38916">bpo-38916</a>.)</p></li>
<li><p>A função <code class="docutils literal notranslate"><span class="pre">sys.callstats()</span></code> não documentada foi removida. Desde o Python 3.7, ela foi descontinuada e sempre retornou <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>. É necessária uma opção de compilação especial <code class="docutils literal notranslate"><span class="pre">CALL_PROFILE</span></code> que já foi removida no Python 3.7. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37414">bpo-37414</a>.)</p></li>
<li><p>As funções <code class="docutils literal notranslate"><span class="pre">sys.getcheckinterval()</span></code> e <code class="docutils literal notranslate"><span class="pre">sys.setcheckinterval()</span></code> foram removidas. Elas foram descontinuadas desde o Python 3.2. Use <a class="reference internal" href="../library/sys.html#sys.getswitchinterval" title="sys.getswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getswitchinterval()</span></code></a> e <a class="reference internal" href="../library/sys.html#sys.setswitchinterval" title="sys.setswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setswitchinterval()</span></code></a> em seu lugar. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37392">bpo-37392</a>.)</p></li>
<li><p>A função C <code class="docutils literal notranslate"><span class="pre">PyImport_Cleanup()</span></code> foi removida. Foi documentada como: “Esvazia a tabela do módulo. Apenas para uso interno.” (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36710">bpo-36710</a>.)</p></li>
<li><p>Os módulos <code class="docutils literal notranslate"><span class="pre">_dummy_thread</span></code> e <code class="docutils literal notranslate"><span class="pre">dummy_threading</span></code> foram removidos. Esses módulos foram descontinuados desde o Python 3.7, que requer suporte a threading. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37312">bpo-37312</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aifc.openfp()</span></code> alias para <code class="docutils literal notranslate"><span class="pre">aifc.open()</span></code>, <code class="docutils literal notranslate"><span class="pre">sunau.openfp()</span></code> alias para``sunau.open()`` e <code class="docutils literal notranslate"><span class="pre">wave.openfp()</span></code> alias para <a class="reference internal" href="../library/wave.html#wave.open" title="wave.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">wave.open()</span></code></a> foi removido. Eles foram descontinuados desde o Python 3.7. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37320">bpo-37320</a>.)</p></li>
<li><p>O método <code class="xref py py-meth docutils literal notranslate"><span class="pre">isAlive()</span></code> de <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a> foi removido. Ele foi descontinuado desde o Python 3.8. Use <a class="reference internal" href="../library/threading.html#threading.Thread.is_alive" title="threading.Thread.is_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_alive()</span></code></a> ao invés. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37804">bpo-37804</a>.)</p></li>
<li><p>Os métodos <code class="docutils literal notranslate"><span class="pre">getchildren()</span></code> e <code class="docutils literal notranslate"><span class="pre">getiterator()</span></code> das classes <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree" title="xml.etree.ElementTree.ElementTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementTree</span></code></a> e <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="xml.etree.ElementTree.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> no módulo <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ElementTree</span></code></a> foram removidos.  Eles foram descontinuados no Python 3.2. Use <code class="docutils literal notranslate"><span class="pre">iter(x)</span></code> ou <code class="docutils literal notranslate"><span class="pre">list(x)</span></code> em vez de <code class="docutils literal notranslate"><span class="pre">x.getchildren()</span></code> e <code class="docutils literal notranslate"><span class="pre">x.iter()</span></code> ou <code class="docutils literal notranslate"><span class="pre">list(x.iter())</span></code> em vez de <code class="docutils literal notranslate"><span class="pre">x.getiterator()</span></code>. (Contribuição Serhiy Storchaka no <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36543">bpo-36543</a>.)</p></li>
<li><p>A API antiga <a class="reference internal" href="../library/plistlib.html#module-plistlib" title="plistlib: Generate and parse Apple plist files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">plistlib</span></code></a> foi removida. Ela tinha sido descontinuada desde o Python 3.4. Use as funções <a class="reference internal" href="../library/plistlib.html#plistlib.load" title="plistlib.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.loads" title="plistlib.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dump" title="plistlib.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a> e <a class="reference internal" href="../library/plistlib.html#plistlib.dumps" title="plistlib.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">dumps()</span></code></a>. Além disso, o parâmetro <em>use_builtin_types</em> foi removido, os objetos padrão <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> são sempre usados em seu lugar. (Contribuição de Jon Janzen em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36409">bpo-36409</a>.)</p></li>
<li><p>A função C <code class="docutils literal notranslate"><span class="pre">PyGen_NeedsFinalizing</span></code> foi removida. Ela não foi documentada, testada ou usada em qualquer lugar dentro do CPython após a implementação de <span class="target" id="index-73"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0442"><strong>PEP 442</strong></a>. Patch de Joannah Nanjekye. (Contribuição de Joannah Nanjekye em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=15088">bpo-15088</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">base64.encodestring()</span></code> e <code class="docutils literal notranslate"><span class="pre">base64.decodestring()</span></code>, aliases descontinuados desde Python 3.1, foram removidos: use <a class="reference internal" href="../library/base64.html#base64.encodebytes" title="base64.encodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.encodebytes()</span></code></a> e <a class="reference internal" href="../library/base64.html#base64.decodebytes" title="base64.decodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.decodebytes()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39351">bpo-39351</a>.)</p></li>
<li><p>A função <code class="docutils literal notranslate"><span class="pre">fractions.gcd()</span></code> foi removida, foi descontinuado desde Python 3.5 (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=22486">bpo-22486</a>): use <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> em seu lugar. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39350">bpo-39350</a>.)</p></li>
<li><p>O parâmetro <em>buffering</em> de <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> foi removido. Desde Python 3.0, ele era ignorado e ao usá-lo emitia uma <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Passe um objeto arquivo aberto para controlar como o arquivo é aberto. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>.)</p></li>
<li><p>O parâmetro <em>encoding</em> de <a class="reference internal" href="../library/json.html#json.loads" title="json.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.loads()</span></code></a> foi removido. A partir do Python 3.1, ele foi descontinuado e ignorado; usá-lo emitia uma <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> desde Python 3.8. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39377">bpo-39377</a>)</p></li>
<li><p>As instruções <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(await</span> <span class="pre">asyncio.lock):</span></code> e <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(yield</span> <span class="pre">from</span> <span class="pre">asyncio.lock):</span></code> não são mais suportadas, use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">lock</span></code>. O mesmo é se aplica para <code class="docutils literal notranslate"><span class="pre">asyncio.Condition</span></code> e <code class="docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code>. (Contribuição de Andrew Svetlov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34793">bpo-34793</a>.)</p></li>
<li><p>A função <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getcounts()</span></code>, a opção de linha de comando <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">showalloccount</span></code> e o campo <code class="docutils literal notranslate"><span class="pre">show_alloc_count</span></code> da estrutura C <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> foram removidos. Eles exigiram uma construção especial do Python definindo a macro <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>.)</p></li>
<li><p>O atributo <code class="docutils literal notranslate"><span class="pre">_field_types</span></code> da classe <a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.NamedTuple</span></code></a> foi removido. Ele foi descontinuado desde o Python 3.8. Use o atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40182">bpo-40182</a>.)</p></li>
<li><p>O método <code class="xref py py-meth docutils literal notranslate"><span class="pre">symtable.SymbolTable.has_exec()</span></code> foi removido. Ele foi descontinuado desde 2006, e retornando apenas <code class="docutils literal notranslate"><span class="pre">False</span></code> quando é chamado. (Contribuição de Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40208">bpo-40208</a>)</p></li>
<li><p>Os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.current_task()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.all_tasks()</span></code> foram removidos. Eles foram descontinuados desde o Python 3.7 e você pode usar <a class="reference internal" href="../library/asyncio-task.html#asyncio.current_task" title="asyncio.current_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.current_task()</span></code></a> e <a class="reference internal" href="../library/asyncio-task.html#asyncio.all_tasks" title="asyncio.all_tasks"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.all_tasks()</span></code></a> em seu lugar. (Contribuição de Rémi Lapeyre em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40967">bpo-40967</a>)</p></li>
<li><p>O método <code class="docutils literal notranslate"><span class="pre">unescape()</span></code> na classe <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">html.parser.HTMLParser</span></code></a> foi removido (foi descontinuado desde o Python 3.4). <a class="reference internal" href="../library/html.html#html.unescape" title="html.unescape"><code class="xref py py-func docutils literal notranslate"><span class="pre">html.unescape()</span></code></a> deve ser usada para converter referências de caracteres para os caracteres Unicode correspondentes.</p></li>
</ul>
</section>
<section id="porting-to-python-3-9">
<h2>Portando para Python 3.9<a class="headerlink" href="#porting-to-python-3-9" title="Link permanente para este título">¶</a></h2>
<p>Esta seção lista as alterações descritas anteriormente e outras correções que podem exigir alterações no seu código.</p>
<section id="changes-in-the-python-api">
<h3>Alterações na API Python<a class="headerlink" href="#changes-in-the-python-api" title="Link permanente para este título">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> e <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> agora levanta <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> onde anteriormente levantava <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>. Os chamadores capturando o tipo de exceção específico e suportando Python 3.9 e versões anteriores precisarão capturar ambas usando <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">(ImportError,</span> <span class="pre">ValueError):</span></code>.</p></li>
<li><p>Os scripts de ativação <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> não são mais casos especiais quando <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code> está definido como <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p></li>
<li><p>O método <a class="reference internal" href="../library/select.html#select.epoll.unregister" title="select.epoll.unregister"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select.epoll.unregister()</span></code></a> não ignora mais o erro <a class="reference internal" href="../library/errno.html#errno.EBADF" title="errno.EBADF"><code class="xref py py-data docutils literal notranslate"><span class="pre">EBADF</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39239">bpo-39239</a>.)</p></li>
<li><p>O parâmetro <em>compresslevel</em> de <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> tornou-se uma parâmetro somente-nomeado, uma vez que o parâmetro <em>buffering</em> foi removido. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>.)</p></li>
<li><p>AST simplificada para assinatura. Índices simples serão representados por seus valores, fatias estendidas serão representadas como tuplas. <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code> retornará um <code class="docutils literal notranslate"><span class="pre">value</span></code> em si, <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code> retornará <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>.)</p></li>
<li><p>O módulo <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> agora ignora a variável de ambiente <span class="target" id="index-74"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONCASEOK"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONCASEOK</span></code></a> quando as opções de linha de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a> ou <a class="reference internal" href="../using/cmdline.html#cmdoption-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">-I</span></code></a> estão sendo usadas.</p></li>
<li><p>O parâmetro <em>encoding</em> foi adicionado às classes <a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP</span></code></a> e <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP_TLS</span></code></a> como um parâmetro somente-nomeado, e a codificação padrão foi alterada de Latin-1 para UTF-8 para siga <span class="target" id="index-75"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2640.html"><strong>RFC 2640</strong></a>.</p></li>
<li><p><a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.shutdown_default_executor()</span></code></a> foi adicionado a <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="asyncio.AbstractEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code></a>, significando que laços de eventos alternativos que herdam dele devem ter este método definido. (Contribuição de Kyle Stanley em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>.)</p></li>
<li><p>Os valores constantes de futuras sinalizações no módulo <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a> são atualizados para evitar colisão com sinalizações do compilador. Anteriormente, <code class="docutils literal notranslate"><span class="pre">PyCF_ALLOW_TOP_LEVEL_AWAIT</span></code> estava em conflito com <code class="docutils literal notranslate"><span class="pre">CO_FUTURE_DIVISION</span></code>. (Contribuição de Batuhan Taskaya em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39562">bpo-39562</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array('u')</span></code> agora usa <code class="docutils literal notranslate"><span class="pre">wchar_t</span></code> como tipo C em vez de <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code>. Esta mudança não afeta seu comportamento porque <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code> é um apelido de <code class="docutils literal notranslate"><span class="pre">wchar_t</span></code> desde Python 3.3. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34538">bpo-34538</a>.)</p></li>
<li><p>A API de <a class="reference internal" href="../library/logging.html#logging.getLogger" title="logging.getLogger"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a> agora retorna o logger raiz quando passado o nome <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, enquanto anteriormente retornava um logger não-raiz chamado <code class="docutils literal notranslate"><span class="pre">'root'</span></code>. Isso pode afetar casos onde o código do usuário deseja explicitamente um logger não-root chamado <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, ou instancia um logger usando <code class="docutils literal notranslate"><span class="pre">logging.getLogger(__name__)</span></code> em algum módulo de nível superior chamado <code class="docutils literal notranslate"><span class="pre">'root.py'</span></code>. (Contribuição de Vinay Sajip em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37742">bpo-37742</a>.)</p></li>
<li><p>O tratamento de divisão de <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a> agora retorna <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code> ao invés de levantar um <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> quando passado algo diferente de uma instância de <code class="docutils literal notranslate"><span class="pre">str</span></code> ou <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a>. Isso permite a criação de classes compatíveis que não herdam desses tipos mencionados. (Contribuição de Roger Aiudi em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34775">bpo-34775</a>).</p></li>
<li><p>A partir do Python 3.9.5, o módulo <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> não aceita mais zeros à esquerda em strings de endereço IPv4. Os zeros à esquerda são ambíguos e interpretados como notação octal por algumas bibliotecas. Por exemplo, a função legada <a class="reference internal" href="../library/socket.html#socket.inet_aton" title="socket.inet_aton"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.inet_aton()</span></code></a> trata os zeros à esquerda como notação octal. A implementação glibc de <a class="reference internal" href="../library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_pton()</span></code></a> moderna não aceita nenhum zeros à esquerda. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p></li>
<li><p><a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> agora normaliza o nome da codificação da mesma forma que <code class="xref py py-func docutils literal notranslate"><span class="pre">encodings.normalize_encoding()</span></code>, exceto que <a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> também converte o nome para minúsculas. Por exemplo, <code class="docutils literal notranslate"><span class="pre">&quot;latex+latin1&quot;</span></code> nome de codificação agora está normalizado para <code class="docutils literal notranslate"><span class="pre">&quot;latex_latin1&quot;</span></code>. (Contribuição de Jordon Xu em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37751">bpo-37751</a>.)</p></li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Alterações na API C<a class="headerlink" href="#changes-in-the-c-api" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p>Instâncias de <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">tipos alocados por heap</span></a> (como aquelas criadas com <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpec" title="PyType_FromSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpec()</span></code></a> e APIs semelhantes) mantêm uma referência para seu objeto de tipo desde o Python 3.8. Conforme indicado nas “Mudanças na API C” do Python 3.8, para a grande maioria dos casos, não deve haver nenhum efeito colateral, mas para os tipos que têm uma função personalizada <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_traverse" title="PyTypeObject.tp_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_traverse</span></code></a>, certifique-se de que todas as funções <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> personalizadas de tipos alocados por heap visitam o tipo do objeto.</p>
<blockquote>
<div><p>Exemplo:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"></span>
<span class="nf">foo_traverse</span><span class="p">(</span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visitproc</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="c1">// Rest of the traverse function</span>
<span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (Python issue 35810 and 40217)</span>
<span class="w">    </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<p>Se sua função transversal delega para <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> de sua classe base (ou outro tipo), certifique-se de que <code class="docutils literal notranslate"><span class="pre">Py_TYPE(self)</span></code> seja visitado apenas uma vez. Observe que apenas os <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">tipos de heap</span></a> devem visitar o tipo em <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code>.</p>
<blockquote>
<div><p>Por exemplo, se sua função <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> inclui:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_traverse</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>adicione:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (bpo-35810 and bpo-40217)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_flags</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">Py_TPFLAGS_HEAPTYPE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// a heap type&#39;s tp_traverse already visited Py_TYPE(self)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="cp">#else</span>
</pre></div>
</div>
</div></blockquote>
<p>(Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35810">bpo-35810</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40217">bpo-40217</a> para mais informações.)</p>
</li>
<li><p>As funções <code class="docutils literal notranslate"><span class="pre">PyEval_CallObject</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallFunction</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallMethod</span></code> e <code class="docutils literal notranslate"><span class="pre">PyEval_CallObjectWithKeywords</span></code> foram descontinuadas. Use <a class="reference internal" href="../c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Call()</span></code></a> e suas variantes. (Veja mais detalhes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29548">bpo-29548</a>.)</p></li>
</ul>
</section>
<section id="cpython-bytecode-changes">
<h3>Alterações de bytecode do CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p>O opcode <a class="reference internal" href="../library/dis.html#opcode-LOAD_ASSERTION_ERROR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">LOAD_ASSERTION_ERROR</span></code></a> foi adicionado para tratar a instrução <a class="reference internal" href="../reference/simple_stmts.html#assert"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">assert</span></code></a>. Anteriormente, a instrução assert não funcionava corretamente se a exceção <a class="reference internal" href="../library/exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a> estivesse sendo ocultada. (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34880">bpo-34880</a>.)</p></li>
<li><p>O código de operação <a class="reference internal" href="../library/dis.html#opcode-COMPARE_OP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COMPARE_OP</span></code></a> foi dividido em quatro instruções distintas:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">COMPARE_OP</span></code> para comparações ricas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IS_OP</span></code> para testes “is” e “is not”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTAINS_OP</span></code> para testes “in” e “not in”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EXC_MATCH</span></code> para verificar exceções em instruções “try-except”.</p></li>
</ul>
<p>(Contribuição de Mark Shannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39156">bpo-39156</a>.)</p>
</li>
</ul>
</section>
</section>
<section id="build-changes">
<h2>Alterações de compilação<a class="headerlink" href="#build-changes" title="Link permanente para este título">¶</a></h2>
<ul class="simple">
<li><p>Adicionada a opção <code class="docutils literal notranslate"><span class="pre">--with-platlibdir</span></code> ao script <code class="docutils literal notranslate"><span class="pre">configure</span></code>: nome do diretório de biblioteca específico da plataforma, armazenado no novo atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a>. Veja o atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a> para mais informações. (Contribuição de Jan Matějek, Matěj Cepl, Charalampos Stratakis e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p></li>
<li><p>A macro especial de construção <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code> foi removida. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>.)</p></li>
<li><p>Em plataformas não Windows, as funções <code class="xref c c-func docutils literal notranslate"><span class="pre">setenv()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">unsetenv()</span></code> agora são necessárias para construir o Python. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>.)</p></li>
<li><p>Em plataformas não-Windows, a criação de instaladores <code class="docutils literal notranslate"><span class="pre">bdist_wininst</span></code> não possui mais suporte oficial. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10945">bpo-10945</a> para mais detalhes.)</p></li>
<li><p>Ao compilar Python no macOS a partir do código-fonte, <code class="docutils literal notranslate"><span class="pre">_tkinter</span></code> agora se vincula a frameworks Tcl e Tk não pertencentes ao sistema se eles estiverem instalados em <code class="docutils literal notranslate"><span class="pre">/Library/Frameworks</span></code>, como era o caso em versões mais antigas do macOS. Se um macOS SDK for explicitamente configurado, usando <a class="reference internal" href="../using/configure.html#cmdoption-1"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-universalsdk</span></code></a> ou <code class="docutils literal notranslate"><span class="pre">-isysroot</span></code>, apenas o próprio SDK será pesquisado. O comportamento padrão ainda pode ser substituído com <a class="reference internal" href="../using/configure.html#cmdoption-with-tcltk-includes"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-tcltk-includes</span></code></a> e <a class="reference internal" href="../using/configure.html#cmdoption-with-tcltk-libs"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-tcltk-libs</span></code></a>. (Contribuição de Ned Deily em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34956">bpo-34956</a>.)</p></li>
<li><p>Python pode agora ser construído para Windows 10 ARM64. (Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33125">bpo-33125</a>.)</p></li>
<li><p>Alguns testes individuais agora são ignorados quando <code class="docutils literal notranslate"><span class="pre">--pgo</span></code> é usada. Os testes em questão aumentaram significativamente o tempo da tarefa de PGO e provavelmente não ajudaram a melhorar a otimização do executável final. Isso acelera a tarefa por um fator de cerca de 15x. A execução de todo o conjunto de testes de unidade é lenta. Esta mudança pode resultar em uma construção um pouco menos otimizada, uma vez que nem tantos ramos de código serão executados. Se você estiver disposto a esperar por uma construção muito mais lenta, o comportamento antigo pode ser restaurado usando <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">[..]</span> <span class="pre">PROFILE_TASK=&quot;-m</span> <span class="pre">test</span> <span class="pre">--pgo-extended&quot;</span></code>. Não oferecemos garantia de qual conjunto de tarefas de PGO produz uma construção mais rápida. Os usuários que se importam devem executar seus próprios benchmarks relevantes, pois os resultados podem depender do ambiente, da carga de trabalho e da cadeia de ferramentas do compilador. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36044">bpo-36044</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37707">bpo-37707</a> para mais detalhes.)</p></li>
</ul>
</section>
<section id="c-api-changes">
<h2>Alterações na API C<a class="headerlink" href="#c-api-changes" title="Link permanente para este título">¶</a></h2>
<section id="id1">
<h3>Novas funcionalidades<a class="headerlink" href="#id1" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p><span class="target" id="index-76"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0573"><strong>PEP 573</strong></a>: Adicionada  <a class="reference internal" href="../c-api/type.html#c.PyType_FromModuleAndSpec" title="PyType_FromModuleAndSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromModuleAndSpec()</span></code></a> para associar um módulo a uma classe; <a class="reference internal" href="../c-api/type.html#c.PyType_GetModule" title="PyType_GetModule"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModule()</span></code></a> e <a class="reference internal" href="../c-api/type.html#c.PyType_GetModuleState" title="PyType_GetModuleState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModuleState()</span></code></a> para obter o módulo e seu estado; e <a class="reference internal" href="../c-api/structures.html#c.PyCMethod" title="PyCMethod"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyCMethod</span></code></a> e <code class="xref c c-data docutils literal notranslate"><span class="pre">METH_METHOD</span></code> para permitir que um método acesse a classe na qual ela foi definida. (Contribuição de Marcel Plch e Petr Viktorin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38787">bpo-38787</a>.)</p></li>
<li><p>Adicionada a função <a class="reference internal" href="../c-api/reflection.html#c.PyFrame_GetCode" title="PyFrame_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code></a>: obtém um código de quadro. Adiciona a função <a class="reference internal" href="../c-api/reflection.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a>: obtém o próximo quadro externo. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>.)</p></li>
<li><p>Adicionada <a class="reference internal" href="../c-api/reflection.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a> à API C limitada. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>.)</p></li>
<li><p>Adicionada as funções <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetInterpreter" title="PyThreadState_GetInterpreter"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetInterpreter()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState_Get" title="PyInterpreterState_Get"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyInterpreterState_Get()</span></code></a> para obter o interpretador. Adiciona a função <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetFrame" title="PyThreadState_GetFrame"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code></a> para obter o quadro atual de um estado de thread do Python. Adiciona a função <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetID" title="PyThreadState_GetID"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetID()</span></code></a>: obtém o identificador único de um estado de thread do Python. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39947">bpo-39947</a>.)</p></li>
<li><p>Adicionada uma nova função pública <a class="reference internal" href="../c-api/call.html#c.PyObject_CallNoArgs" title="PyObject_CallNoArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallNoArgs()</span></code></a> à API C, que chama um objeto chamável Python sem nenhum argumento. É a maneira mais eficiente de chamar um objeto chamável Python sem nenhum argumento. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37194">bpo-37194</a>.)</p></li>
<li><p>Alterações na API C limitada (se a macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> estiver definida):</p>
<ul class="simple">
<li><p>Fornece <a class="reference internal" href="../c-api/exceptions.html#c.Py_EnterRecursiveCall" title="Py_EnterRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_EnterRecursiveCall()</span></code></a> e <a class="reference internal" href="../c-api/exceptions.html#c.Py_LeaveRecursiveCall" title="Py_LeaveRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_LeaveRecursiveCall()</span></code></a> como funções regulares para a API limitada. Anteriormente, eram definidas como macros, mas essas macros não compilavam com a API C limitada, que não pode acessar o campo <code class="docutils literal notranslate"><span class="pre">PyThreadState.recursion_depth</span></code> (a estrutura não é visível na API C limitada).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code> e <code class="docutils literal notranslate"><span class="pre">PyObject_INIT_VAR()</span></code> se uma função regular não visível para ocultar os detalhes da implementação.</p></li>
</ul>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>.)</p>
</li>
<li><p>A função <a class="reference internal" href="../c-api/module.html#c.PyModule_AddType" title="PyModule_AddType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_AddType()</span></code></a> é adicionado para ajudar a adicionar um tipo a um módulo. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40024">bpo-40024</a>.)</p></li>
<li><p>Adicionadas as funções <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsTracked" title="PyObject_GC_IsTracked"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsTracked()</span></code></a> e <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsFinalized" title="PyObject_GC_IsFinalized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsFinalized()</span></code></a> para a API pública para permitir a consulta se os objetos Python estão sendo rastreados ou já foram finalizados pelo coletor de lixo, respectivamente. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>.)</p></li>
<li><p>Adicionada a <code class="xref c c-func docutils literal notranslate"><span class="pre">_PyObject_FunctionStr()</span></code> para obter uma representação amigável para o usuário de strings de um objeto função ou similar. (Patch por Jeroen Demeyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37645">bpo-37645</a>.)</p></li>
<li><p>Adicionada <a class="reference internal" href="../c-api/call.html#c.PyObject_CallOneArg" title="PyObject_CallOneArg"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallOneArg()</span></code></a> para chamar um objeto com um argumento posicional (Patch de Jeroen Demeyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37483">bpo-37483</a>.)</p></li>
</ul>
</section>
<section id="id2">
<h3>Portando para Python 3.9<a class="headerlink" href="#id2" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyInterpreterState.eval_frame</span></code> (<span class="target" id="index-77"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0523"><strong>PEP 523</strong></a>) agora exige um novo parâmetro <em>tstate</em> obrigatório (<code class="docutils literal notranslate"><span class="pre">PyThreadState*</span></code>). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38500">bpo-38500</a>.)</p></li>
<li><p>Módulos de extensão: As funções <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_traverse" title="PyModuleDef.m_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_traverse</span></code></a>, <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_clear" title="PyModuleDef.m_clear"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_clear</span></code></a> e <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_free" title="PyModuleDef.m_free"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_free</span></code></a> de <a class="reference internal" href="../c-api/module.html#c.PyModuleDef" title="PyModuleDef"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyModuleDef</span></code></a> não são mais chamados se o estado do módulo foi solicitado, mas ainda não está alocado. Este é o caso imediatamente após o módulo ser criado e antes de o módulo ser executado (função <a class="reference internal" href="../c-api/module.html#c.Py_mod_exec" title="Py_mod_exec"><code class="xref c c-data docutils literal notranslate"><span class="pre">Py_mod_exec</span></code></a>). Mais precisamente, estas funções são são chamados se <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_size" title="PyModuleDef.m_size"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_size</span></code></a> for maior que 0 e o estado do módulo (como retornado por <a class="reference internal" href="../c-api/module.html#c.PyModule_GetState" title="PyModule_GetState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_GetState()</span></code></a>) for <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<p>Módulos de extensão sem um estado de módulo (<code class="docutils literal notranslate"><span class="pre">m_size</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code>) não são afetados.</p>
</li>
<li><p>Se <a class="reference internal" href="../c-api/init.html#c.Py_AddPendingCall" title="Py_AddPendingCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_AddPendingCall()</span></code></a> for chamada em um subinterpretador, a função agora está programada para ser chamada a partir do subinterpretador, em vez de ser chamada a partir do interpretador principal. Cada subinterpretador agora tem sua própria lista de chamadas programadas. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39984">bpo-39984</a>.)</p></li>
<li><p>O registro do Windows não é mais usado para inicializar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> quando a opção <code class="docutils literal notranslate"><span class="pre">-E</span></code> é usada (se <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.use_environment" title="PyConfig.use_environment"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.use_environment</span></code></a> estiver definido como <code class="docutils literal notranslate"><span class="pre">0</span></code>). Isso é significativo ao incorporar Python no Windows. (Contribuição de Zackery Spytz na <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8901">bpo-8901</a>.)</p></li>
<li><p>A variável global <a class="reference internal" href="../c-api/tuple.html#c.PyStructSequence_UnnamedField" title="PyStructSequence_UnnamedField"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyStructSequence_UnnamedField</span></code></a> agora é uma constante e se refere a uma string constante. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38650">bpo-38650</a>.)</p></li>
<li><p>A estrutura <code class="xref c c-type docutils literal notranslate"><span class="pre">PyGC_Head</span></code> agora não é mais visível. Ela só é definida na API C interna (<code class="docutils literal notranslate"><span class="pre">pycore_gc.h</span></code>). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_COPY</span></code>, <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_FILL</span></code>, <code class="docutils literal notranslate"><span class="pre">PyUnicode_WSTR_LENGTH</span></code>, <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromUnicode" title="PyUnicode_FromUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode()</span></code></a>, <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicode" title="PyUnicode_AsUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicode()</span></code></a>, <code class="docutils literal notranslate"><span class="pre">_PyUnicode_AsUnicode</span></code> e <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicodeAndSize" title="PyUnicode_AsUnicodeAndSize"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeAndSize()</span></code></a> estão marcadas como descontinuadas no C. Elas foram descontinuadas pela <span class="target" id="index-78"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0393"><strong>PEP 393</strong></a> desde Python 3.3. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>.)</p></li>
<li><p>A função <a class="reference internal" href="../c-api/sys.html#c.Py_FatalError" title="Py_FatalError"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_FatalError()</span></code></a> é substituída por uma macro que registra automaticamente o nome da função atual, a menos que a macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> seja definida. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39882">bpo-39882</a>.)</p></li>
<li><p>O protocolo vectorcall agora exige que o chamador passe apenas strings como nomes de argumentos. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37540">bpo-37540</a> para mais informações.)</p></li>
<li><p>Os detalhes de implementação de uma série de macros e funções agora estão ocultos:</p>
<ul class="simple">
<li><p>A macro <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_IS_GC" title="PyObject_IS_GC"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_IS_GC()</span></code></a> foi convertida para uma função.</p></li>
<li><p>A macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW()</span></code> se torna um alias para a macro <a class="reference internal" href="../c-api/allocation.html#c.PyObject_New" title="PyObject_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_New()</span></code></a> e a macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW_VAR()</span></code> se torna um alias para a macro <a class="reference internal" href="../c-api/allocation.html#c.PyObject_NewVar" title="PyObject_NewVar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NewVar()</span></code></a>. Elas não acessam mais diretamente o membro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_basicsize" title="PyTypeObject.tp_basicsize"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_basicsize</span></code></a>.</p></li>
<li><p>A macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GET_WEAKREFS_LISTPTR()</span></code> foi convertida para uma função: a macro acessava diretamente o membro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_weaklistoffset" title="PyTypeObject.tp_weaklistoffset"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_weaklistoffset</span></code></a>.</p></li>
<li><p>A macro <a class="reference internal" href="../c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CheckBuffer()</span></code></a> foi convertida para uma função: a macro acessava diretamente o membro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_buffer" title="PyTypeObject.tp_as_buffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_buffer</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../c-api/number.html#c.PyIndex_Check" title="PyIndex_Check"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code></a> está agora declarada como uma função “opaca” para ocultar detalhes da implementação: removida a macro <code class="docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code>. A macro acessava diretamente o membro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_number" title="PyTypeObject.tp_as_number"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_number</span></code></a>.</p></li>
</ul>
<p>(Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40170">bpo-40170</a> para mais detalhes.)</p>
</li>
</ul>
</section>
<section id="id3">
<h3>Removidos<a class="headerlink" href="#id3" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p>Excluídas as macros <code class="docutils literal notranslate"><span class="pre">PyFPE_START_PROTECT()</span></code> e <code class="docutils literal notranslate"><span class="pre">PyFPE_END_PROTECT()</span></code> de <code class="docutils literal notranslate"><span class="pre">pyfpe.h</span></code> da API C limitada. (Contribuição por Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38835">bpo-38835</a>.)</p></li>
<li><p>O slot <code class="docutils literal notranslate"><span class="pre">tp_print</span></code> de <a class="reference internal" href="../c-api/typeobj.html#type-structs"><span class="std std-ref">PyTypeObject</span></a> foi removido. Ele era usado para imprimir objetos em arquivos no Python 2.7 e anteriores. Desde Python 3.0, ele era ignorado e não utilizado. (Contribuição de Jeroen Demeyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36974">bpo-36974</a>.)</p></li>
<li><p>Alterações na API C limitada (se a macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> estiver definida):</p>
<ul class="simple">
<li><p>Excluídas as seguintes funções da API C limitada:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyThreadState_DeleteCurrent()</span></code> (Contribuição de Joannah Nanjekye em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37878">bpo-37878</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_CheckRecursionLimit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_NewReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_ForgetReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyTraceMalloc_NewReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_GetRefTotal()</span></code></p></li>
<li><p>O mecanismo trashcan que nunca funcionou na API C limitada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTrash_UNWIND_LEVEL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN_CONDITION</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_END</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_BEGIN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_END</span></code></p></li>
</ul>
</li>
<li><p>Movidas as seguintes funções e definições para a API C interna:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyDebug_PrintTotalRefs()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferences()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferenceAddresses()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_tracemalloc_config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_AddToAllObjects()</span></code> (específico para construção de <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code>)</p></li>
</ul>
</li>
</ul>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>.)</p>
</li>
<li><p>Removido o gancho <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code> e removida a macro <code class="docutils literal notranslate"><span class="pre">_PyThreadState_GetFrame</span></code> que era um alias para <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code>. Eles eram os únicos expostos pela API C interna. Removido também o tipo <code class="docutils literal notranslate"><span class="pre">PyThreadFrameGetter</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39946">bpo-39946</a>.)</p></li>
<li><p>Removidas as funções a seguir da API C. Chame <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_Collect" title="PyGC_Collect"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_Collect()</span></code></a> explicitamente para limpar todas as listas livres. (Contribuição de Inada Naoki e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37340">bpo-37340</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38896">bpo-38896</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40428">bpo-40428</a>.)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyAsyncGen_ClearFreeLists()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyContext_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyDict_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFloat_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFrame_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyList_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyMethod_ClearFreeList()</span></code> e <code class="docutils literal notranslate"><span class="pre">PyCFunction_ClearFreeList()</span></code>: as listas livres de objetos de método vinculado foram removidas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySet_ClearFreeList()</span></code>: a definição de lista livres foi removida no Python 3.4.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTuple_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyUnicode_ClearFreeList()</span></code>: a lista livre de Unicode foi removida no Python 3.3.</p></li>
</ul>
</li>
<li><p>Removida a função <code class="docutils literal notranslate"><span class="pre">_PyUnicode_ClearStaticStrings()</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39465">bpo-39465</a>.)</p></li>
<li><p>Removido <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_MATCH</span></code>. Ele foi descontinuado por <span class="target" id="index-79"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0393"><strong>PEP 393</strong></a> e quebrado desde o Python 3.3. A função <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Tailmatch" title="PyUnicode_Tailmatch"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Tailmatch()</span></code></a> pode ser usada em seu lugar. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>.)</p></li>
<li><p>Limpados os arquivos de cabeçalho de interfaces definidas, mas sem implementação. Os símbolos públicos da API sendo removidos são: <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGroupingLocale</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGrouping</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromWideArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Repr</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Digits</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_DigitsInit</span></code>, <code class="docutils literal notranslate"><span class="pre">PyFrame_ExtendStack</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyAIterWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNullImporter_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyCmpWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PySortWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNoArgsFunction</span></code>. (Contribuição de Pablo Galindo Salgado em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39372">bpo-39372</a>.)</p></li>
</ul>
</section>
</section>
<section id="notable-changes-in-python-3-9-1">
<h2>Alterações notáveis no Python 3.9.1<a class="headerlink" href="#notable-changes-in-python-3-9-1" title="Link permanente para este título">¶</a></h2>
<section id="id4">
<h3>typing<a class="headerlink" href="#id4" title="Link permanente para este título">¶</a></h3>
<p>O comportamento de <a class="reference internal" href="../library/typing.html#typing.Literal" title="typing.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Literal</span></code></a> foi alterado para ficar em conformidade com a:pep:<cite>586</cite> e para corresponder ao comportamento de verificadores de tipo estático especificados na PEP.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">Literal</span></code> agora elimina a duplicação de parâmetros.</p></li>
<li><p>Comparações de igualdade entre objetos <code class="docutils literal notranslate"><span class="pre">Literal</span></code> agora são independentes da ordem.</p></li>
<li><p>Comparações de <code class="docutils literal notranslate"><span class="pre">Literal</span></code> agora respeitam os tipos. Por exemplo, <code class="docutils literal notranslate"><span class="pre">Literal[0]</span> <span class="pre">==</span> <span class="pre">Literal[False]</span></code> avaliava anteriormente como <code class="docutils literal notranslate"><span class="pre">True</span></code>. Agora é <code class="docutils literal notranslate"><span class="pre">False</span></code>. Para oferecer suporte a essa mudança, o cache de tipo usado internamente agora oferece suporte a tipos de diferenciação.</p></li>
<li><p>Objetos <code class="docutils literal notranslate"><span class="pre">Literal</span></code> agora irão levantar uma exceção <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> durante as comparações de igualdade se algum de seus parâmetros não for <a class="reference internal" href="../glossary.html#term-hashable"><span class="xref std std-term">hasheável</span></a>. Observe que declarar <code class="docutils literal notranslate"><span class="pre">Literal</span></code> com parâmetros mutáveis não gerará um erro:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span> <span class="o">==</span> <span class="n">Literal</span><span class="p">[{</span><span class="kc">False</span><span class="p">}]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unhashable type: &#39;set&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>(Contribuição de Yurii Karabas em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42345">bpo-42345</a>.)</p>
</section>
<section id="macos-11-0-big-sur-and-apple-silicon-mac-support">
<h3>Suporte a macOS 11.0 (Big Sur) e Apple Silicon Mac<a class="headerlink" href="#macos-11-0-big-sur-and-apple-silicon-mac-support" title="Link permanente para este título">¶</a></h3>
<p>A partir do 3.9.1, o Python agora oferece suporte total à construção e execução no macOS 11.0 (Big Sur) e no Apple Silicon Macs (baseado na arquitetura <code class="docutils literal notranslate"><span class="pre">ARM64</span></code>). Uma nova variante de compilação universal, <code class="docutils literal notranslate"><span class="pre">universal2</span></code>, está agora disponível para suportar nativamente ambos <code class="docutils literal notranslate"><span class="pre">ARM64</span></code> e <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">64</span></code> em um conjunto de executáveis. Os binários também podem ser construídos em versões atuais do macOS para serem implantados em uma variedade de versões mais antigas do macOS (testado para 10.9), enquanto algumas funções e opções do sistema operacional mais recentes estão disponíveis condicionalmente com base na versão do sistema operacional em uso no tempo de execução (“ligação fraca”)</p>
<p>(Contribuição de Ronald Oussoren e Lawrence D’Anna em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41100">bpo-41100</a>.)</p>
</section>
</section>
<section id="notable-changes-in-python-3-9-2">
<h2>Alterações notáveis no Python 3.9.2<a class="headerlink" href="#notable-changes-in-python-3-9-2" title="Link permanente para este título">¶</a></h2>
<section id="collections-abc">
<h3>collections.abc<a class="headerlink" href="#collections-abc" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> genérica agora nivela os parâmetros de tipo, semelhante ao que <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a> faz atualmente. Isso significa que <code class="docutils literal notranslate"><span class="pre">collections.abc.Callable[[int,</span> <span class="pre">str],</span> <span class="pre">str]</span></code> terá <code class="docutils literal notranslate"><span class="pre">__args__</span></code> de <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">str,</span> <span class="pre">str)</span></code>; anteriormente era <code class="docutils literal notranslate"><span class="pre">([int,</span> <span class="pre">str],</span> <span class="pre">str)</span></code>. Para permitir esta mudança, <a class="reference internal" href="../library/types.html#types.GenericAlias" title="types.GenericAlias"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.GenericAlias</span></code></a> agora pode ter uma subclasse, e uma subclasse será retornada ao subscrever o tipo <code class="xref py py-class docutils literal notranslate"><span class="pre">Collections.abc.Callable</span></code>. O código que acessa os argumentos via <a class="reference internal" href="../library/typing.html#typing.get_args" title="typing.get_args"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_args()</span></code></a> ou <code class="docutils literal notranslate"><span class="pre">__args__</span></code> precisa levar em conta esta mudança. Um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> pode ser emitido para formas inválidas de parametrização <code class="xref py py-class docutils literal notranslate"><span class="pre">Collections.abc.Callable</span></code> que pode ter passado silenciosamente no Python 3.9.1. Esta <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> se tornará uma <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> no Python 3.10. (Contribuição de Ken Jin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42195">bpo-42195</a>.)</p>
</section>
<section id="urllib-parse">
<h3>urllib.parse<a class="headerlink" href="#urllib-parse" title="Link permanente para este título">¶</a></h3>
<p>Versões anteriores do Python permitiam o uso de <code class="docutils literal notranslate"><span class="pre">;</span></code> e <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como separadores de parâmetros de consulta nas funções <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qs()</span></code></a> e <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qsl()</span></code></a>. Devido a questões de segurança, e em conformidade com as recomendações mais recentes do W3C, isso foi alterado para permitir apenas uma única chave separadora, com <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como padrão. Esta mudança também afeta as funções <a class="reference internal" href="../library/cgi.html#cgi.parse" title="cgi.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse()</span></code></a> e <a class="reference internal" href="../library/cgi.html#cgi.parse_multipart" title="cgi.parse_multipart"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse_multipart()</span></code></a> já que elas usam as funções afetadas internamente. Para obter mais detalhes, consulte sua respectiva documentação. (Contribuição de Adam Goldschmidt, Senthil Kumaran e Ken Jin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42967">bpo-42967</a>.)</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Você deve verificar DeprecationWarning no seu código</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Operadores de mesclagem &amp; atualização de dicionário</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Novos métodos de strings para remover prefixos e sufixos</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Type hinting genéricos nas coleções padrão</a></li>
<li><a class="reference internal" href="#new-parser">Novo analisador sintático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a><ul>
<li><a class="reference internal" href="#zoneinfo">zoneinfo</a></li>
<li><a class="reference internal" href="#graphlib">graphlib</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#compileall">compileall</a></li>
<li><a class="reference internal" href="#concurrent-futures">concurrent.futures</a></li>
<li><a class="reference internal" href="#curses">curses</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#distutils">distutils</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#ftplib">ftplib</a></li>
<li><a class="reference internal" href="#gc">gc</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#ipaddress">ipaddress</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#nntplib">nntplib</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#pydoc">pydoc</a></li>
<li><a class="reference internal" href="#random">random</a></li>
<li><a class="reference internal" href="#signal">signal</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tracemalloc">tracemalloc</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#removed">Removidos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portando para Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Alterações na API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Alterações na API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Alterações de compilação</a></li>
<li><a class="reference internal" href="#c-api-changes">Alterações na API C</a><ul>
<li><a class="reference internal" href="#id1">Novas funcionalidades</a></li>
<li><a class="reference internal" href="#id2">Portando para Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Removidos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Alterações notáveis no Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4">typing</a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Suporte a macOS 11.0 (Big Sur) e Apple Silicon Mac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Alterações notáveis no Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc">collections.abc</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="3.10.html"
                        title="capítulo anterior">O que há de novo no Python 3.10</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="3.8.html"
                        title="próximo capítulo">O que há de novo no Python 3.8</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/3.9.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="O que há de novo no Python 3.8"
             >próximo</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="O que há de novo no Python 3.10"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Direitos autorais</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Última atualização em jun. 04, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>