
<!DOCTYPE html>

<html lang="pt_BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>O que há de novo no Python 3.8 &#8212; documentação Python 3.10.4</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Pesquisar dentro de documentação Python 3.10.4"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre esses documentos" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="copyright" title="Direitos autorais" href="../copyright.html" />
    <link rel="next" title="O que há de novo no Python 3.7" href="3.7.html" />
    <link rel="prev" title="O que há de novo no Python 3.9" href="3.9.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.8.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Busca rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.8</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#assignment-expressions">Expressões de atribuição</a></li>
<li><a class="reference internal" href="#positional-only-parameters">Parâmetros apenas posicionais</a></li>
<li><a class="reference internal" href="#parallel-filesystem-cache-for-compiled-bytecode-files">Cache do sistema de arquivos paralelo para arquivos de bytecode compilados</a></li>
<li><a class="reference internal" href="#debug-build-uses-the-same-abi-as-release-build">A compilação de depuração usa a mesma ABI da compilação de lançamento</a></li>
<li><a class="reference internal" href="#f-strings-support-for-self-documenting-expressions-and-debugging">O suporte a f-strings <code class="docutils literal notranslate"><span class="pre">=</span></code> para expressões de auto-documentação e depuração</a></li>
<li><a class="reference internal" href="#pep-578-python-runtime-audit-hooks">PEP 578: Ganchos de auditoria em tempo de execução Python</a></li>
<li><a class="reference internal" href="#pep-587-python-initialization-configuration">PEP 587: Configuração de Inicialização do Python</a></li>
<li><a class="reference internal" href="#pep-590-vectorcall-a-fast-calling-protocol-for-cpython">PEP 590: Vectorcall: um protocolo de chamada rápida para CPython</a></li>
<li><a class="reference internal" href="#pickle-protocol-5-with-out-of-band-data-buffers">Protocolo de Pickle 5 com buffers de dados fora da banda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a></li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#builtins">builtins</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#cprofile">cProfile</a></li>
<li><a class="reference internal" href="#csv">csv</a></li>
<li><a class="reference internal" href="#curses">curses</a></li>
<li><a class="reference internal" href="#ctypes">ctypes</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#gc">gc</a></li>
<li><a class="reference internal" href="#gettext">gettext</a></li>
<li><a class="reference internal" href="#gzip">gzip</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#io">io</a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#json-tool">json.tool</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#mmap">mmap</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#os-path">os.path</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#pickle">pickle</a></li>
<li><a class="reference internal" href="#plistlib">plistlib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#py-compile">py_compile</a></li>
<li><a class="reference internal" href="#shlex">shlex</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#ssl">ssl</a></li>
<li><a class="reference internal" href="#statistics">statistics</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#tokenize">tokenize</a></li>
<li><a class="reference internal" href="#tkinter">tkinter</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#weakref">weakref</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
<li><a class="reference internal" href="#xmlrpc">xmlrpc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#build-and-c-api-changes">Alterações a compilações e API C</a></li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#api-and-feature-removals">Remoção de APIs e recursos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-8">Portando para o Python 3.8</a><ul>
<li><a class="reference internal" href="#changes-in-python-behavior">Alterações no comportamento do Python</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Alterações na API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Alterações na API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a></li>
<li><a class="reference internal" href="#demos-and-tools">Ferramentas e daemons</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-1">Alterações notáveis no Python 3.8.1</a></li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-8">Alterações notáveis no Python 3.8.8</a></li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-12">Alterações notáveis no Python 3.8.12</a></li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="3.9.html"
                        title="capítulo anterior">O que há de novo no Python 3.9</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="3.7.html"
                        title="próximo capítulo">O que há de novo no Python 3.7</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/3.8.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.7.html" title="O que há de novo no Python 3.7"
             accesskey="N">próximo</a> |</li>
        <li class="right" >
          <a href="3.9.html" title="O que há de novo no Python 3.9"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.8</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-8">
<h1>O que há de novo no Python 3.8<a class="headerlink" href="#what-s-new-in-python-3-8" title="Link permanente para este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Editor</dt>
<dd class="field-odd"><p>Raymond Hettinger</p>
</dd>
</dl>
<p>This article explains the new features in Python 3.8, compared to 3.7.
Python 3.8 was released on October 14, 2019.
For full details, see the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p>
<section id="summary-release-highlights">
<h2>Resumo – Destaques da versão<a class="headerlink" href="#summary-release-highlights" title="Link permanente para este título">¶</a></h2>
</section>
<section id="new-features">
<h2>Novas funcionalidades<a class="headerlink" href="#new-features" title="Link permanente para este título">¶</a></h2>
<section id="assignment-expressions">
<h3>Expressões de atribuição<a class="headerlink" href="#assignment-expressions" title="Link permanente para este título">¶</a></h3>
<p>Existe uma nova sintaxe <code class="docutils literal notranslate"><span class="pre">:=</span></code> que atribui valores a variáveis como parte de uma expressão maior. É carinhosamente conhecido como “o operador morsa” (“the walrus operator”, em inglês) devido à sua semelhança com <a class="reference external" href="https://en.wikipedia.org/wiki/Walrus#/media/File:Pacific_Walrus_-_Bull_(8247646168).jpg">os olhos e presas de uma morsa</a>.</p>
<p>Neste exemplo, a expressão de atribuição ajuda a evitar a chamada de <a class="reference internal" href="../library/functions.html#len" title="len"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a> duas vezes:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;List is too long (</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> elements, expected &lt;= 10)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Um benefício semelhante surge durante a correspondência de expressões regulares, onde os objetos de correspondência são necessários duas vezes, uma vez para testar se ocorreu uma correspondência e outra para extrair um subgrupo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">discount</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">if</span> <span class="p">(</span><span class="n">mo</span> <span class="o">:=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)</span><span class="si">% d</span><span class="s1">iscount&#39;</span><span class="p">,</span> <span class="n">advertisement</span><span class="p">)):</span>
    <span class="n">discount</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span>
</pre></div>
</div>
<p>O operador também é útil com loops while que calculam um valor para testar a finalização do loop e, em seguida, precisam desse mesmo valor novamente no corpo do loop:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loop over fixed length blocks</span>
<span class="k">while</span> <span class="p">(</span><span class="n">block</span> <span class="o">:=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">256</span><span class="p">))</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
    <span class="n">process</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
</pre></div>
</div>
<p>Outro caso de uso motivador surge em compreensões de lista em que um valor calculado em uma condição de filtragem também é necessário no corpo da expressão:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">clean_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">clean_name</span> <span class="o">:=</span> <span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFC&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span> <span class="ow">in</span> <span class="n">allowed_names</span><span class="p">]</span>
</pre></div>
</div>
<p>Tente limitar o uso do operador da morsa para limpar os casos que reduzem a complexidade e melhoram a legibilidade.</p>
<p>Consulte <span class="target" id="index-47"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0572"><strong>PEP 572</strong></a> para uma descrição completa.</p>
<p>(Contribuído por Emily Morehouse em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35224">bpo-35224</a>.)</p>
</section>
<section id="positional-only-parameters">
<h3>Parâmetros apenas posicionais<a class="headerlink" href="#positional-only-parameters" title="Link permanente para este título">¶</a></h3>
<p>Existe uma nova sintaxe de parâmetro de função <code class="docutils literal notranslate"><span class="pre">/</span></code> para indicar que alguns parâmetros de função devem ser especificados posicionalmente e não podem ser usados como argumentos nomeados. Esta é a mesma notação mostrada por <code class="docutils literal notranslate"><span class="pre">help()</span></code> para funções C anotadas com a ferramenta <a class="reference external" href="https://docs.python.org/3/howto/clinic.html">Argument Clinic</a> de Larry Hastings.</p>
<p>No exemplo a seguir, os parâmetros <em>a</em> e <em>b</em> são apenas posicionais, enquanto <em>c</em> ou <em>d</em> podem ser posicionais ou nomeados e <em>e</em> ou <em>f</em> são obrigatoriamente nomeados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>A seguir, uma chamada válida:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
<p>Porém, essas chamadas são inválidas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>   <span class="c1"># b cannot be a keyword argument</span>
<span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">f</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>           <span class="c1"># e must be a keyword argument</span>
</pre></div>
</div>
<p>Um caso de uso para essa notação é que ele permite que funções puras do Python emulem completamente os comportamentos das funções codificadas em C existentes. Por exemplo, a função embutida <a class="reference internal" href="../library/functions.html#divmod" title="divmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">divmod()</span></code></a> não aceita argumentos nomeados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">divmod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">/</span><span class="p">):</span>
    <span class="s2">&quot;Emulate the built in divmod() function&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">//</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Outro caso de uso é impedir argumentos nomeados quando o nome do parâmetro não for útil. Por exemplo, a função embutida <a class="reference internal" href="../library/functions.html#len" title="len"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a> possui a assinatura <code class="docutils literal notranslate"><span class="pre">len(obj,</span> <span class="pre">/)</span></code>. Isso exclui chamadas estranhas, como:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>  <span class="c1"># The &quot;obj&quot; keyword argument impairs readability</span>
</pre></div>
</div>
<p>Um benefício adicional de marcar um parâmetro como somente posicional é que ele permite que o nome do parâmetro seja alterado no futuro sem risco de quebrar o código do cliente. Por exemplo, no módulo <a class="reference internal" href="../library/statistics.html#module-statistics" title="statistics: Mathematical statistics functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">statistics</span></code></a>, o nome do parâmetro <em>dist</em> pode ser alterado no futuro. Isso foi possível com a seguinte especificação de função:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">quantiles</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;exclusive&#39;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Como os parâmetros à esquerda de <code class="docutils literal notranslate"><span class="pre">/</span></code> não são expostos como possíveis palavras-chave, os nomes dos parâmetros permanecem disponíveis para uso em <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>         <span class="c1"># a and b are used in two ways</span>
<span class="go">10 20 {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}</span>
</pre></div>
</div>
<p>Isso simplifica bastante a implementação de funções e métodos que precisam aceitar argumentos nomeados arbitrários. Por exemplo, aqui está um trecho do código no módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Counter</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="c1"># Note &quot;iterable&quot; is a possible keyword argument</span>
</pre></div>
</div>
<p>Consulte a <span class="target" id="index-48"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0570"><strong>PEP 570</strong></a> para uma descrição completa.</p>
<p>(Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36540">bpo-36540</a>.)</p>
</section>
<section id="parallel-filesystem-cache-for-compiled-bytecode-files">
<h3>Cache do sistema de arquivos paralelo para arquivos de bytecode compilados<a class="headerlink" href="#parallel-filesystem-cache-for-compiled-bytecode-files" title="Link permanente para este título">¶</a></h3>
<p>A nova configuração <span class="target" id="index-49"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONPYCACHEPREFIX"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPYCACHEPREFIX</span></code></a> (também disponível como <a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> <code class="docutils literal notranslate"><span class="pre">pycache_prefix</span></code>) configura o cache implícito de bytecode para usar uma árvore paralela separada do sistema de arquivos, em vez dos subdiretórios padrão <code class="docutils literal notranslate"><span class="pre">__pycache__</span></code> dentro cada diretório fonte.</p>
<p>O local do cache é relatado em <a class="reference internal" href="../library/sys.html#sys.pycache_prefix" title="sys.pycache_prefix"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.pycache_prefix</span></code></a> (<a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> indica o local padrão nos subdiretórios <code class="docutils literal notranslate"><span class="pre">__pycache__</span></code>).</p>
<p>(Contribuição de Carl Meyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33499">bpo-33499</a>.)</p>
</section>
<section id="debug-build-uses-the-same-abi-as-release-build">
<h3>A compilação de depuração usa a mesma ABI da compilação de lançamento<a class="headerlink" href="#debug-build-uses-the-same-abi-as-release-build" title="Link permanente para este título">¶</a></h3>
<p>Agora, o Python usa a mesma ABI, seja ele compilado no modo de lançamento ou depuração. No Unix, quando o Python é compilado no modo de depuração, agora é possível carregar extensões C compiladas no modo de lançamento e extensões C compiladas usando a ABI estável.</p>
<p>Compilações de lançamento e <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">compilações de depuração</span></a> agora são compatíveis com ABI: definir a macro <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> não implica mais a macro <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code>, que introduz a única incompatibilidade ABI. A macro <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code>, que adiciona a função <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getobjects()</span></code> e a variável de ambiente <span class="target" id="index-50"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONDUMPREFS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONDUMPREFS</span></code></a>, pode ser configurada usando a nova opção de compilação <a class="reference internal" href="../using/configure.html#cmdoption-with-trace-refs"><code class="xref std std-option docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-trace-refs</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36465">bpo-36465</a>.)</p>
<p>No Unix, as extensões C não estão mais vinculadas ao libpython, exceto no Android e Cygwin. Agora é possível que um Python vinculado estaticamente carregue uma extensão C criada usando uma biblioteca compartilhada Python. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21536">bpo-21536</a>.)</p>
<p>No Unix, quando o Python é compilado no modo de depuração, a importação agora também procura extensões C compiladas no modo de lançamento e extensões C compiladas com a ABI estável. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36722">bpo-36722</a>.)</p>
<p>Para incorporar o Python em uma aplicação, uma nova opção <code class="docutils literal notranslate"><span class="pre">--embed</span></code> deve ser passada para <code class="docutils literal notranslate"><span class="pre">python3-config</span> <span class="pre">--libs</span> <span class="pre">--embed</span></code> para obter o <code class="docutils literal notranslate"><span class="pre">-lpython3.8</span></code> (vincula a aplicação ao libpython). Para dar suporte a 3.8 e versões mais antigas, tente <code class="docutils literal notranslate"><span class="pre">python3-config</span> <span class="pre">--libs</span> <span class="pre">--embed</span></code> primeiro e use como fallback para <code class="docutils literal notranslate"><span class="pre">python3-config</span> <span class="pre">--libs</span></code> (sem <code class="docutils literal notranslate"><span class="pre">--embed</span></code>) se o comando anterior falhar.</p>
<p>Adicione um módulo pkg-config <code class="docutils literal notranslate"><span class="pre">python-3.8-embed</span></code> para incorporar o Python em uma aplicação: <code class="docutils literal notranslate"><span class="pre">pkg-config</span> <span class="pre">python-3.8-embed</span> <span class="pre">--libs</span></code> inclui <code class="docutils literal notranslate"><span class="pre">-lpython3.8</span></code>. Para suportar tanto o 3.8 quanto o anterior, tente <code class="docutils literal notranslate"><span class="pre">pkg-config</span> <span class="pre">python-X.Y-embed</span> <span class="pre">--libs</span></code> primeiro e use como fallback <code class="docutils literal notranslate"><span class="pre">pkg-config</span> <span class="pre">python-X.Y</span> <span class="pre">--libs</span></code> (sem <code class="docutils literal notranslate"><span class="pre">--embed</span></code>) se o comando anterior falhar (substitua <code class="docutils literal notranslate"><span class="pre">X.Y</span></code> pela versão do Python).</p>
<p>Por outro lado, <code class="docutils literal notranslate"><span class="pre">pkg-config</span> <span class="pre">python3.8</span> <span class="pre">--libs</span></code> não contém mais <code class="docutils literal notranslate"><span class="pre">-lpython3.8</span></code>. As extensões C não devem estar vinculadas ao libpython (exceto no Android e Cygwin, cujos casos são tratados pelo script); essa alteração é retroativamente incompatível de propósito. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36721">bpo-36721</a>.)</p>
</section>
<section id="f-strings-support-for-self-documenting-expressions-and-debugging">
<h3>O suporte a f-strings <code class="docutils literal notranslate"><span class="pre">=</span></code> para expressões de auto-documentação e depuração<a class="headerlink" href="#f-strings-support-for-self-documenting-expressions-and-debugging" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um especificador <code class="docutils literal notranslate"><span class="pre">=</span></code> para <a class="reference internal" href="../glossary.html#term-f-string"><span class="xref std std-term">f-string</span></a>s. Uma f-string como <code class="docutils literal notranslate"><span class="pre">f'{expr=}'</span></code> será expandida para o texto da expressão, um sinal de igual e, em seguida, a representação da expressão avaliada. Por exemplo:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;eric_idle&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">member_since</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">1975</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">=}</span><span class="s1"> </span><span class="si">{</span><span class="n">member_since</span><span class="si">=}</span><span class="s1">&#39;</span>
<span class="go">&quot;user=&#39;eric_idle&#39; member_since=datetime.date(1975, 7, 31)&quot;</span>
</pre></div>
</div>
<p>O habitual <a class="reference internal" href="../reference/lexical_analysis.html#f-strings"><span class="std std-ref">f-string especificadores de formato</span></a> permite mais controle sobre como o resultado da expressão é exibido:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">-</span> <span class="n">member_since</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="si">=!s}</span><span class="s1">  </span><span class="si">{</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="si">=:</span><span class="s1">,d</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="go">&#39;user=eric_idle  delta.days=16,075&#39;</span>
</pre></div>
</div>
<p>O especificador <code class="docutils literal notranslate"><span class="pre">=</span></code> exibirá toda a expressão para que os cálculos possam ser mostrados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">theta</span><span class="si">=}</span><span class="s1">  </span><span class="si">{</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span><span class="si">=:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">theta=30  cos(radians(theta))=0.866</span>
</pre></div>
</div>
<p>(Contribuição de Eric V. Smith e Larry Hastings em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36817">bpo-36817</a>.)</p>
</section>
<section id="pep-578-python-runtime-audit-hooks">
<h3>PEP 578: Ganchos de auditoria em tempo de execução Python<a class="headerlink" href="#pep-578-python-runtime-audit-hooks" title="Link permanente para este título">¶</a></h3>
<p>O PEP adiciona um Gancho de Auditoria e um Gancho Aberto Verificado. Ambos estão disponíveis no Python e no código nativo, permitindo que aplicações e estruturas escritas em código Python puro aproveitem as notificações extras, além de permitir que incorporadores ou administradores de sistema implementem versões do Python onde a auditoria está sempre ativada.</p>
<p>Veja <span class="target" id="index-51"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0578"><strong>PEP 578</strong></a> para mais detalhes.</p>
</section>
<section id="pep-587-python-initialization-configuration">
<h3>PEP 587: Configuração de Inicialização do Python<a class="headerlink" href="#pep-587-python-initialization-configuration" title="Link permanente para este título">¶</a></h3>
<p>O: pep:<cite>587</cite> adiciona uma nova API C para configurar a Inicialização do Python, fornecendo um controle mais preciso de toda a configuração e melhores relatórios de erros.</p>
<p>Novas estruturas:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.PyPreConfig" title="PyPreConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyPreConfig</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.PyStatus" title="PyStatus"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyStatus</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.PyWideStringList" title="PyWideStringList"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyWideStringList</span></code></a></p></li>
</ul>
<p>Novas Funções:</p>
<ul class="simple">
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_Clear()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_InitIsolatedConfig()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_InitPythonConfig()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_Read()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_SetArgv()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_SetBytesArgv()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_SetBytesString()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyConfig_SetString()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyPreConfig_InitIsolatedConfig()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyPreConfig_InitPythonConfig()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_Error()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_Exception()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_Exit()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_IsError()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_IsExit()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_NoMemory()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStatus_Ok()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyWideStringList_Append()</span></code></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyWideStringList_Insert()</span></code></p></li>
<li><p><a class="reference internal" href="../c-api/veryhigh.html#c.Py_BytesMain" title="Py_BytesMain"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_BytesMain()</span></code></a></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_ExitStatusException()</span></code></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.Py_InitializeFromConfig" title="Py_InitializeFromConfig"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_InitializeFromConfig()</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.Py_PreInitialize" title="Py_PreInitialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_PreInitialize()</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.Py_PreInitializeFromArgs" title="Py_PreInitializeFromArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_PreInitializeFromArgs()</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.Py_PreInitializeFromBytesArgs" title="Py_PreInitializeFromBytesArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_PreInitializeFromBytesArgs()</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/init_config.html#c.Py_RunMain" title="Py_RunMain"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_RunMain()</span></code></a></p></li>
</ul>
<p>Esse PEP também adiciona os campos <code class="docutils literal notranslate"><span class="pre">_PyRuntimeState.preconfig</span></code> (tipo <a class="reference internal" href="../c-api/init_config.html#c.PyPreConfig" title="PyPreConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyPreConfig</span></code></a>) e``PyInterpreterState.config`` (tipo <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a>) campos a essas estruturas internas. <code class="docutils literal notranslate"><span class="pre">PyInterpreterState.config</span></code> se torna a nova configuração de referência, substituindo variáveis de configuração global e outras variáveis privadas.</p>
<p>Veja <a class="reference internal" href="../c-api/init_config.html#init-config"><span class="std std-ref">Configuração de Inicialização do Python</span></a> para a documentação.</p>
<p>Consulte a <span class="target" id="index-52"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0587"><strong>PEP 587</strong></a> para uma descrição completa.</p>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36763">bpo-36763</a>.)</p>
</section>
<section id="pep-590-vectorcall-a-fast-calling-protocol-for-cpython">
<h3>PEP 590: Vectorcall: um protocolo de chamada rápida para CPython<a class="headerlink" href="#pep-590-vectorcall-a-fast-calling-protocol-for-cpython" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../c-api/call.html#vectorcall"><span class="std std-ref">O protocolo vectorcall</span></a> é adicionado à API Python/C. Ele visa formalizar as otimizações existentes que já foram feitas para várias classes. Qualquer <a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">tipo estático</span></a> que implemente um chamável pode usar esse protocolo.</p>
<p>Atualmente, isso é provisório. O objetivo é torná-lo totalmente público no Python 3.9.</p>
<p>Consulte a <span class="target" id="index-53"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0590"><strong>PEP 590</strong></a> para uma descrição completa.</p>
<p>(Contribuição de Jeroen Demeyer, Mark Shannon e Petr Viktorin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36974">bpo-36974</a>.)</p>
</section>
<section id="pickle-protocol-5-with-out-of-band-data-buffers">
<h3>Protocolo de Pickle 5 com buffers de dados fora da banda<a class="headerlink" href="#pickle-protocol-5-with-out-of-band-data-buffers" title="Link permanente para este título">¶</a></h3>
<p>Quando <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> é usado para transferir grande quantidade de dados entre processos Python, a fim de tirar proveito do processamento com vários núcleos ou com várias máquinas, é importante otimizar a transferência reduzindo cópias de memória e, possivelmente, aplicando técnicas personalizadas, como como compactação dependente de dados.</p>
<p>O protocolo <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> 5 introduz suporte para buffers fora de banda, onde :dados compatíveis com pep:<cite>3118</cite> podem ser transmitidos separadamente do fluxo de pickle principal, a critério da camada de comunicação.</p>
<p>Consulte a <span class="target" id="index-54"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0574"><strong>PEP 574</strong></a> para uma descrição completa.</p>
<p>(Contribuição de Antoine Pitrou em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36785">bpo-36785</a>.)</p>
</section>
</section>
<section id="other-language-changes">
<h2>Outras mudanças na linguagem<a class="headerlink" href="#other-language-changes" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>A instrução <a class="reference internal" href="../reference/simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> era ilegal na cláusula <a class="reference internal" href="../reference/compound_stmts.html#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> devido a um problema com a implementação. No Python 3.8, essa restrição foi levantada. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32489">bpo-32489</a>.)</p></li>
<li><p>Os tipos <a class="reference internal" href="../library/functions.html#bool" title="bool"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> e <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a> agora têm o método <a class="reference internal" href="../library/stdtypes.html#int.as_integer_ratio" title="int.as_integer_ratio"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_integer_ratio()</span></code></a> como o encontrado em <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> e <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a>. Esta pequena extensão da API torna possível escrever <code class="docutils literal notranslate"><span class="pre">numerator,</span> <span class="pre">denominator</span> <span class="pre">=</span> <span class="pre">x.as_integer_ratio()</span></code> e fazer com que funcione em vários tipos numéricos. (Contribuição de Lisa Roach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33073">bpo-33073</a> e Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37819">bpo-37819</a>.)</p></li>
<li><p>Os construtores de <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> e <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a> agora usarão o método especial <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a>, se disponível, e o método correspondente <a class="reference internal" href="../reference/datamodel.html#object.__int__" title="object.__int__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#object.__float__" title="object.__float__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__float__()</span></code></a> ou <a class="reference internal" href="../reference/datamodel.html#object.__complex__" title="object.__complex__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__complex__()</span></code></a> não está disponível. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20092">bpo-20092</a>.)</p></li>
<li><p>Adicionado suporte a escapes <code class="docutils literal notranslate"><span class="pre">\N{name}</span></code> em <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">expressões</span> <span class="pre">regulares</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">notice</span> <span class="o">=</span> <span class="s1">&#39;Copyright © 2019&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copyright_year_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\N{copyright sign}\s*(\d</span><span class="si">{4}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="p">(</span><span class="n">copyright_year_pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">notice</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">2019</span>
</pre></div>
</div>
<p>(Contribuição de Jonathan Eunice e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30688">bpo-30688</a>.)</p>
</li>
<li><p>Dict e dictviews agora são iteráveis em ordem de inserção reversa usando <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><code class="xref py py-func docutils literal notranslate"><span class="pre">reversed()</span></code></a>. (Contribuição de Rémi Lapeyre em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33462">bpo-33462</a>.)</p></li>
<li><p>A sintaxe permitida para nomes de palavras-chave em chamadas de função foi ainda mais restrita. Em particular, <code class="docutils literal notranslate"><span class="pre">f((keyword)=arg)</span></code> não é mais permitido. Ele nunca teve a intenção de permitir mais do que um nome simples no lado esquerdo de um termo de atribuição de argumento nomeado. (Contribuição de Benjamin Peterson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34641">bpo-34641</a>.)</p></li>
<li><p>A descompactação iterável generalizada das instruções <a class="reference internal" href="../reference/simple_stmts.html#yield"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">yield</span></code></a> e <a class="reference internal" href="../reference/simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a> não requer mais parênteses. Isso traz a sintaxe <em>yield</em> e <em>return</em> uma melhor concordância com a sintaxe de atribuição normal:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">family</span><span class="p">):</span>
<span class="go">        lastname, *members = family.split()</span>
<span class="go">        return lastname.upper(), *members</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;simpsons homer marge bart lisa maggie&#39;</span><span class="p">)</span>
<span class="go">(&#39;SIMPSONS&#39;, &#39;homer&#39;, &#39;marge&#39;, &#39;bart&#39;, &#39;lisa&#39;, &#39;maggie&#39;)</span>
</pre></div>
</div>
<p>(Contribuição de David Cuthbert e Jordan Chapman em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32117">bpo-32117</a>.)</p>
</li>
<li><p>Quando uma vírgula está faltando em código como <code class="docutils literal notranslate"><span class="pre">[(10,</span> <span class="pre">20)</span> <span class="pre">(30,</span> <span class="pre">40)]</span></code>, o compilador exibe um <a class="reference internal" href="../library/exceptions.html#SyntaxWarning" title="SyntaxWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a> com uma sugestão útil. Isso melhora apenas tendo um <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> indicando que a primeira tupla não era chamável. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=15248">bpo-15248</a>.)</p></li>
<li><p>As operações aritméticas entre as subclasses de <a class="reference internal" href="../library/datetime.html#datetime.date" title="datetime.date"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a> ou <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> e <a class="reference internal" href="../library/datetime.html#datetime.timedelta" title="datetime.timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> agora retornam uma instância da subclasse, em vez da classe base. Isso também afeta o tipo de retorno de operações cuja implementação (direta ou indiretamente) utiliza aritmética de <a class="reference internal" href="../library/datetime.html#datetime.timedelta" title="datetime.timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a>, como <a class="reference internal" href="../library/datetime.html#datetime.datetime.astimezone" title="datetime.datetime.astimezone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">astimezone()</span></code></a>. (Contribuição de Paul Ganssle em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32417">bpo-32417</a>.)</p></li>
<li><p>Quando o interpretador Python é interrompido por Ctrl-C (SIGINT) e a exceção resultante <a class="reference internal" href="../library/exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a> não é capturada, o processo Python agora sai por meio de um sinal SIGINT ou com o código de saída correto, para que o processo de chamada possa detectar que foi encerrado devido a um Ctrl-C. Os shells no POSIX e Windows usam isso para finalizar corretamente os scripts em sessões interativas. (Contribuição do Google via Gregory P. Smith em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1054041">bpo-1054041</a>.)</p></li>
<li><p>Alguns estilos avançados de programação requerem a atualização do objeto <a class="reference internal" href="../library/types.html#types.CodeType" title="types.CodeType"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.CodeType</span></code></a> para uma função existente. Como os objetos código são imutáveis, um novo objeto código precisa ser criado, modelado no objeto código existente. Com 19 parâmetros, isso foi um pouco tedioso. Agora, o novo método <code class="docutils literal notranslate"><span class="pre">replace()</span></code> torna possível criar um clone com alguns parâmetros alterados.</p>
<p>Aqui está um exemplo que altera a função <code class="xref py py-func docutils literal notranslate"><span class="pre">Statistics.mean()</span></code> para impedir que o parâmetro <em>data</em> seja usado como argumento nomeado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">mean</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
<span class="go">40</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mean</span><span class="o">.</span><span class="vm">__code__</span> <span class="o">=</span> <span class="n">mean</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">co_posonlyargcount</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">mean() got some positional-only arguments passed as keyword arguments: &#39;data&#39;</span>
</pre></div>
</div>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37032">bpo-37032</a>.)</p>
</li>
<li><p>Para números inteiros, a forma de três argumentos da função <a class="reference internal" href="../library/functions.html#pow" title="pow"><code class="xref py py-func docutils literal notranslate"><span class="pre">pow()</span></code></a> agora permite que o expoente seja negativo no caso em que a base é relativamente primária ao módulo. Em seguida, calcula um inverso modular para a base quando o expoente é <code class="docutils literal notranslate"><span class="pre">-1</span></code> e uma potência adequada desse inverso para outros expoentes negativos. Por exemplo, para calcular o <a class="reference external" href="https://en.wikipedia.org/wiki/Modular_multiplicative_inverse">inverso multiplicativo modular</a> de 38 módulo 137, escreva:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">137</span><span class="p">)</span>
<span class="go">119</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">119</span> <span class="o">*</span> <span class="mi">38</span> <span class="o">%</span> <span class="mi">137</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Inversos modulares surgem na solução de <a class="reference external" href="https://en.wikipedia.org/wiki/Diophantine_equation">equações diofantinas lineares</a>. Por exemplo, para encontrar soluções inteiras para <code class="docutils literal notranslate"><span class="pre">4258𝑥</span> <span class="pre">+</span> <span class="pre">147𝑦</span> <span class="pre">=</span> <span class="pre">369</span></code>, primeiro reescreva como <code class="docutils literal notranslate"><span class="pre">4258𝑥</span> <span class="pre">≡</span> <span class="pre">369</span> <span class="pre">(mod</span> <span class="pre">147)</span></code> e depois resolva:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">369</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">4258</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">147</span><span class="p">)</span> <span class="o">%</span> <span class="mi">147</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4258</span> <span class="o">*</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">369</span><span class="p">)</span> <span class="o">//</span> <span class="o">-</span><span class="mi">147</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">4258</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">147</span> <span class="o">*</span> <span class="n">y</span>
<span class="go">369</span>
</pre></div>
</div>
<p>(Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36027">bpo-36027</a>.)</p>
</li>
<li><p>As compreensões de dict foram sincronizadas com literais de dict, para que a chave seja computada primeiro e o valor em segundo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Dict comprehension</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cast</span> <span class="o">=</span> <span class="p">{</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;role? &#39;</span><span class="p">):</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;actor? &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span>
<span class="go">role? King Arthur</span>
<span class="go">actor? Chapman</span>
<span class="go">role? Black Knight</span>
<span class="go">actor? Cleese</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Dict literal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cast</span> <span class="o">=</span> <span class="p">{</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;role? &#39;</span><span class="p">):</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;actor? &#39;</span><span class="p">)}</span>
<span class="go">role? Sir Robin</span>
<span class="go">actor? Eric Idle</span>
</pre></div>
</div>
<p>A ordem de execução garantida é útil nas expressões de atribuição, porque as variáveis atribuídas na expressão de chave estarão disponíveis na expressão de valor:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Martin von Löwis&#39;</span><span class="p">,</span> <span class="s1">&#39;Łukasz Langa&#39;</span><span class="p">,</span> <span class="s1">&#39;Walter Dörwald&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{(</span><span class="n">n</span> <span class="o">:=</span> <span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFC&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="p">:</span> <span class="n">n</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">}</span>
<span class="go">{&#39;martin von löwis&#39;: &#39;Martin von Löwis&#39;,</span>
<span class="go"> &#39;łukasz langa&#39;: &#39;Łukasz Langa&#39;,</span>
<span class="go"> &#39;walter dörwald&#39;: &#39;Walter Dörwald&#39;}</span>
</pre></div>
</div>
<p>(Contribuição de Jörn Heissler em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35224">bpo-35224</a>.)</p>
</li>
<li><p>O método <a class="reference internal" href="../library/pickle.html#object.__reduce__" title="object.__reduce__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__reduce__()</span></code></a> agora pode retornar uma tupla de dois a seis elementos. Anteriormente, cinco era o limite. O novo sexto elemento opcional é um chamável com uma assinatura <code class="docutils literal notranslate"><span class="pre">(obj,</span> <span class="pre">state)</span></code>. Isso permite o controle direto sobre o comportamento de atualização de estado de um objeto específico. Caso contrário, <em>None</em>, esse chamável terá prioridade sobre o método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__setstate__()</span></code> do objeto. (Contribuição de Pierre Glaser e Olivier Grisel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35900">bpo-35900</a>.)</p></li>
</ul>
</section>
<section id="new-modules">
<h2>Novos módulos<a class="headerlink" href="#new-modules" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>O novo módulo <a class="reference internal" href="../library/importlib.metadata.html#module-importlib.metadata" title="importlib.metadata: The implementation of the importlib metadata."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.metadata</span></code></a> fornece suporte (provisório) para a leitura de metadados de pacotes de terceiros. Por exemplo, ele pode extrair o número da versão de um pacote instalado, a lista de pontos de entrada e muito mais:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note following example requires that the popular &quot;requests&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># package has been installed.</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">importlib.metadata</span> <span class="kn">import</span> <span class="n">version</span><span class="p">,</span> <span class="n">requires</span><span class="p">,</span> <span class="n">files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">version</span><span class="p">(</span><span class="s1">&#39;requests&#39;</span><span class="p">)</span>
<span class="go">&#39;2.22.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">requires</span><span class="p">(</span><span class="s1">&#39;requests&#39;</span><span class="p">))</span>
<span class="go">[&#39;chardet (&lt;3.1.0,&gt;=3.0.2)&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">files</span><span class="p">(</span><span class="s1">&#39;requests&#39;</span><span class="p">))[:</span><span class="mi">5</span><span class="p">]</span>
<span class="go">[PackagePath(&#39;requests-2.22.0.dist-info/INSTALLER&#39;),</span>
<span class="go"> PackagePath(&#39;requests-2.22.0.dist-info/LICENSE&#39;),</span>
<span class="go"> PackagePath(&#39;requests-2.22.0.dist-info/METADATA&#39;),</span>
<span class="go"> PackagePath(&#39;requests-2.22.0.dist-info/RECORD&#39;),</span>
<span class="go"> PackagePath(&#39;requests-2.22.0.dist-info/WHEEL&#39;)]</span>
</pre></div>
</div>
<p>(Contribuição de Barry Warsaw e Jason R. Coombs em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34632">bpo-34632</a>.)</p>
</li>
</ul>
</section>
<section id="improved-modules">
<h2>Módulos melhorados<a class="headerlink" href="#improved-modules" title="Link permanente para este título">¶</a></h2>
<section id="ast">
<h3>ast<a class="headerlink" href="#ast" title="Link permanente para este título">¶</a></h3>
<p>Os nós de AST agora têm os atributos <code class="docutils literal notranslate"><span class="pre">end_lineno</span></code> e <code class="docutils literal notranslate"><span class="pre">end_col_offset</span></code>, que fornecem a localização precisa do final do nó. (Isso se aplica apenas aos nós que possuem os atributos <code class="docutils literal notranslate"><span class="pre">lineno</span></code> e <code class="docutils literal notranslate"><span class="pre">col_offset</span></code>.)</p>
<p>Nova função <a class="reference internal" href="../library/ast.html#ast.get_source_segment" title="ast.get_source_segment"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.get_source_segment()</span></code></a> retorna o código-fonte para um nó AST específico.</p>
<p>(Contribuição de Ivan Levkivskyi em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33416">bpo-33416</a>.)</p>
<p>A função <a class="reference internal" href="../library/ast.html#ast.parse" title="ast.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.parse()</span></code></a> possui alguns novos sinalizadores:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type_comments=True</span></code> faz com que retorne o texto dos comentários de tipos de <span class="target" id="index-55"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> e <span class="target" id="index-56"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0526"><strong>PEP 526</strong></a> associados a determinados nós AST;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode='func_type'</span></code> pode ser usado para analisar “comentários do tipo de assinatura” do <span class="target" id="index-57"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> (retornados para nós AST de definição de função);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_version=(3,</span> <span class="pre">N)</span></code> permite especificar uma versão anterior do Python 3. Por exemplo, <code class="docutils literal notranslate"><span class="pre">feature_version=(3,</span> <span class="pre">4)</span></code> tratará <a class="reference internal" href="../reference/compound_stmts.html#async"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span></code></a> e <a class="reference internal" href="../reference/expressions.html#await"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">await</span></code></a> como palavras não reservadas.</p></li>
</ul>
<p>(Contribuição de Guido van Rossum em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35766">bpo-35766</a>.)</p>
</section>
<section id="asyncio">
<h3>asyncio<a class="headerlink" href="#asyncio" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> passou da API provisória para a estável. Esta função pode ser usada para executar uma <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">corrotina</span></a> e retornar o resultado enquanto gerencia automaticamente o loop de eventos. Por exemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>Isso é <em>aproximadamente</em> equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>A implementação real é significativamente mais complexa. Assim, <a class="reference internal" href="../library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> deve ser a maneira preferida de executar programas assíncronos.</p>
<p>(Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32314">bpo-32314</a>.)</p>
<p>A execução de <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">asyncio</span></code> lança um REPL nativo assíncrono. Isso permite a experimentação rápida de código que possui um nível superior <a class="reference internal" href="../reference/expressions.html#await"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">await</span></code></a>. Não é mais necessário chamar diretamente <code class="docutils literal notranslate"><span class="pre">asyncio.run()</span></code>, o que geraria um novo loop de evento a cada chamada:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python -m asyncio
asyncio REPL 3.8.0
Use &quot;await&quot; directly instead of &quot;asyncio.run()&quot;.
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt; await asyncio.sleep(10, result=&#39;hello&#39;)
hello
</pre></div>
</div>
<p>(Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37028">bpo-37028</a>.)</p>
<p>A exceção <a class="reference internal" href="../library/asyncio-exceptions.html#asyncio.CancelledError" title="asyncio.CancelledError"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.CancelledError</span></code></a> agora herda de <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code></a> em vez de <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> e não mais herda de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.CancelledError" title="concurrent.futures.CancelledError"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.CancelledError</span></code></a>. (Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32528">bpo-32528</a>.)</p>
<p>No Windows, o loop de eventos padrão é agora <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34687">bpo-34687</a>.)</p>
<p><a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> agora também tem suporte a UDP. (Contribuição de Adam Meily e Andrew Svetlov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29883">bpo-29883</a>.)</p>
<p><a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> pode agora ser interrompido por <a class="reference internal" href="../library/exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a> (“CTRL+C”). (Contribuição de Vladimir Matveev em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23057">bpo-23057</a>.)</p>
<p>Adicionado <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task.get_coro" title="asyncio.Task.get_coro"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.get_coro()</span></code></a> para obter a corrotina de dentro de um <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>. (Contribuição de Alex Grönholm em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36999">bpo-36999</a>.)</p>
<p>As tarefas de asyncio agora podem ser nomeadas, passando o argumento nomeado <code class="docutils literal notranslate"><span class="pre">name</span></code> para <a class="reference internal" href="../library/asyncio-task.html#asyncio.create_task" title="asyncio.create_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.create_task()</span></code></a> ou o método de loop de evento <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_task" title="asyncio.loop.create_task"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_task()</span></code></a> ou chamando o método <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task.set_name" title="asyncio.Task.set_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_name()</span></code></a> no objeto de tarefa. O nome da tarefa é visível na saída de <code class="docutils literal notranslate"><span class="pre">repr()</span></code> de <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a> e também pode ser recuperado usando o método <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task.get_name" title="asyncio.Task.get_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_name()</span></code></a>. (Contribuição de Alex Grönholm em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34270">bpo-34270</a>.)</p>
<p>Adicionado suporte a <a class="reference external" href="https://en.wikipedia.org/wiki/Happy_Eyeballs">Happy Eyeballs</a> para <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.loop.create_connection()</span></code></a>. Para especificar o comportamento, dois novos parâmetros foram adicionados: <em>happy_eyeballs_delay</em> e <em>interleave</em>. O algoritmo Happy Eyeballs melhora a capacidade de resposta em aplicativos compatíveis com IPv4 e IPv6, tentando conectar-se simultaneamente usando os dois. (Contribuição de twisteroid ambassador em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33530">bpo-33530</a>.)</p>
</section>
<section id="builtins">
<h3>builtins<a class="headerlink" href="#builtins" title="Link permanente para este título">¶</a></h3>
<p>A função embutida <a class="reference internal" href="../library/functions.html#compile" title="compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">compile()</span></code></a> foi aprimorada para aceitar o sinalizador <code class="docutils literal notranslate"><span class="pre">ast.PyCF_ALLOW_TOP_LEVEL_AWAIT</span></code>. Com esse novo sinalizador passado, <a class="reference internal" href="../library/functions.html#compile" title="compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">compile()</span></code></a> permitirá construções de nível superior <code class="docutils literal notranslate"><span class="pre">await</span></code>, <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> e <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> que geralmente são consideradas sintaxe inválida. O objeto de código assíncrono marcado com o sinalizador <code class="docutils literal notranslate"><span class="pre">CO_COROUTINE</span></code> pode ser retornado. (Contribuição de Matthias Bussonnier em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34616">bpo-34616</a>)</p>
</section>
<section id="collections">
<h3>collections<a class="headerlink" href="#collections" title="Link permanente para este título">¶</a></h3>
<p>O método <a class="reference internal" href="../library/collections.html#collections.somenamedtuple._asdict" title="collections.somenamedtuple._asdict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_asdict()</span></code></a> para <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">collections.namedtuple()</span></code></a> agora retorna a <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> em vez de um <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>. Isso funciona porque os dict regulares garantem pedidos desde o Python 3.7. Se os recursos extras de <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code> forem necessários, a solução sugerida é converter o resultado no tipo desejado: <code class="docutils literal notranslate"><span class="pre">OrderedDict(nt._asdict())</span></code>. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35864">bpo-35864</a>.)</p>
</section>
<section id="cprofile">
<h3>cProfile<a class="headerlink" href="#cprofile" title="Link permanente para este título">¶</a></h3>
<p>A classe <a class="reference internal" href="../library/profile.html#profile.Profile" title="profile.Profile"><code class="xref py py-class docutils literal notranslate"><span class="pre">cProfile.Profile</span></code></a> agora pode ser usada como um gerenciador de contexto. Perfile um bloco de código executando:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cProfile</span>

<span class="k">with</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span> <span class="k">as</span> <span class="n">profiler</span><span class="p">:</span>
      <span class="c1"># code to be profiled</span>
      <span class="o">...</span>
</pre></div>
</div>
<p>(Contribuição de Scott Sanderson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29235">bpo-29235</a>.)</p>
</section>
<section id="csv">
<h3>csv<a class="headerlink" href="#csv" title="Link permanente para este título">¶</a></h3>
<p>O <a class="reference internal" href="../library/csv.html#csv.DictReader" title="csv.DictReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">csv.DictReader</span></code></a> agora retorna instâncias de <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> em vez de um <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>. Agora, a ferramenta é mais rápida e utiliza menos memória enquanto preserva a ordem dos campos. (Contribuição de Michael Selik em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34003">bpo-34003</a>.)</p>
</section>
<section id="curses">
<h3>curses<a class="headerlink" href="#curses" title="Link permanente para este título">¶</a></h3>
<p>Adicionada uma nova variável contendo informações de versão estruturada para a biblioteca ncurses subjacente: <a class="reference internal" href="../library/curses.html#curses.ncurses_version" title="curses.ncurses_version"><code class="xref py py-data docutils literal notranslate"><span class="pre">ncurses_version</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31680">bpo-31680</a>.)</p>
</section>
<section id="ctypes">
<h3>ctypes<a class="headerlink" href="#ctypes" title="Link permanente para este título">¶</a></h3>
<p>No Windows, <a class="reference internal" href="../library/ctypes.html#ctypes.CDLL" title="ctypes.CDLL"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDLL</span></code></a> e subclasses agora aceitam um parâmetro <em>winmode</em> para especificar sinalizadores para a chamada subjacente <code class="docutils literal notranslate"><span class="pre">LoadLibraryEx</span></code>. Os sinalizadores padrão são definidos para carregar apenas dependências da DLL em locais confiáveis, incluindo o caminho em que a DLL está armazenada (se um caminho completo ou parcial for usado para carregar a DLL inicial) e os caminhos adicionados por <a class="reference internal" href="../library/os.html#os.add_dll_directory" title="os.add_dll_directory"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_dll_directory()</span></code></a> . (Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36085">bpo-36085</a>.)</p>
</section>
<section id="datetime">
<h3>datetime<a class="headerlink" href="#datetime" title="Link permanente para este título">¶</a></h3>
<p>Adicionados novos construtores alternativos <a class="reference internal" href="../library/datetime.html#datetime.date.fromisocalendar" title="datetime.date.fromisocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.date.fromisocalendar()</span></code></a> e <a class="reference internal" href="../library/datetime.html#datetime.datetime.fromisocalendar" title="datetime.datetime.fromisocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.datetime.fromisocalendar()</span></code></a>, que constroem objetos de <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code> e <a class="reference internal" href="../library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> respectivamente do ano ISO, número da semana e dia da semana; estes são o inverso do método <code class="docutils literal notranslate"><span class="pre">isocalendar</span></code> de cada classe. (Contribuição de Paul Ganssle em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36004">bpo-36004</a>.)</p>
</section>
<section id="functools">
<h3>functools<a class="headerlink" href="#functools" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/functools.html#functools.lru_cache" title="functools.lru_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.lru_cache()</span></code></a> agora pode ser usado como um decorador direto, e não como uma função retornando um decorador. Portanto, agora ambos são suportados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@lru_cache</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>(Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36772">bpo-36772</a>.)</p>
<p>Adicionado um novo decorador <a class="reference internal" href="../library/functools.html#functools.cached_property" title="functools.cached_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.cached_property()</span></code></a>, para propriedades computadas armazenadas em cache durante toda a vida útil da instância.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">statistics</span>

<span class="k">class</span> <span class="nc">Dataset</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence_of_numbers</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">sequence_of_numbers</span>

   <span class="nd">@functools</span><span class="o">.</span><span class="n">cached_property</span>
   <span class="k">def</span> <span class="nf">variance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">statistics</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribuição de Carl Meyer em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21145">bpo-21145</a>)</p>
<p>Adicionado um novo decorador <a class="reference internal" href="../library/functools.html#functools.singledispatchmethod" title="functools.singledispatchmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.singledispatchmethod()</span></code></a> que converte métodos em <a class="reference internal" href="../glossary.html#term-generic-function"><span class="xref std std-term">funções genéricas</span></a> usando <a class="reference internal" href="../glossary.html#term-single-dispatch"><span class="xref std std-term">despacho único</span></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">singledispatchmethod</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">suppress</span>

<span class="k">class</span> <span class="nc">TaskManager</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

    <span class="nd">@singledispatchmethod</span>
    <span class="k">def</span> <span class="nf">discard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">suppress</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@discard</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">):</span>
        <span class="n">targets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">]</span>
</pre></div>
</div>
<p>(Contribuição de Ethan Smith em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32380">bpo-32380</a>)</p>
</section>
<section id="gc">
<h3>gc<a class="headerlink" href="#gc" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/gc.html#gc.get_objects" title="gc.get_objects"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_objects()</span></code></a> agora pode receber um parâmetro opcional <em>generation</em> indicando uma geração da qual obter objetos. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36016">bpo-36016</a>.)</p>
</section>
<section id="gettext">
<h3>gettext<a class="headerlink" href="#gettext" title="Link permanente para este título">¶</a></h3>
<p>Adicionado <a class="reference internal" href="../library/gettext.html#gettext.pgettext" title="gettext.pgettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">pgettext()</span></code></a> e suas variantes. (Contribuição de Franz Glasner, Éric Araujo e Cheryl Sabella em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2504">bpo-2504</a>.)</p>
</section>
<section id="gzip">
<h3>gzip<a class="headerlink" href="#gzip" title="Link permanente para este título">¶</a></h3>
<p>Adicionado o parâmetro <em>mtime</em> em <a class="reference internal" href="../library/gzip.html#gzip.compress" title="gzip.compress"><code class="xref py py-func docutils literal notranslate"><span class="pre">gzip.compress()</span></code></a> para saída reproduzível. (Contribuição de Guo Ci Teo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34898">bpo-34898</a>.)</p>
<p>A exceção <a class="reference internal" href="../library/gzip.html#gzip.BadGzipFile" title="gzip.BadGzipFile"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BadGzipFile</span></code></a> agora é levantada em vez de <a class="reference internal" href="../library/exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> para certos tipos de arquivos gzip inválidos ou corrompidos. (Contribuição de Filip Gruszczyński, Michele Orrù e Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6584">bpo-6584</a>.)</p>
</section>
<section id="idle-and-idlelib">
<h3>IDLE e idlelib<a class="headerlink" href="#idle-and-idlelib" title="Link permanente para este título">¶</a></h3>
<p>A saída em N linhas (50 por padrão) é compactada até um limite inferior. N pode ser alterado na seção PyShell da página General da caixa de diálogo Settings. Menos linhas, mas possivelmente extra longas, podem ser espremidas clicando com o botão direito do mouse na saída. A saída compactada pode ser expandida no local clicando duas vezes no botão ou na área de transferência ou em uma janela separada clicando com o botão direito do mouse. (Contribuição de Tal Einat em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1529353">bpo-1529353</a>.)</p>
<p>Adiciona “Run Customized” ao menu Executar para executar um módulo com configurações personalizadas. Quaisquer argumentos de linha de comando inseridos são adicionados ao sys.argv. Eles também reaparecem na caixa para a próxima execução personalizada. Pode-se também suprimir a reinicialização normal do módulo principal do console. (Contribuição de Cheryl Sabella, Terry Jan Reedy e outros em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5680">bpo-5680</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37627">bpo-37627</a>.)</p>
<p>Adicionados números de linha opcionais para janelas do editor IDLE. O Windows é aberto sem números de linha, a menos que definido de outra forma na guia General da caixa de diálogo de configuração. Os números de linha de uma janela existente são mostrados e ocultos no menu Opções. (Contribuição de Tal Einat e Saimadhav Heblikar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17535">bpo-17535</a>.)</p>
<p>A codificação nativa do sistema operacional agora é usada para converter entre strings Python e objetos Tcl. Isso permite que o IDLE trabalhe com emoji e outros caracteres não BMP. Esses caracteres podem ser exibidos ou copiados e colados na ou da área de transferência. A conversão de strings de Tcl para Python e de volta agora nunca falha. (Muitas pessoas trabalharam nisso por oito anos, mas o problema foi finalmente resolvido por Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=13153">bpo-13153</a>.)</p>
<p>Novo em 3.8.1:</p>
<p>Adiciona a opção para ativar e desativar o piscar do cursor. (Contribuição de Zackery Spytz na <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4603">bpo-4603</a>.)</p>
<p>A tecla Escape agora fecha as janelas de conclusão IDLE. (Contribuição de Johnny Najera em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38944">bpo-38944</a>.)</p>
<p>As alterações acima foram suportadas para versões de manutenção 3.7.</p>
<p>Adiciona argumentos nomeados à lista de completamento de nome de módulo. (Contribuição de Terry J. Reedy em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37765">bpo-37765</a>.)</p>
</section>
<section id="inspect">
<h3>inspect<a class="headerlink" href="#inspect" title="Link permanente para este título">¶</a></h3>
<p>A função <a class="reference internal" href="../library/inspect.html#inspect.getdoc" title="inspect.getdoc"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getdoc()</span></code></a> agora pode encontrar docstrings para <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> se esse atributo for <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> onde os valores são docstrings. Isso fornece opções de documentação semelhantes às que já temos para <a class="reference internal" href="../library/functions.html#property" title="property"><code class="xref py py-func docutils literal notranslate"><span class="pre">property()</span></code></a>, <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a> e <a class="reference internal" href="../library/functions.html#staticmethod" title="staticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">staticmethod()</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AudioClip</span><span class="p">:</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bit_rate&#39;</span><span class="p">:</span> <span class="s1">&#39;expressed in kilohertz to one decimal place&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="s1">&#39;in seconds, rounded up to an integer&#39;</span><span class="p">}</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bit_rate</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bit_rate</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">bit_rate</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36326">bpo-36326</a>.)</p>
</section>
<section id="io">
<h3>io<a class="headerlink" href="#io" title="Link permanente para este título">¶</a></h3>
<p>No modo de desenvolvimento (<a class="reference internal" href="../using/cmdline.html#cmdoption-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> <code class="docutils literal notranslate"><span class="pre">env</span></code>) e na <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">compilação de depuração</span></a>, o finalizador <a class="reference internal" href="../library/io.html#io.IOBase" title="io.IOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.IOBase</span></code></a> agora registra a exceção se o método <code class="docutils literal notranslate"><span class="pre">close()</span></code> falhar. A exceção é ignorada silenciosamente por padrão na compilação de lançamento. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=18748">bpo-18748</a>.)</p>
</section>
<section id="itertools">
<h3>itertools<a class="headerlink" href="#itertools" title="Link permanente para este título">¶</a></h3>
<p>A função <a class="reference internal" href="../library/itertools.html#itertools.accumulate" title="itertools.accumulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.accumulate()</span></code></a> adicionou uma opção de argumento nomeado <em>initial</em> para especificar um valor inicial:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">accumulate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="n">initial</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>
<span class="go">[1000, 1010, 1015, 1045, 1060]</span>
</pre></div>
</div>
<p>(Contribuído por Lisa Roach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34659">bpo-34659</a>.)</p>
</section>
<section id="json-tool">
<h3>json.tool<a class="headerlink" href="#json-tool" title="Link permanente para este título">¶</a></h3>
<p>Adiciona a opção <code class="docutils literal notranslate"><span class="pre">--json-lines</span></code> para analisar cada linha de entrada como um objeto JSON separado. (Contribuição de Weipeng Hong em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31553">bpo-31553</a>.)</p>
</section>
<section id="logging">
<h3>logging<a class="headerlink" href="#logging" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um argumento nomeado <em>force</em> em <a class="reference internal" href="../library/logging.html#logging.basicConfig" title="logging.basicConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.basicConfig()</span></code></a> Quando definido como true, qualquer manipulador existente anexado ao logger raiz é removido e fechado antes de executar a configuração especificada pelos outros argumentos.</p>
<p>Isso resolve um problema de longa data. Depois que um logger ou <em>basicConfig()</em> foi chamado, as chamadas subsequentes para <em>basicConfig()</em> foram ignoradas silenciosamente. Isso dificultava a atualização, a experimentação ou o ensino das várias opções de configuração de log usando o prompt interativo ou um bloco de notas de Jupyter.</p>
<p>(Sugestão de Raymond Hettinger, implementação de Dong-hee Na e revisão de Vinay Sajip em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33897">bpo-33897</a>.)</p>
</section>
<section id="math">
<h3>math<a class="headerlink" href="#math" title="Link permanente para este título">¶</a></h3>
<p>Adicionada nova função <a class="reference internal" href="../library/math.html#math.dist" title="math.dist"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.dist()</span></code></a> para calcular a distância euclidiana entre dois pontos. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33089">bpo-33089</a>.)</p>
<p>Expandida a função <a class="reference internal" href="../library/math.html#math.hypot" title="math.hypot"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.hypot()</span></code></a> para manipular várias dimensões. Anteriormente, suportava apenas o caso 2-D. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33089">bpo-33089</a>.)</p>
<p>Adicionada nova função, <a class="reference internal" href="../library/math.html#math.prod" title="math.prod"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.prod()</span></code></a>, como função análoga a <a class="reference internal" href="../library/functions.html#sum" title="sum"><code class="xref py py-func docutils literal notranslate"><span class="pre">sum()</span></code></a> que retorna o produto de um valor ‘start’ (padrão: 1) vezes uma iterável de números:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prior</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">likelihoods</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.625</span><span class="p">,</span> <span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">likelihoods</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">prior</span><span class="p">)</span>
<span class="go">0.126</span>
</pre></div>
</div>
<p>(Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35606">bpo-35606</a>.)</p>
<p>Adicionadas duas novas funções combinatórias <a class="reference internal" href="../library/math.html#math.perm" title="math.perm"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.perm()</span></code></a> e <a class="reference internal" href="../library/math.html#math.comb" title="math.comb"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.comb()</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">perm</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>    <span class="c1"># Permutations of 10 things taken 3 at a time</span>
<span class="go">720</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">comb</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>    <span class="c1"># Combinations of 10 things taken 3 at a time</span>
<span class="go">120</span>
</pre></div>
</div>
<p>(Contribuição de Yash Aggarwal, Keller Fuchs, Serhiy Storchaka e Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37128">bpo-37128</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37178">bpo-37178</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35431">bpo-35431</a>.)</p>
<p>Adicionada uma nova função <a class="reference internal" href="../library/math.html#math.isqrt" title="math.isqrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isqrt()</span></code></a> para calcular raízes quadradas inteiras precisas sem conversão para ponto flutuante. A nova função suporta números inteiros arbitrariamente grandes. É mais rápido que <code class="docutils literal notranslate"><span class="pre">floor(sqrt(n))</span></code>, mas mais lento que <a class="reference internal" href="../library/math.html#math.sqrt" title="math.sqrt"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.sqrt()</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="mi">650320427</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">r</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isqrt</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>         <span class="c1"># correct</span>
<span class="go">650320426</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">floor</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>   <span class="c1"># incorrect</span>
<span class="go">650320427</span>
</pre></div>
</div>
<p>(Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36887">bpo-36887</a>.)</p>
<p>A função <a class="reference internal" href="../library/math.html#math.factorial" title="math.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.factorial()</span></code></a> não aceita mais argumentos que não são parecidos com int. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33083">bpo-33083</a>.)</p>
</section>
<section id="mmap">
<h3>mmap<a class="headerlink" href="#mmap" title="Link permanente para este título">¶</a></h3>
<p>A classe <a class="reference internal" href="../library/mmap.html#mmap.mmap" title="mmap.mmap"><code class="xref py py-class docutils literal notranslate"><span class="pre">mmap.mmap</span></code></a> agora possui o método <a class="reference internal" href="../library/mmap.html#mmap.mmap.madvise" title="mmap.mmap.madvise"><code class="xref py py-meth docutils literal notranslate"><span class="pre">madvise()</span></code></a> para acessar a chamada do sistema <code class="docutils literal notranslate"><span class="pre">madvise()</span></code>. (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32941">bpo-32941</a>.)</p>
</section>
<section id="multiprocessing">
<h3>multiprocessing<a class="headerlink" href="#multiprocessing" title="Link permanente para este título">¶</a></h3>
<p>Adicionado novo módulo <a class="reference internal" href="../library/multiprocessing.shared_memory.html#module-multiprocessing.shared_memory" title="multiprocessing.shared_memory: Provides shared memory for direct access across processes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing.shared_memory</span></code></a>. (Contribuição de Davin Potts em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35813">bpo-35813</a>.)</p>
<p>No macOS, o método inicial <em>spawn</em> agora é usado por padrão. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33725">bpo-33725</a>.)</p>
</section>
<section id="os">
<h3>os<a class="headerlink" href="#os" title="Link permanente para este título">¶</a></h3>
<p>Adicionada nova função <a class="reference internal" href="../library/os.html#os.add_dll_directory" title="os.add_dll_directory"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_dll_directory()</span></code></a> no Windows para fornecer caminhos de pesquisa adicionais para dependências nativas ao importar módulos de extensão ou carregar DLLs usando <a class="reference internal" href="../library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a>. (Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36085">bpo-36085</a>.)</p>
<p>Uma nova função <a class="reference internal" href="../library/os.html#os.memfd_create" title="os.memfd_create"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.memfd_create()</span></code></a> foi adicionada para envolver a chamada de sistema <code class="docutils literal notranslate"><span class="pre">memfd_create()</span></code>. (Contribuição de Zackery Spytz e Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26836">bpo-26836</a>.)</p>
<p>No Windows, grande parte da lógica manual para manipular pontos de nova análise (incluindo links simbólicos e junções de diretório) foi delegada ao sistema operacional. Especificamente, <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> agora percorrerá qualquer coisa suportada pelo sistema operacional, enquanto <a class="reference internal" href="../library/os.html#os.lstat" title="os.lstat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.lstat()</span></code></a> abrirá apenas pontos de nova análise que se identificam como “substitutos de nome” enquanto outros são abertos como <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a>. Em todos os casos, <code class="xref py py-attr docutils literal notranslate"><span class="pre">stat_result.st_mode</span></code> terá apenas <code class="docutils literal notranslate"><span class="pre">S_IFLNK</span></code> definido para links simbólicos e não para outros tipos de pontos de nova análise. Para identificar outros tipos de pontos de nova análise, verifique o novo atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">stat_result.st_reparse_tag</span></code>.</p>
<p>No Windows, <a class="reference internal" href="../library/os.html#os.readlink" title="os.readlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readlink()</span></code></a> agora pode ler junções de diretório. Observe que <a class="reference internal" href="../library/os.path.html#os.path.islink" title="os.path.islink"><code class="xref py py-func docutils literal notranslate"><span class="pre">islink()</span></code></a> retornará <code class="docutils literal notranslate"><span class="pre">False</span></code> para junções de diretório e, portanto, o código que verifica primeiro <code class="docutils literal notranslate"><span class="pre">islink</span></code> continuará tratando junções como diretórios, enquanto o código que lida com erros de <a class="reference internal" href="../library/os.html#os.readlink" title="os.readlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readlink()</span></code></a> agora pode tratar junções como links.</p>
<p>(Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37834">bpo-37834</a>.)</p>
</section>
<section id="os-path">
<h3>os.path<a class="headerlink" href="#os-path" title="Link permanente para este título">¶</a></h3>
<p>Funções de <a class="reference internal" href="../library/os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a> que retornam um resultado booleano como <a class="reference internal" href="../library/os.path.html#os.path.exists" title="os.path.exists"><code class="xref py py-func docutils literal notranslate"><span class="pre">exists()</span></code></a>, <a class="reference internal" href="../library/os.path.html#os.path.lexists" title="os.path.lexists"><code class="xref py py-func docutils literal notranslate"><span class="pre">lexists()</span></code></a>, <a class="reference internal" href="../library/os.path.html#os.path.isdir" title="os.path.isdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">isdir()</span></code></a>, <a class="reference internal" href="../library/os.path.html#os.path.isfile" title="os.path.isfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">isfile()</span></code></a>, <a class="reference internal" href="../library/os.path.html#os.path.islink" title="os.path.islink"><code class="xref py py-func docutils literal notranslate"><span class="pre">islink()</span></code></a> e <a class="reference internal" href="../library/os.path.html#os.path.ismount" title="os.path.ismount"><code class="xref py py-func docutils literal notranslate"><span class="pre">ismount()</span></code></a> agora retornam <code class="docutils literal notranslate"><span class="pre">False</span></code> em vez de levantar <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> ou suas subclasses <a class="reference internal" href="../library/exceptions.html#UnicodeEncodeError" title="UnicodeEncodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code></a> e <a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code></a> para caminhos que contêm caracteres ou bytes não representáveis no nível do SO. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33721">bpo-33721</a>.)</p>
<p><a class="reference internal" href="../library/os.path.html#os.path.expanduser" title="os.path.expanduser"><code class="xref py py-func docutils literal notranslate"><span class="pre">expanduser()</span></code></a> no Windows agora prefere a variável de ambiente <span class="target" id="index-58"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">USERPROFILE</span></code> e não usa <span class="target" id="index-59"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code>, que normalmente não é definido para contas de usuário comuns. (Contribuição de Anthony Sottile em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36264">bpo-36264</a>.)</p>
<p><a class="reference internal" href="../library/os.path.html#os.path.isdir" title="os.path.isdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">isdir()</span></code></a> no Windows não retorna mais <code class="docutils literal notranslate"><span class="pre">True</span></code> para um link para um diretório inexistente.</p>
<p><a class="reference internal" href="../library/os.path.html#os.path.realpath" title="os.path.realpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">realpath()</span></code></a> no Windows agora resolve pontos de nova análise, incluindo links simbólicos e junções de diretório.</p>
<p>(Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37834">bpo-37834</a>.)</p>
</section>
<section id="pathlib">
<h3>pathlib<a class="headerlink" href="#pathlib" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/pathlib.html#pathlib.Path" title="pathlib.Path"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> métodos que retornam um resultado booleano como <a class="reference internal" href="../library/pathlib.html#pathlib.Path.exists" title="pathlib.Path.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exists()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_dir" title="pathlib.Path.is_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_dir()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_file" title="pathlib.Path.is_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_file()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_mount" title="pathlib.Path.is_mount"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_mount()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_symlink" title="pathlib.Path.is_symlink"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_symlink()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_block_device" title="pathlib.Path.is_block_device"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_block_device()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_char_device" title="pathlib.Path.is_char_device"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_char_device()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_fifo" title="pathlib.Path.is_fifo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_fifo()</span></code></a>, <a class="reference internal" href="../library/pathlib.html#pathlib.Path.is_socket" title="pathlib.Path.is_socket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_socket()</span></code></a> agora retorna <code class="docutils literal notranslate"><span class="pre">False</span></code> ao invés de levantar <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> ou sua subclasse <a class="reference internal" href="../library/exceptions.html#UnicodeEncodeError" title="UnicodeEncodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code></a> para caminhos que contêm caracteres não representáveis no nível do SO. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33721">bpo-33721</a>.)</p>
<p>Adicionado <a class="reference internal" href="../library/pathlib.html#pathlib.Path.link_to" title="pathlib.Path.link_to"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.link_to()</span></code></a> que cria um link rígido apontando para um caminho. (Contribuição de Joannah Nanjekye in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26978">bpo-26978</a>)</p>
</section>
<section id="pickle">
<h3>pickle<a class="headerlink" href="#pickle" title="Link permanente para este título">¶</a></h3>
<p>Extensões de <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a>, que atuem como subclasse da classe otimizada para C <a class="reference internal" href="../library/pickle.html#pickle.Pickler" title="pickle.Pickler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pickler</span></code></a>, agora podem substituir a lógica de “pickling” de funções e classes definindo o método especial <a class="reference internal" href="../library/pickle.html#pickle.Pickler.reducer_override" title="pickle.Pickler.reducer_override"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reducer_override()</span></code></a>. (Contribuição de Pierre Glaser e Olivier Grisel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35900">bpo-35900</a>.)</p>
</section>
<section id="plistlib">
<h3>plistlib<a class="headerlink" href="#plistlib" title="Link permanente para este título">¶</a></h3>
<p>Adicionado novo <a class="reference internal" href="../library/plistlib.html#plistlib.UID" title="plistlib.UID"><code class="xref py py-class docutils literal notranslate"><span class="pre">plistlib.UID</span></code></a> e habilitado suporte para leitura e escrita de plists binárias codificadas em NSKeyedArchiver. (Contribuição de Jon Janzen em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26707">bpo-26707</a>.)</p>
</section>
<section id="pprint">
<h3>pprint<a class="headerlink" href="#pprint" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> adicionou um parâmetro <em>sort_dicts</em> a várias funções. Por padrão, essas funções continuam a classificar dicionários antes da renderização ou impressão. No entanto, se <em>sort_dicts</em> estiver definido como false, os dicionários manterão a ordem em que as chaves foram inseridas. Isso pode ser útil para comparação com entradas JSON durante a depuração.</p>
<p>Além disso, existe uma nova função de conveniência, <a class="reference internal" href="../library/pprint.html#pprint.pp" title="pprint.pp"><code class="xref py py-func docutils literal notranslate"><span class="pre">pprint.pp()</span></code></a>, que é como <a class="reference internal" href="../library/pprint.html#pprint.pprint" title="pprint.pprint"><code class="xref py py-func docutils literal notranslate"><span class="pre">pprint.pprint()</span></code></a>, mas com <em>sort_dicts</em> padronizando como <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span><span class="p">,</span> <span class="n">pp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;input.txt&#39;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s1">&#39;filter&#39;</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="s1">&#39;output.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pp</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>                  <span class="c1"># Original order</span>
<span class="go">{&#39;source&#39;: &#39;input.txt&#39;,</span>
<span class="go"> &#39;operation&#39;: &#39;filter&#39;,</span>
<span class="go"> &#39;destination&#39;: &#39;output.txt&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>              <span class="c1"># Keys sorted alphabetically</span>
<span class="go">{&#39;destination&#39;: &#39;output.txt&#39;,</span>
<span class="go"> &#39;operation&#39;: &#39;filter&#39;,</span>
<span class="go"> &#39;source&#39;: &#39;input.txt&#39;}</span>
</pre></div>
</div>
<p>(Contribuição de Rémi Lapeyre em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30670">bpo-30670</a>.)</p>
</section>
<section id="py-compile">
<h3>py_compile<a class="headerlink" href="#py-compile" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/py_compile.html#py_compile.compile" title="py_compile.compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">py_compile.compile()</span></code></a> agora possui suporte a um modo silencioso. (Contribuição de Joannah Nanjekye em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=22640">bpo-22640</a>.)</p>
</section>
<section id="shlex">
<h3>shlex<a class="headerlink" href="#shlex" title="Link permanente para este título">¶</a></h3>
<p>A nova função <a class="reference internal" href="../library/shlex.html#shlex.join" title="shlex.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.join()</span></code></a> atua como o inverso da <a class="reference internal" href="../library/shlex.html#shlex.split" title="shlex.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.split()</span></code></a>. (Contribuição de Bo Bayles em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32102">bpo-32102</a>.)</p>
</section>
<section id="shutil">
<h3>shutil<a class="headerlink" href="#shutil" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> agora aceita um novo argumento nomeado <code class="docutils literal notranslate"><span class="pre">dirs_exist_ok</span></code>. (Contribuição de Josh Bronson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20849">bpo-20849</a>.)</p>
<p><a class="reference internal" href="../library/shutil.html#shutil.make_archive" title="shutil.make_archive"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.make_archive()</span></code></a> agora tem como pádrão o formato pax moderno (POSIX.1-2001) de novos arquivos para melhorar a portabilidade e a conformidade com os padrões, herdados da alteração correspondente no módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a>. (Contribuição de C.A.M. Gerlach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30661">bpo-30661</a>.)</p>
<p><a class="reference internal" href="../library/shutil.html#shutil.rmtree" title="shutil.rmtree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.rmtree()</span></code></a> no Windows agora remove junções de diretórios sem remover recursivamente o conteúdo primeiro. (Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37834">bpo-37834</a>.)</p>
</section>
<section id="socket">
<h3>socket<a class="headerlink" href="#socket" title="Link permanente para este título">¶</a></h3>
<p>Adicionadas as funções de conveniência <a class="reference internal" href="../library/socket.html#socket.create_server" title="socket.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a> e <a class="reference internal" href="../library/socket.html#socket.has_dualstack_ipv6" title="socket.has_dualstack_ipv6"><code class="xref py py-meth docutils literal notranslate"><span class="pre">has_dualstack_ipv6()</span></code></a> para automatizar as tarefas necessárias geralmente envolvidas na criação de um soquete de servidor, incluindo a aceitação de conexões IPv4 e IPv6 no mesmo soquete. (Contribuição de Giampaolo Rodolà em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17561">bpo-17561</a>.)</p>
<p>As funções <a class="reference internal" href="../library/socket.html#socket.if_nameindex" title="socket.if_nameindex"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.if_nameindex()</span></code></a>, <a class="reference internal" href="../library/socket.html#socket.if_nametoindex" title="socket.if_nametoindex"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.if_nametoindex()</span></code></a> e <a class="reference internal" href="../library/socket.html#socket.if_indextoname" title="socket.if_indextoname"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.if_indextoname()</span></code></a> foram agora implementadas no Windows. (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37007">bpo-37007</a>.)</p>
</section>
<section id="ssl">
<h3>ssl<a class="headerlink" href="#ssl" title="Link permanente para este título">¶</a></h3>
<p>Adicionado <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.post_handshake_auth" title="ssl.SSLContext.post_handshake_auth"><code class="xref py py-attr docutils literal notranslate"><span class="pre">post_handshake_auth</span></code></a> para ativar e <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.verify_client_post_handshake" title="ssl.SSLSocket.verify_client_post_handshake"><code class="xref py py-meth docutils literal notranslate"><span class="pre">verify_client_post_handshake()</span></code></a> para iniciar a autenticação pós-handshake do TLS 1.3. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34670">bpo-34670</a>.)</p>
</section>
<section id="statistics">
<h3>statistics<a class="headerlink" href="#statistics" title="Link permanente para este título">¶</a></h3>
<p>Adicionada <a class="reference internal" href="../library/statistics.html#statistics.fmean" title="statistics.fmean"><code class="xref py py-func docutils literal notranslate"><span class="pre">statistics.fmean()</span></code></a> como uma variante de ponto flutuante mais rápida de <a class="reference internal" href="../library/statistics.html#statistics.mean" title="statistics.mean"><code class="xref py py-func docutils literal notranslate"><span class="pre">statistics.mean()</span></code></a>. (Contribuição de Raymond Hettinger e Steven D’Aprano em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35904">bpo-35904</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/statistics.html#statistics.geometric_mean" title="statistics.geometric_mean"><code class="xref py py-func docutils literal notranslate"><span class="pre">statistics.geometric_mean()</span></code></a> (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=27181">bpo-27181</a>.)</p>
<p>Adicionada <code class="xref py py-func docutils literal notranslate"><span class="pre">Statistics.multimode()</span></code> que retorna uma lista dos valores mais comuns. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35892">bpo-35892</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/statistics.html#statistics.quantiles" title="statistics.quantiles"><code class="xref py py-func docutils literal notranslate"><span class="pre">statistics.quantiles()</span></code></a> que divide dados ou uma distribuição em intervalos equivalentes (por exemplo, quartis, decis ou percentis). (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36546">bpo-36546</a>.)</p>
<p>Adicionada <a class="reference internal" href="../library/statistics.html#statistics.NormalDist" title="statistics.NormalDist"><code class="xref py py-class docutils literal notranslate"><span class="pre">statistics.NormalDist</span></code></a>, uma ferramenta para criar e manipular distribuições normais de uma variável aleatória. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36018">bpo-36018</a>.)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span> <span class="o">=</span> <span class="n">NormalDist</span><span class="o">.</span><span class="n">from_samples</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span><span class="o">.</span><span class="n">mean</span>
<span class="go">6.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span><span class="o">.</span><span class="n">stdev</span>
<span class="go">6.356099432828281</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>            <span class="c1"># Chance of being under 3 degrees</span>
<span class="go">0.3184678262814532</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Relative chance of being 7 degrees versus 10 degrees</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">/</span> <span class="n">temperature_feb</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">1.2039930378537762</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">el_niño</span> <span class="o">=</span> <span class="n">NormalDist</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span> <span class="o">+=</span> <span class="n">el_niño</span>        <span class="c1"># Add in a climate effect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span>
<span class="go">NormalDist(mu=10.0, sigma=6.830080526611674)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span> <span class="o">*</span> <span class="p">(</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span>      <span class="c1"># Convert to Fahrenheit</span>
<span class="go">NormalDist(mu=50.0, sigma=12.294144947901014)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_feb</span><span class="o">.</span><span class="n">samples</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>        <span class="c1"># Generate random samples</span>
<span class="go">[7.672102882379219, 12.000027119750287, 4.647488369766392]</span>
</pre></div>
</div>
</section>
<section id="sys">
<h3>sys<a class="headerlink" href="#sys" title="Link permanente para este título">¶</a></h3>
<p>Adiciona uma nova função <a class="reference internal" href="../library/sys.html#sys.unraisablehook" title="sys.unraisablehook"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.unraisablehook()</span></code></a>, que pode ser substituída para controlar como as “exceções não passíveis de levantamento” são tratadas. É chamada quando uma exceção ocorre, mas não há como o Python manipulá-la. Por exemplo, quando um destruidor gera uma exceção ou durante a coleta de lixo (<a class="reference internal" href="../library/gc.html#gc.collect" title="gc.collect"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.collect()</span></code></a>). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36829">bpo-36829</a>.)</p>
</section>
<section id="tarfile">
<h3>tarfile<a class="headerlink" href="#tarfile" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> agora tem como padrão o formato pax moderno (POSIX.1-2001) para novos arquivos, em vez do anterior específico do GNU. Isso melhora a portabilidade de plataforma cruzada com uma codificação consistente (UTF-8) em um formato padronizado e extensível e oferece vários outros benefícios. (Contribuição de C.A.M. Gerlach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36268">bpo-36268</a>.)</p>
</section>
<section id="threading">
<h3>threading<a class="headerlink" href="#threading" title="Link permanente para este título">¶</a></h3>
<p>Adiciona uma nova função <a class="reference internal" href="../library/threading.html#threading.excepthook" title="threading.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.excepthook()</span></code></a> que manipula a exceção não capturada <a class="reference internal" href="../library/threading.html#threading.Thread.run" title="threading.Thread.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Thread.run()</span></code></a>. Pode ser substituída para controlar como exceções não capturadas <a class="reference internal" href="../library/threading.html#threading.Thread.run" title="threading.Thread.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Thread.run()</span></code></a> são manipuladas. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1230540">bpo-1230540</a>.)</p>
<p>Adiciona uma nova função <a class="reference internal" href="../library/threading.html#threading.get_native_id" title="threading.get_native_id"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.get_native_id()</span></code></a> e um atributo <a class="reference internal" href="../library/threading.html#threading.Thread.native_id" title="threading.Thread.native_id"><code class="xref py py-data docutils literal notranslate"><span class="pre">native_id</span></code></a> à classe <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a>. Eles retornam o Thread ID integral nativo do thread atual atribuído pelo kernel. Este recurso está disponível apenas em determinadas plataformas, consulte <a class="reference internal" href="../library/threading.html#threading.get_native_id" title="threading.get_native_id"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_native_id</span></code></a> para mais informações. (Contribuição de Jake Tesler em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36084">bpo-36084</a>.)</p>
</section>
<section id="tokenize">
<h3>tokenize<a class="headerlink" href="#tokenize" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/tokenize.html#module-tokenize" title="tokenize: Lexical scanner for Python source code."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tokenize</span></code></a> agora emite implicitamente um token <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code> quando fornecido com entrada que não possui uma nova linha à direita. Esse comportamento agora corresponde ao que o tokenizador do C faz internamente. (Contribuição de Ammar Askar em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33899">bpo-33899</a>.)</p>
</section>
<section id="tkinter">
<h3>tkinter<a class="headerlink" href="#tkinter" title="Link permanente para este título">¶</a></h3>
<p>Adicionados os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">selection_from()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">selection_present()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">selection_range()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">selection_to()</span></code> à classe <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Spinbox</span></code>. (Contribuição de Juliette Monsel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34829">bpo-34829</a>.)</p>
<p>Adicionado o método <code class="xref py py-meth docutils literal notranslate"><span class="pre">moveto()</span></code> na classe <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.Canvas</span></code>. (Contribuição de Juliette Monsel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23831">bpo-23831</a>.)</p>
<p>A classe <code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.PhotoImage</span></code> agore tem os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">transparency_get()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">transparency_set()</span></code>. (Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25451">bpo-25451</a>.)</p>
</section>
<section id="time">
<h3>time<a class="headerlink" href="#time" title="Link permanente para este título">¶</a></h3>
<p>Adiciona o novo relógio <a class="reference internal" href="../library/time.html#time.CLOCK_UPTIME_RAW" title="time.CLOCK_UPTIME_RAW"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLOCK_UPTIME_RAW</span></code></a> ao macOS 10.12. (Contribuição de Joannah Nanjekye em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35702">bpo-35702</a>.)</p>
</section>
<section id="typing">
<h3>typing<a class="headerlink" href="#typing" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> incorpora vários novos recursos:</p>
<ul>
<li><p>Um tipo de dicionário com tipos por chave. Veja <span class="target" id="index-60"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0589"><strong>PEP 589</strong></a> e <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a>. TypedDict usa apenas chaves de strings. Por padrão, é necessário que todas as chaves estejam presentes. Especifique “total=False” para permitir que as chaves sejam opcionais:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">lat_long</span><span class="p">:</span> <span class="nb">tuple</span>
    <span class="n">grid_square</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">xy_coordinate</span><span class="p">:</span> <span class="nb">tuple</span>
</pre></div>
</div>
</li>
<li><p>Tipos literais. Veja <span class="target" id="index-61"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0586"><strong>PEP 586</strong></a> e <a class="reference internal" href="../library/typing.html#typing.Literal" title="typing.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Literal</span></code></a>. Tipos literais indicam que um parâmetro ou valor de retorno está restrito a um ou mais valores literais específicos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;connected&#39;</span><span class="p">,</span> <span class="s1">&#39;disconnected&#39;</span><span class="p">]:</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>Variáveis, funções, métodos e classes “finais”. Veja <span class="target" id="index-62"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0591"><strong>PEP 591</strong></a>, <a class="reference internal" href="../library/typing.html#typing.Final" title="typing.Final"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Final</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.final" title="typing.final"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.final()</span></code></a>. O qualificador final instrui um verificador de tipo estático a restringir criação de subclasse, substituição ou reatribuição:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.1415926536</span>
</pre></div>
</div>
</li>
<li><p>Definições de protocolo. Veja <span class="target" id="index-63"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0544"><strong>PEP 544</strong></a>, <a class="reference internal" href="../library/typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.runtime_checkable" title="typing.runtime_checkable"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.runtime_checkable()</span></code></a>. ABCs simples como <a class="reference internal" href="../library/typing.html#typing.SupportsInt" title="typing.SupportsInt"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsInt</span></code></a> agora são subclasses de <code class="docutils literal notranslate"><span class="pre">Protocol</span></code>.</p></li>
<li><p>Nova classe de protocolo <a class="reference internal" href="../library/typing.html#typing.SupportsIndex" title="typing.SupportsIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.SupportsIndex</span></code></a>.</p></li>
<li><p>Novas funções <a class="reference internal" href="../library/typing.html#typing.get_origin" title="typing.get_origin"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_origin()</span></code></a> e <a class="reference internal" href="../library/typing.html#typing.get_args" title="typing.get_args"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_args()</span></code></a>.</p></li>
</ul>
</section>
<section id="unicodedata">
<h3>unicodedata<a class="headerlink" href="#unicodedata" title="Link permanente para este título">¶</a></h3>
<p>O módulo <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unicodedata</span></code></a> agora foi atualizado para usar o <a class="reference external" href="http://blog.unicode.org/2019/05/unicode-12-1-en.html">Unicode 12.1.0</a>.</p>
<p>A nova função <a class="reference internal" href="../library/unicodedata.html#unicodedata.is_normalized" title="unicodedata.is_normalized"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_normalized()</span></code></a> pode ser usada para verificar se uma string está em uma forma normal específica, geralmente muito mais rápida do que normalizar a string. (Contribuição de Max Belanger, David Euresti e Greg Price em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32285">bpo-32285</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37966">bpo-37966</a>).</p>
</section>
<section id="unittest">
<h3>unittest<a class="headerlink" href="#unittest" title="Link permanente para este título">¶</a></h3>
<p>Adicionada <a class="reference internal" href="../library/unittest.mock.html#unittest.mock.AsyncMock" title="unittest.mock.AsyncMock"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncMock</span></code></a> para dar suporte a uma versão assíncrona de <a class="reference internal" href="../library/unittest.mock.html#unittest.mock.Mock" title="unittest.mock.Mock"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mock</span></code></a>. Também foram adicionadas novas funções apropriadas para teste. (Contribuição de Lisa Roach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26467">bpo-26467</a>).</p>
<p>Adicionados <a class="reference internal" href="../library/unittest.html#unittest.addModuleCleanup" title="unittest.addModuleCleanup"><code class="xref py py-func docutils literal notranslate"><span class="pre">addModuleCleanup()</span></code></a> e <a class="reference internal" href="../library/unittest.html#unittest.TestCase.addClassCleanup" title="unittest.TestCase.addClassCleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addClassCleanup()</span></code></a> a unittest para dar suporte a limpezas para <code class="xref py py-func docutils literal notranslate"><span class="pre">setUpModule()</span></code> e <a class="reference internal" href="../library/unittest.html#unittest.TestCase.setUpClass" title="unittest.TestCase.setUpClass"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setUpClass()</span></code></a>. (Contribuição de Lisa Roach em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24412">bpo-24412</a>.)</p>
<p>Várias funções de declaração de mock agora também exibem uma lista de chamadas reais em caso de falha. (Contribuição de Petter Strandmark em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35047">bpo-35047</a>.)</p>
<p>O módulo <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> ganhou suporte a corrotinas a serem usadas como casos de teste com <a class="reference internal" href="../library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.IsolatedAsyncioTestCase</span></code></a>. (Contribuição de Andrew Svetlov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32972">bpo-32972</a>.)</p>
<p>Exemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">TestRequest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">IsolatedAsyncioTestCase</span><span class="p">):</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">asyncSetUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncConnection</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">test_get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://example.com&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">asyncTearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="venv">
<h3>venv<a class="headerlink" href="#venv" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> agora inclui um script <code class="docutils literal notranslate"><span class="pre">Activate.ps1</span></code> em todas as plataformas para ativar ambientes virtuais no PowerShell Core 6.1. (Contribuição de Brett Cannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32718">bpo-32718</a>.)</p>
</section>
<section id="weakref">
<h3>weakref<a class="headerlink" href="#weakref" title="Link permanente para este título">¶</a></h3>
<p>Os objetos proxy retornados por <a class="reference internal" href="../library/weakref.html#weakref.proxy" title="weakref.proxy"><code class="xref py py-func docutils literal notranslate"><span class="pre">weakref.proxy()</span></code></a> agora possuem suporte aos operadores de multiplicação de matrizes <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> e <code class="docutils literal notranslate"><span class="pre">&#64;=</span></code> além dos outros operadores numéricos. (Contribuição de Mark Dickinson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36669">bpo-36669</a>.)</p>
</section>
<section id="xml">
<h3>xml<a class="headerlink" href="#xml" title="Link permanente para este título">¶</a></h3>
<p>Como atenuação a DTD e recuperação de entidade externa, os módulos <a class="reference internal" href="../library/xml.dom.minidom.html#module-xml.dom.minidom" title="xml.dom.minidom: Minimal Document Object Model (DOM) implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.dom.minidom</span></code></a> e <a class="reference internal" href="../library/xml.sax.html#module-xml.sax" title="xml.sax: Package containing SAX2 base classes and convenience functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.sax</span></code></a> não processam mais entidades externas por padrão. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17239">bpo-17239</a>.)</p>
<p>Os métodos <code class="docutils literal notranslate"><span class="pre">.find*()</span></code> no módulo <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> possuem suporte a pesquisas curinga como <code class="docutils literal notranslate"><span class="pre">{*}tag</span></code>, que ignora o espaço para nome e <code class="docutils literal notranslate"><span class="pre">{namespace}*</span></code>, que retorna todas as tags no espaço para nome especificado. (Contribuição de Stefan Behnel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28238">bpo-28238</a>.)</p>
<p>O módulo <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> fornece uma nova função <code class="xref py py-func docutils literal notranslate"><span class="pre">–xml.etree.ElementTree.canonicalize()</span></code> que implementa o C14N 2.0. (Contribuição de Stefan Behnel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=13611">bpo-13611</a>.)</p>
<p>O objeto de destino de <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.XMLParser</span></code></a> pode receber eventos de declaração de espaço de nomes através dos novos métodos de retorno de chamada <code class="docutils literal notranslate"><span class="pre">start_ns()</span></code> e <code class="docutils literal notranslate"><span class="pre">end_ns</span> <span class="pre">()</span></code>. Além disso, o destino <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder" title="xml.etree.ElementTree.TreeBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.TreeBuilder</span></code></a> pode ser configurado para processar eventos sobre comentários e instruções de processamento para incluí-los na árvore gerada. (Contribuição de Stefan Behnel em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36676">bpo-36676</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36673">bpo-36673</a>.)</p>
</section>
<section id="xmlrpc">
<h3>xmlrpc<a class="headerlink" href="#xmlrpc" title="Link permanente para este título">¶</a></h3>
<p><a class="reference internal" href="../library/xmlrpc.client.html#xmlrpc.client.ServerProxy" title="xmlrpc.client.ServerProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">xmlrpc.client.ServerProxy</span></code></a> agora possui suporte a um argumento nomeado <em>headers</em> opcional para que uma sequência de cabeçalhos HTTP seja enviada a cada solicitação. Entre outras coisas, isso possibilita a atualização da autenticação básica padrão para uma autenticação de sessão mais rápida. (Contribuição de Cédric Krier em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35153">bpo-35153</a>.)</p>
</section>
</section>
<section id="optimizations">
<h2>Otimizações<a class="headerlink" href="#optimizations" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>O módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> agora pode usar a função <a class="reference internal" href="../library/os.html#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.posix_spawn()</span></code></a> em alguns casos para obter melhor desempenho. Atualmente, ele é usado apenas no macOS e Linux (usando glibc 2.24 ou mais recente) se todas essas condições forem atendidas:</p>
<ul class="simple">
<li><p><em>close_fds</em> ser false;</p></li>
<li><p>os parâmetros <em>preexec_fn</em>, <em>pass_fds</em>, <em>cwd</em> and <em>start_new_session</em> não estarem definidos;</p></li>
<li><p>o caminho <em>executable</em> conter um diretório.</p></li>
</ul>
<p>(Contribuição de Joannah Nanjekye e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35537">bpo-35537</a>.)</p>
</li>
<li><p><a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copyfile()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copy" title="shutil.copy"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copy()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copy2" title="shutil.copy2"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copy2()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> e <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> usam chamadas de sistema “fast-copy” específicas da plataforma no Linux e no macOS para copiar o arquivo com mais eficiência. “fast-copy” significa que a operação de cópia ocorre dentro do kernel, evitando o uso de buffers de espaço do usuário no Python como em “<code class="docutils literal notranslate"><span class="pre">outfd.write(infd.read())</span></code>”. No Windows, <a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copyfile()</span></code></a> usa um buffer padrão com tamanho maior (1 MiB em vez de 16 KiB) e é usada uma variante de <a class="reference internal" href="../library/shutil.html#shutil.copyfileobj" title="shutil.copyfileobj"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copyfileobj()</span></code></a> baseada em <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-func docutils literal notranslate"><span class="pre">memoryview()</span></code></a>. A velocidade de cópia de um arquivo 512 MiB na mesma partição é de aproximadamente +26% no Linux, +50% no macOS e +40% no Windows. Além disso, muito menos ciclos de CPU são consumidos. Veja a seção <a class="reference internal" href="../library/shutil.html#shutil-platform-dependent-efficient-copy-operations"><span class="std std-ref">Operações de cópia eficientes dependentes da plataforma</span></a>. (Contribuição de Giampaolo Rodolà em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33671">bpo-33671</a>.)</p></li>
<li><p><a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> usa a função <a class="reference internal" href="../library/os.html#os.scandir" title="os.scandir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.scandir()</span></code></a> e todas as funções de cópia que dependem dela usam valores em cache de <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a>. A velocidade para copiar um diretório com 8000 arquivos é de cerca de +9% no Linux, +20% no Windows e +30% em um compartilhamento SMB do Windows. Além disso, o número de chamadas de sistema <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> é reduzido em 38%, tornando <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> especialmente mais rápida em sistemas de arquivos em rede. (Contribuição de Giampaolo Rodolà em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33695">bpo-33695</a>.)</p></li>
<li><p>O protocolo padrão no módulo <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> agora é o Protocolo 4, introduzido pela primeira vez no Python 3.4. Ele oferece melhor desempenho e tamanho menor em comparação com o Protocolo 3 disponível desde o Python 3.0.</p></li>
<li><p>Removed one <a class="reference internal" href="../c-api/intro.html#c.Py_ssize_t" title="Py_ssize_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">Py_ssize_t</span></code></a> member from <code class="docutils literal notranslate"><span class="pre">PyGC_Head</span></code>.  All GC tracked
objects (e.g. tuple, list, dict) size is reduced 4 or 8 bytes.
(Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33597">bpo-33597</a>.)</p></li>
<li><p><a class="reference internal" href="../library/uuid.html#uuid.UUID" title="uuid.UUID"><code class="xref py py-class docutils literal notranslate"><span class="pre">uuid.UUID</span></code></a> agora usa <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> para reduzir seu uso de espaço de memória. (Contribuição de Wouter Bolsterlee e Tal Einat em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30977">bpo-30977</a>)</p></li>
<li><p>Melhor desempenho de <a class="reference internal" href="../library/operator.html#operator.itemgetter" title="operator.itemgetter"><code class="xref py py-func docutils literal notranslate"><span class="pre">operator.itemgetter()</span></code></a> em 33%. Manipulação de argumento otimizada e incluído um caminho rápido para o caso comum de um único índice inteiro não negativo em uma tupla (que é o caso de uso típico na biblioteca padrão). (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35664">bpo-35664</a>.)</p></li>
<li><p>Pesquisas de campo aceleradas em <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">collections.namedtuple()</span></code></a>. Agora elas são duas vezes mais rápidas, tornando-as a forma mais rápida de pesquisa de variáveis de instância no Python. (Contribuição de Raymond Hettinger, Pablo Galindo e Joe Jevnik, Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32492">bpo-32492</a>.)</p></li>
<li><p>O construtor <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> não atribui globalmente o buffer interno do item se a entrada iterável tiver um comprimento conhecido (a entrada implementa <code class="docutils literal notranslate"><span class="pre">__len__</span></code>). Isso torna a lista criada 12% menor em média. (Contribuição de Raymond Hettinger e Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33234">bpo-33234</a>.)</p></li>
<li><p>Duplicada a velocidade de gravação de variável de classe. Quando um atributo não-dunder era atualizado, havia uma chamada desnecessária para atualizar os slots. (Contribuição de Stefan Behnel, Pablo Galindo Salgado, Raymond Hettinger, Neil Schemenauer e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36012">bpo-36012</a>.)</p></li>
<li><p>Reduzida a sobrecarga dos argumentos de conversão passados para muitas funções e métodos internos. Isso acelerou chamando algumas funções e métodos internos simples de 20–50%. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23867">bpo-23867</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35582">bpo-35582</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36127">bpo-36127</a>.)</p></li>
<li><p>A instrução <code class="docutils literal notranslate"><span class="pre">LOAD_GLOBAL</span></code> agora usa o novo mecanismo “por cache de código de operação”. É cerca de 40% mais rápido agora. (Contribuição de Yury Selivanov e Inada Naoki em :issue: <cite>26219</cite>.)</p></li>
</ul>
</section>
<section id="build-and-c-api-changes">
<h2>Alterações a compilações e API C<a class="headerlink" href="#build-and-c-api-changes" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>O <a class="reference internal" href="../library/sys.html#sys.abiflags" title="sys.abiflags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.abiflags</span></code></a> padrão se tornou uma string vazia: o sinalizador <code class="docutils literal notranslate"><span class="pre">m</span></code> para pymalloc se tornou inútil (compilações com e sem pymalloc são compatíveis com ABI) e, portanto, foi removido. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36707">bpo-36707</a>.)</p>
<p>Exemplos de alterações:</p>
<ul class="simple">
<li><p>Somente o programa <code class="docutils literal notranslate"><span class="pre">python3.8</span></code> é instalado, o programa <code class="docutils literal notranslate"><span class="pre">python3.8m</span></code> se foi.</p></li>
<li><p>Somente o script <code class="docutils literal notranslate"><span class="pre">python3.8-config</span></code> é instalado, o programa <code class="docutils literal notranslate"><span class="pre">python3.8m-config</span></code> se foi.</p></li>
<li><p>O sinalizador <code class="docutils literal notranslate"><span class="pre">m</span></code> foi removido do sufixo dos nomes de arquivos da biblioteca dinâmica: módulos de extensão na biblioteca padrão, bem como daqueles produzidos e instalados por pacotes de terceiros, como os baixados do PyPI. No Linux, por exemplo, o sufixo de <code class="docutils literal notranslate"><span class="pre">.cpython-37m-x86_64-linux-gnu.so</span></code> do Python 3.7 se tornou <code class="docutils literal notranslate"><span class="pre">.cpython-38-x86_64-linux-gnu.so</span></code> no Python 3.8.</p></li>
</ul>
</li>
<li><p>Os arquivos de cabeçalho foram reorganizados para separar melhor os diferentes tipos de APIs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Include/*.h</span></code> deve ser a API C pública estável e portátil.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Include/cpython/*.h</span></code> deve ser a API C instável específica do CPython; API pública, com alguma API privada prefixada por <code class="docutils literal notranslate"><span class="pre">_Py</span></code> ou <code class="docutils literal notranslate"><span class="pre">_PY</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Include/internal/*.h</span></code> é a API C interna privada muito específica do CPython. Essa API é fornecida sem garantia de compatibilidade com versões anteriores e não deve ser usada fora do CPython. Ele é exposto apenas a necessidades muito específicas, como depuradores e perfis, que precisam acessar os componentes internos do CPython sem chamar funções. Esta API agora está instalada por <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>.</p></li>
</ul>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35134">bpo-35134</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35081">bpo-35081</a>, trabalho iniciado por Eric Snow em Python 3.7.)</p>
</li>
<li><p>Algumas macros foram convertidas em funções in-line estáticas: os tipos de parâmetros e o tipo de retorno são bem definidos, eles não têm problemas específicos para as macros, as variáveis têm escopos locais. Exemplos:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../c-api/refcounting.html#c.Py_INCREF" title="Py_INCREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_INCREF()</span></code></a>, <a class="reference internal" href="../c-api/refcounting.html#c.Py_DECREF" title="Py_DECREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_DECREF()</span></code></a></p></li>
<li><p><a class="reference internal" href="../c-api/refcounting.html#c.Py_XINCREF" title="Py_XINCREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_XINCREF()</span></code></a>, <a class="reference internal" href="../c-api/refcounting.html#c.Py_XDECREF" title="Py_XDECREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_XDECREF()</span></code></a></p></li>
<li><p><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_INIT_VAR()</span></code></p></li>
<li><p>Funções privadas: <code class="xref c c-func docutils literal notranslate"><span class="pre">_PyObject_GC_TRACK()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">_PyObject_GC_UNTRACK()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">_Py_Dealloc()</span></code></p></li>
</ul>
<p>(Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35059">bpo-35059</a>.)</p>
</li>
<li><p>As funções <code class="xref c c-func docutils literal notranslate"><span class="pre">PyByteArray_Init()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyByteArray_Fini()</span></code> foram removidas. Elas não faziam nada desde o Python 2.7.4 e o Python 3.2.0, foram excluídas da API limitada (ABI estável) e não foram documentados. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35713">bpo-35713</a>.)</p></li>
<li><p>O resultado de <code class="xref c c-func docutils literal notranslate"><span class="pre">PyExceptionClass_Name()</span></code> agora é do tipo <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span></code> em vez de <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33818">bpo-33818</a>.)</p></li>
<li><p>A dualidade de <code class="docutils literal notranslate"><span class="pre">Modules/Setup.dist</span></code> e <code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code> foi removida. Anteriormente, ao atualizar a árvore de fontes do CPython, era necessário copiar manualmente <code class="docutils literal notranslate"><span class="pre">Modules/Setup.dist</span></code> (dentro da árvore de fontes) para <code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code> (dentro da árvore de compilação), a fim de refletir todas as alterações upstream. Isso foi um pequeno benefício para os empacotadores, à custa de um aborrecimento frequente para os desenvolvedores após o desenvolvimento do CPython, pois esquecer de copiar o arquivo pode causar falhas na compilação.</p>
<p>Agora, o sistema de compilação sempre lê <code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code> dentro da árvore de fontes. As pessoas que desejam personalizar esse arquivo são incentivadas a manter suas alterações em um fork do git do CPython ou como arquivos de patch, como faria em qualquer outra alteração na árvore de fontes.</p>
<p>(Contribuição de Antoine Pitrou em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32430">bpo-32430</a>.)</p>
</li>
<li><p>Funções que convertem um número Python em número inteiro C, como <a class="reference internal" href="../c-api/long.html#c.PyLong_AsLong" title="PyLong_AsLong"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLong()</span></code></a>, e funções de análise de argumentos, como <a class="reference internal" href="../c-api/arg.html#c.PyArg_ParseTuple" title="PyArg_ParseTuple"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArg_ParseTuple()</span></code></a>, com unidades de formato de conversão de números inteiros, como <code class="docutils literal notranslate"><span class="pre">'i'</span></code>, agora usarão o método especial <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a> em vez de <a class="reference internal" href="../reference/datamodel.html#object.__int__" title="object.__int__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code></a>, se disponível. O aviso de descontinuação será emitido para objetos com o método <code class="docutils literal notranslate"><span class="pre">__int__()</span></code>, mas sem o método <code class="docutils literal notranslate"><span class="pre">__index__()</span></code> (como <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> e <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> ). <a class="reference internal" href="../c-api/number.html#c.PyNumber_Check" title="PyNumber_Check"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_Check()</span></code></a> agora retornará <code class="docutils literal notranslate"><span class="pre">1</span></code> para objetos implementando <code class="docutils literal notranslate"><span class="pre">__index__()</span></code>. <a class="reference internal" href="../c-api/number.html#c.PyNumber_Long" title="PyNumber_Long"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_Long()</span></code></a>, <a class="reference internal" href="../c-api/number.html#c.PyNumber_Float" title="PyNumber_Float"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_Float()</span></code></a> e <a class="reference internal" href="../c-api/float.html#c.PyFloat_AsDouble" title="PyFloat_AsDouble"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFloat_AsDouble()</span></code></a> agora também usam o método <code class="docutils literal notranslate"><span class="pre">__index__()</span></code>, se disponível. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36048">bpo-36048</a> e <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20092">bpo-20092</a>.)</p></li>
<li><p>Objetos de tipo alocado a heap agora aumentarão sua contagem de referências em <a class="reference internal" href="../c-api/allocation.html#c.PyObject_Init" title="PyObject_Init"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Init()</span></code></a> (e sua macro paralela <code class="docutils literal notranslate"><span class="pre">PyObject_INIT</span></code>) em vez de em <a class="reference internal" href="../c-api/type.html#c.PyType_GenericAlloc" title="PyType_GenericAlloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GenericAlloc()</span></code></a>. Os tipos que modificam a alocação ou desalocação de instância podem precisar ser ajustados. (Contribuição de Eddie Elizondo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35810">bpo-35810</a>.)</p></li>
<li><p>A nova função <a class="reference internal" href="../c-api/code.html#c.PyCode_NewWithPosOnlyArgs" title="PyCode_NewWithPosOnlyArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_NewWithPosOnlyArgs()</span></code></a> permite criar objetos de código como <a class="reference internal" href="../c-api/code.html#c.PyCode_New" title="PyCode_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_New()</span></code></a>, mas com um parâmetro extra <em>posonlyargcount</em> para indicar o número de argumentos somente posicionais. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37221">bpo-37221</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/init.html#c.Py_SetPath" title="Py_SetPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPath()</span></code></a> agora define <a class="reference internal" href="../library/sys.html#sys.executable" title="sys.executable"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a> para o caminho completo do programa (<a class="reference internal" href="../c-api/init.html#c.Py_GetProgramFullPath" title="Py_GetProgramFullPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetProgramFullPath()</span></code></a>) em vez do nome do programa (<a class="reference internal" href="../c-api/init.html#c.Py_GetProgramName" title="Py_GetProgramName"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetProgramName()</span></code></a>). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38234">bpo-38234</a>.)</p></li>
</ul>
</section>
<section id="deprecated">
<h2>Descontinuados<a class="headerlink" href="#deprecated" title="Link permanente para este título">¶</a></h2>
<ul>
<li><p>O comando distutils <code class="docutils literal notranslate"><span class="pre">bdist_wininst</span></code> agora está descontinuado; use <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (pacotes wheel). (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37481">bpo-37481</a>.)</p></li>
<li><p>Os métodos descontinuados <code class="docutils literal notranslate"><span class="pre">getchildren()</span></code> e <code class="docutils literal notranslate"><span class="pre">getiterator()</span></code> no módulo <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ElementTree</span></code></a> agora emitem um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> em vez de <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>. Eles serão removidos no Python 3.9. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29209">bpo-29209</a>.)</p></li>
<li><p>Passar um objeto que não é uma instância de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a> para <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.set_default_executor" title="asyncio.loop.set_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.set_default_executor()</span></code></a> foi descontinuado e será proibido no Python 3.9. (Contribuição de Elvis Pranskevichus em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34075">bpo-34075</a>.)</p></li>
<li><p>Os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> de <a class="reference internal" href="../library/xml.dom.pulldom.html#xml.dom.pulldom.DOMEventStream" title="xml.dom.pulldom.DOMEventStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.dom.pulldom.DOMEventStream</span></code></a>, <a class="reference internal" href="../library/wsgiref.html#wsgiref.util.FileWrapper" title="wsgiref.util.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.util.FileWrapper</span></code></a> e <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a> foram descontinuados.</p>
<p>As implementações desses métodos têm ignorado seu parâmetro <em>index</em> e retornado o próximo item. (Contribuição de Berker Peksag em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9372">bpo-9372</a>.)</p>
</li>
<li><p>A classe <a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.NamedTuple</span></code></a> descontinuou o atributo <code class="docutils literal notranslate"><span class="pre">_field_types</span></code> em favor do atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> que possui as mesmas informações. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36320">bpo-36320</a>.)</p></li>
<li><p>As classes <code class="docutils literal notranslate"><span class="pre">Num</span></code>, <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">NameConstant</span></code> e <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> do módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> são consideradas descontinuadas e serão removidos em versões futuras do Python. A <a class="reference internal" href="../library/ast.html#ast.Constant" title="ast.Constant"><code class="xref py py-class docutils literal notranslate"><span class="pre">Constant</span></code></a> deve ser usado. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32892">bpo-32892</a>.)</p></li>
<li><p>Os métodos <code class="docutils literal notranslate"><span class="pre">visit_Num()</span></code>, <code class="docutils literal notranslate"><span class="pre">visit_Str()</span></code>, <code class="docutils literal notranslate"><span class="pre">visit_Bytes()</span></code>, <code class="docutils literal notranslate"><span class="pre">visit_NameConstant()</span></code> e <code class="docutils literal notranslate"><span class="pre">visit_Ellipsis()</span></code> da classe <a class="reference internal" href="../library/ast.html#ast.NodeVisitor" title="ast.NodeVisitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.NodeVisitor</span></code></a> estão agora descontinuados e não serão chamados nas versões futuras do Python. Adicione o método <code class="xref py py-meth docutils literal notranslate"><span class="pre">visit_Constant()</span></code> para manipular todos os nós constantes. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36917">bpo-36917</a>.)</p></li>
<li><p>O <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorador</span></a> de <a class="reference internal" href="../library/asyncio-task.html#asyncio.coroutine" title="asyncio.coroutine"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.coroutine()</span></code></a> foi descontinuado e será removido na versão 3.10. Em vez de <code class="docutils literal notranslate"><span class="pre">&#64;asyncio.coroutine</span></code>, use <a class="reference internal" href="../reference/compound_stmts.html#async-def"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code></a>. (Contribuição de Andrew Svetlov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36921">bpo-36921</a>.)</p></li>
<li><p>Em <a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>, a passagem explícita de um argumento <em>loop</em> foi descontinuado e será removido na versão 3.10 para os seguintes: <a class="reference internal" href="../library/asyncio-task.html#asyncio.sleep" title="asyncio.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.sleep()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.gather" title="asyncio.gather"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.gather()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.shield" title="asyncio.shield"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.shield()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.as_completed" title="asyncio.as_completed"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.as_completed()</span></code></a>, <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>, <a class="reference internal" href="../library/asyncio-sync.html#asyncio.Lock" title="asyncio.Lock"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Lock</span></code></a>, <a class="reference internal" href="../library/asyncio-sync.html#asyncio.Event" title="asyncio.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Event</span></code></a>, <a class="reference internal" href="../library/asyncio-sync.html#asyncio.Condition" title="asyncio.Condition"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Condition</span></code></a>, <a class="reference internal" href="../library/asyncio-sync.html#asyncio.Semaphore" title="asyncio.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code></a>, <a class="reference internal" href="../library/asyncio-sync.html#asyncio.BoundedSemaphore" title="asyncio.BoundedSemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.BoundedSemaphore</span></code></a>, <a class="reference internal" href="../library/asyncio-queue.html#asyncio.Queue" title="asyncio.Queue"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Queue</span></code></a>, <a class="reference internal" href="../library/asyncio-subprocess.html#asyncio.create_subprocess_exec" title="asyncio.create_subprocess_exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.create_subprocess_exec()</span></code></a> e <a class="reference internal" href="../library/asyncio-subprocess.html#asyncio.create_subprocess_shell" title="asyncio.create_subprocess_shell"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.create_subprocess_shell()</span></code></a>.</p></li>
<li><p>A passagem explícita dos objetos da corrotina para <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a> foi descontinuada e será removida na versão 3.11. (Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34790">bpo-34790</a>.)</p></li>
<li><p>As seguintes funções e os seguintes métodos estão descontinuados no módulo <a class="reference internal" href="../library/gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gettext</span></code></a>: <a class="reference internal" href="../library/gettext.html#gettext.lgettext" title="gettext.lgettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">lgettext()</span></code></a>, <a class="reference internal" href="../library/gettext.html#gettext.ldgettext" title="gettext.ldgettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">ldgettext()</span></code></a>, <a class="reference internal" href="../library/gettext.html#gettext.lngettext" title="gettext.lngettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">lngettext()</span></code></a> e <a class="reference internal" href="../library/gettext.html#gettext.ldngettext" title="gettext.ldngettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">ldngettext()</span></code></a>. Eles retornam bytes codificados e é possível que você obtenha exceções relacionadas ao Unicode inesperadas se houver problemas de codificação com as strings traduzidas. É muito melhor usar alternativas que retornam strings Unicode no Python 3. Essas funções estiveram quebradas por um longo tempo.</p>
<p>A função <a class="reference internal" href="../library/gettext.html#gettext.bind_textdomain_codeset" title="gettext.bind_textdomain_codeset"><code class="xref py py-func docutils literal notranslate"><span class="pre">bind_textdomain_codeset()</span></code></a>, os métodos <a class="reference internal" href="../library/gettext.html#gettext.NullTranslations.output_charset" title="gettext.NullTranslations.output_charset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">output_charset()</span></code></a> e <a class="reference internal" href="../library/gettext.html#gettext.NullTranslations.set_output_charset" title="gettext.NullTranslations.set_output_charset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_output_charset()</span></code></a> e o parâmetro <em>codeset</em> das funções <a class="reference internal" href="../library/gettext.html#gettext.translation" title="gettext.translation"><code class="xref py py-func docutils literal notranslate"><span class="pre">translation()</span></code></a> e <a class="reference internal" href="../library/gettext.html#gettext.install" title="gettext.install"><code class="xref py py-func docutils literal notranslate"><span class="pre">install()</span></code></a> também estão descontinuados, pois são usados apenas para as funções <code class="docutils literal notranslate"><span class="pre">l*gettext()</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33710">bpo-33710</a>.)</p>
</li>
<li><p>O método <code class="xref py py-meth docutils literal notranslate"><span class="pre">isAlive()</span></code> da classe <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a> foi descontinuado. (Contribuição de Dong-hee Na em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35283">bpo-35283</a>.)</p></li>
<li><p>Muitas funções internas e de extensão que recebem argumentos inteiros agora emitem um aviso de descontinuidade para objetos de <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>, de <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> e quaisquer outros objetos que possam ser convertidos apenas em números inteiros com perda (por exemplo, que possuem o método <a class="reference internal" href="../reference/datamodel.html#object.__int__" title="object.__int__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code></a>, mas não têm o método <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a>). Em uma versão futura, haverá erros. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36048">bpo-36048</a>.)</p></li>
<li><p>Descontinuada a passagem dos seguintes argumentos como argumentos nomeados:</p>
<ul class="simple">
<li><p><em>func</em> em <a class="reference internal" href="../library/functools.html#functools.partialmethod" title="functools.partialmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partialmethod()</span></code></a>, <a class="reference internal" href="../library/weakref.html#weakref.finalize" title="weakref.finalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">weakref.finalize()</span></code></a>, <a class="reference internal" href="../library/profile.html#profile.Profile.runcall" title="profile.Profile.runcall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">profile.Profile.runcall()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">cProfile.Profile.runcall()</span></code>, <a class="reference internal" href="../library/bdb.html#bdb.Bdb.runcall" title="bdb.Bdb.runcall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bdb.Bdb.runcall()</span></code></a>, <a class="reference internal" href="../library/trace.html#trace.Trace.runfunc" title="trace.Trace.runfunc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trace.Trace.runfunc()</span></code></a> e <a class="reference internal" href="../library/curses.html#curses.wrapper" title="curses.wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.wrapper()</span></code></a>.</p></li>
<li><p><em>function</em> em <a class="reference internal" href="../library/unittest.html#unittest.TestCase.addCleanup" title="unittest.TestCase.addCleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.addCleanup()</span></code></a>.</p></li>
<li><p><em>fn</em> no método <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.submit" title="concurrent.futures.Executor.submit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">submit()</span></code></a> de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a> e <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ProcessPoolExecutor</span></code></a>.</p></li>
<li><p><em>callback</em> em <a class="reference internal" href="../library/contextlib.html#contextlib.ExitStack.callback" title="contextlib.ExitStack.callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.ExitStack.callback()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.AsyncExitStack.callback()</span></code> e <a class="reference internal" href="../library/contextlib.html#contextlib.AsyncExitStack.push_async_callback" title="contextlib.AsyncExitStack.push_async_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contextlib.AsyncExitStack.push_async_callback()</span></code></a>.</p></li>
<li><p><em>c</em> e <em>typeid</em> no método <code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.managers.Server</span></code> e <code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.managers.SharedMemoryServer</span></code>.</p></li>
<li><p><em>obj</em> em <a class="reference internal" href="../library/weakref.html#weakref.finalize" title="weakref.finalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">weakref.finalize()</span></code></a>.</p></li>
</ul>
<p>Em versões futuras do Python, elas serão <a class="reference internal" href="../glossary.html#positional-only-parameter"><span class="std std-ref">somente-posicionais</span></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36492">bpo-36492</a>.)</p>
</li>
</ul>
</section>
<section id="api-and-feature-removals">
<h2>Remoção de APIs e recursos<a class="headerlink" href="#api-and-feature-removals" title="Link permanente para este título">¶</a></h2>
<p>Os seguintes recursos e APIs foram removidos do Python 3.8:</p>
<ul class="simple">
<li><p>A partir do Python 3.3, a importação de ABCs de <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> foi descontinuada e a importação deve ser feita de <a class="reference internal" href="../library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections.abc</span></code></a>. A possibilidade de importar de coleções foi marcada para remoção em 3.8, mas foi adiada para 3.9. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36952">bpo-36952</a>.)</p></li>
<li><p>O módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">macpath</span></code>, descontinuado no Python 3.7, foi removido. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35471">bpo-35471</a>.)</p></li>
<li><p>A função <code class="xref py py-func docutils literal notranslate"><span class="pre">platform.popen()</span></code> foi removida, após ter sido descontinuada desde o Python 3.3: use <a class="reference internal" href="../library/os.html#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.popen()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35345">bpo-35345</a>.)</p></li>
<li><p>A função <code class="xref py py-func docutils literal notranslate"><span class="pre">time.clock()</span></code> foi removida, após ter sido descontinuada desde o Python 3.3: use <a class="reference internal" href="../library/time.html#time.perf_counter" title="time.perf_counter"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.perf_counter()</span></code></a> ou <a class="reference internal" href="../library/time.html#time.process_time" title="time.process_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.process_time()</span></code></a>, dependendo de seus requisitos, para ter o comportamento já definido. (Contribuição de Matthias Bussonnier em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36895">bpo-36895</a>.)</p></li>
<li><p>O script <code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> foi removido em favor do <code class="docutils literal notranslate"><span class="pre">python3.8</span> <span class="pre">-m</span> <span class="pre">venv</span></code> para ajudar a eliminar a confusão sobre a qual interpretador Python o script <code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> está associado. (Contribuição de Brett Cannon em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25427">bpo-25427</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_qs</span></code>, <code class="docutils literal notranslate"><span class="pre">parse_qsl</span></code> e <code class="docutils literal notranslate"><span class="pre">escape</span></code> foram removidos do módulo <a class="reference internal" href="../library/cgi.html#module-cgi" title="cgi: Helpers for running Python scripts via the Common Gateway Interface. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cgi</span></code></a>. Eles foram descontinuados no Python 3.2 ou mais antigo. Eles devem ser importados dos módulos <code class="docutils literal notranslate"><span class="pre">urllib.parse</span></code> e <code class="docutils literal notranslate"><span class="pre">html</span></code>.</p></li>
<li><p>A função <code class="docutils literal notranslate"><span class="pre">filemode</span></code> foi removida do módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a>. Não é documentada e foi descontinuada desde o Python 3.3.</p></li>
<li><p>O construtor <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLParser</span></code></a> não aceita mais o argumento <em>html</em>. Isso nunca teve efeito e foi descontinuado no Python 3.4. Todos os outros parâmetros agora são <a class="reference internal" href="../glossary.html#keyword-only-parameter"><span class="std std-ref">somente-nomeados</span></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29209">bpo-29209</a>.)</p></li>
<li><p>Removido o método <code class="docutils literal notranslate"><span class="pre">doctype()</span></code> de <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLParser</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29209">bpo-29209</a>.)</p></li>
<li><p>O codec “unicode_internal” foi removido. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36297">bpo-36297</a>.)</p></li>
<li><p>Os objetos <code class="docutils literal notranslate"><span class="pre">Cache</span></code> e <code class="docutils literal notranslate"><span class="pre">Statement</span></code> do módulo <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> não expostos para o usuário. (Contribuição de Aviv Palivoda em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30262">bpo-30262</a>.)</p></li>
<li><p>O argumento nomeado <code class="docutils literal notranslate"><span class="pre">bufsize</span></code> de <a class="reference internal" href="../library/fileinput.html#fileinput.input" title="fileinput.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileinput.input()</span></code></a> e <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileinput.FileInput()</span></code></a>, que era ignorado e estava descontinuado desde o Python 3.6, foi removido. <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36952">bpo-36952</a> (Contribuição de Matthias Bussonnier.)</p></li>
<li><p>As funções descontinuadas <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.set_coroutine_wrapper()</span></code> e <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.get_coroutine_wrapper()</span></code> no Python 3.7 foram removidas; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36933">bpo-36933</a> (Contribuição de Matthias Bussonnier.)</p></li>
</ul>
</section>
<section id="porting-to-python-3-8">
<h2>Portando para o Python 3.8<a class="headerlink" href="#porting-to-python-3-8" title="Link permanente para este título">¶</a></h2>
<p>Esta seção lista as alterações descritas anteriormente e outras correções que podem exigir alterações no seu código.</p>
<section id="changes-in-python-behavior">
<h3>Alterações no comportamento do Python<a class="headerlink" href="#changes-in-python-behavior" title="Link permanente para este título">¶</a></h3>
<ul class="simple">
<li><p>Expressões <em>yield</em> (ambas as cláusulas <code class="docutils literal notranslate"><span class="pre">yield</span></code> e <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>) agora não são permitidas nas compreensões e expressões geradoras (além da expressão iterável na cláusula mais à esquerda <code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code>). (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10544">bpo-10544</a>.)</p></li>
<li><p>Agora, o compilador produz um <a class="reference internal" href="../library/exceptions.html#SyntaxWarning" title="SyntaxWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a> quando verificações de identidade (<code class="docutils literal notranslate"><span class="pre">is</span></code> e <code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">not</span></code>) são usadas com certos tipos de literais (por exemplo, strings, números). Geralmente, eles podem funcionar acidentalmente no CPython, mas não são garantidos pelas especificações da linguagem. O aviso aconselha os usuários a usar testes de igualdade (<code class="docutils literal notranslate"><span class="pre">==</span></code> e <code class="docutils literal notranslate"><span class="pre">!=</span></code>). (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34850">bpo-34850</a>.)</p></li>
<li><p>O interpretador do CPython pode engolir exceções em algumas circunstâncias. No Python 3.8, isso acontece em menos casos. Em particular, as exceções levantadas ao obter o atributo do dicionário de tipos não são mais ignoradas. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35459">bpo-35459</a>.)</p></li>
<li><p>Removidas as implementações <code class="docutils literal notranslate"><span class="pre">__str__</span></code> dos tipos embutidos <a class="reference internal" href="../library/functions.html#bool" title="bool"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>, <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a> e poucas classes da biblioteca padrão. Agora eles herdam <code class="docutils literal notranslate"><span class="pre">__str__()</span></code> de <a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>. Como resultado, definir o método <code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> na subclasse dessas classes afetará sua representação de string. (Contribuição de Serhiy Storchaka em issue:<cite>36793</cite>.)</p></li>
<li><p>No AIX, <a class="reference internal" href="../library/sys.html#sys.platform" title="sys.platform"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platform</span></code></a> não contém mais a versão principal. É sempre <code class="docutils literal notranslate"><span class="pre">'aix'</span></code>, em vez de <code class="docutils literal notranslate"><span class="pre">'aix3'</span></code> .. <code class="docutils literal notranslate"><span class="pre">'aix7'</span></code>. Como as versões mais antigas do Python incluem o número da versão, é recomendável usar sempre <code class="docutils literal notranslate"><span class="pre">sys.platform.startswith('aix')</span></code>. (Contribuição de M. Felt em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36588">bpo-36588</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/init.html#c.PyEval_AcquireLock" title="PyEval_AcquireLock"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_AcquireLock()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyEval_AcquireThread" title="PyEval_AcquireThread"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_AcquireThread()</span></code></a> agora encerram a thread atual se chamado enquanto o interpretador está finalizando, tornando-os consistentes com <a class="reference internal" href="../c-api/init.html#c.PyEval_RestoreThread" title="PyEval_RestoreThread"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_RestoreThread()</span></code></a>, <a class="reference internal" href="../c-api/init.html#c.Py_END_ALLOW_THREADS" title="Py_END_ALLOW_THREADS"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_END_ALLOW_THREADS()</span></code></a> e <a class="reference internal" href="../c-api/init.html#c.PyGILState_Ensure" title="PyGILState_Ensure"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGILState_Ensure()</span></code></a>. Se esse comportamento não for desejado, proteja a chamada verificando <code class="xref c c-func docutils literal notranslate"><span class="pre">_Py_IsFinalizing()</span></code> ou <code class="xref c c-func docutils literal notranslate"><span class="pre">sys.is_finalizing()</span></code>. (Contribuição de Joannah Nanjekye em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36475">bpo-36475</a>.)</p></li>
</ul>
</section>
<section id="changes-in-the-python-api">
<h3>Alterações na API Python<a class="headerlink" href="#changes-in-the-python-api" title="Link permanente para este título">¶</a></h3>
<ul class="simple">
<li><p>A função <a class="reference internal" href="../library/os.html#os.getcwdb" title="os.getcwdb"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getcwdb()</span></code></a> agora usa a codificação UTF-8 no Windows, em vez da página de códigos ANSI: veja <span class="target" id="index-64"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0529"><strong>PEP 529</strong></a> para a justificativa. A função não é mais descontinuada no Windows. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37412">bpo-37412</a>.)</p></li>
<li><p><a class="reference internal" href="../library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> agora pode usar <a class="reference internal" href="../library/os.html#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.posix_spawn()</span></code></a> em alguns casos, para obter melhor desempenho. No Windows Subsystem para Linux e emulação de usuário QEMU, o construtor <code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code> usando <a class="reference internal" href="../library/os.html#os.posix_spawn" title="os.posix_spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.posix_spawn()</span></code></a> não levanta mais uma exceção em erros como “missing program”. Em vez disso, o processo filho falha com um diferente de zero <code class="xref py py-attr docutils literal notranslate"><span class="pre">returncode</span></code>. (Contribuição de Joannah Nanjekye e Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35537">bpo-35537</a>.)</p></li>
<li><p>O argumento <em>preexec_fn</em> de * <a class="reference internal" href="../library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> não é mais compatível com subinterpretadores. O uso do parâmetro em um subinterpretador agora levanta <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a>. (Contribuição de Eric Snow em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34651">bpo-34651</a>, modificado por Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37951">bpo-37951</a>.)</p></li>
<li><p>O método <code class="xref py py-meth docutils literal notranslate"><span class="pre">imap.IMAP4.logout()</span></code> não mais ignora silenciosamente exceções arbitrárias. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36348">bpo-36348</a>.)</p></li>
<li><p>A função <code class="xref py py-func docutils literal notranslate"><span class="pre">platform.popen()</span></code> foi removida, após ter sido descontinuada desde o Python 3.3: use <a class="reference internal" href="../library/os.html#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.popen()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35345">bpo-35345</a>.)</p></li>
<li><p>A função <code class="xref py py-func docutils literal notranslate"><span class="pre">Statistics.mode()</span></code> não levanta mais uma exceção quando dados multimodais são fornecidos. Em vez disso, ela retorna o primeiro modo encontrado nos dados de entrada. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35892">bpo-35892</a>.)</p></li>
<li><p>O método <a class="reference internal" href="../library/tkinter.ttk.html#tkinter.ttk.Treeview.selection" title="tkinter.ttk.Treeview.selection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">selection()</span></code></a> da classe <a class="reference internal" href="../library/tkinter.ttk.html#tkinter.ttk.Treeview" title="tkinter.ttk.Treeview"><code class="xref py py-class docutils literal notranslate"><span class="pre">tkinter.ttk.Treeview</span></code></a> não recebe mais argumentos. Seu uso com argumentos para alterar a seleção foi descontinuado no Python 3.6. Use métodos especializados como <a class="reference internal" href="../library/tkinter.ttk.html#tkinter.ttk.Treeview.selection_set" title="tkinter.ttk.Treeview.selection_set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">selection_set()</span></code></a> para alterar a seleção. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31508">bpo-31508</a>.)</p></li>
<li><p>Os métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">writexml()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">toxml()</span></code> e <code class="xref py py-meth docutils literal notranslate"><span class="pre">toprettyxml()</span></code> de <a class="reference internal" href="../library/xml.dom.minidom.html#module-xml.dom.minidom" title="xml.dom.minidom: Minimal Document Object Model (DOM) implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.dom.minidom</span></code></a>, e o método <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> de <code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree</span></code>, agora preservam a ordem dos atributos especificados pelo usuário. (Contribuição de Diego Rojas e Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34160">bpo-34160</a>.)</p></li>
<li><p>Um banco de dados <a class="reference internal" href="../library/dbm.html#module-dbm.dumb" title="dbm.dumb: Portable implementation of the simple DBM interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm.dumb</span></code></a> aberto com sinalizadores <code class="docutils literal notranslate"><span class="pre">'r'</span></code> agora é somente leitura. <a class="reference internal" href="../library/dbm.html#dbm.dumb.open" title="dbm.dumb.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">dbm.dumb.open()</span></code></a> com os sinalizadores <code class="docutils literal notranslate"><span class="pre">'r'</span></code> e <code class="docutils literal notranslate"><span class="pre">'w'</span></code> não cria mais um banco de dados se ele não existir. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32749">bpo-32749</a>.)</p></li>
<li><p>O método <code class="docutils literal notranslate"><span class="pre">doctype()</span></code> definido em uma subclasse de <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLParser</span></code></a> não será mais chamado e emitirá um <a class="reference internal" href="../library/exceptions.html#RuntimeWarning" title="RuntimeWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeWarning</span></code></a> em vez de um <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Defina o método <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder.doctype" title="xml.etree.ElementTree.TreeBuilder.doctype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doctype()</span></code></a> em um alvo para manipular uma declaração doctype XML. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29209">bpo-29209</a>.)</p></li>
<li><p>Uma <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> agora é levantada quando a metaclasse personalizada não fornece a entrada <code class="docutils literal notranslate"><span class="pre">__classcell__</span></code> no espaço de nomes passado para <code class="docutils literal notranslate"><span class="pre">type.__new__</span></code>. Uma <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> era emitida no Python 3.6-3.7. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23722">bpo-23722</a>.)</p></li>
<li><p>A classe <code class="xref py py-class docutils literal notranslate"><span class="pre">cProfile.Profile</span></code> agora pode ser usada como um gerenciador de contexto. (Contribuição de Scott Sanderson em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29235">bpo-29235</a>.)</p></li>
<li><p><a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copyfile()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copy" title="shutil.copy"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copy()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copy2" title="shutil.copy2"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copy2()</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> e <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> usam chamadas de sistema de “cópia rápido” específica da plataforma (veja a seção <a class="reference internal" href="../library/shutil.html#shutil-platform-dependent-efficient-copy-operations"><span class="std std-ref">Operações de cópia eficientes dependentes da plataforma</span></a>).</p></li>
<li><p>O tamanho padrão do buffer de <a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copyfile()</span></code></a> no Windows foi alterado de 16 KiB para 1 MiB.</p></li>
<li><p>A estrutura de <code class="docutils literal notranslate"><span class="pre">PyGC_Head</span></code> mudou completamente. Todo o código que tocava no membro struct deve ser reescrito. (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33597">bpo-33597</a>.)</p></li>
<li><p>A estrutura de <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState" title="PyInterpreterState"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyInterpreterState</span></code></a> foi movida para os arquivos de cabeçalho “internal” (especificamente Include/internal/pycore_pystate.h). Um <code class="docutils literal notranslate"><span class="pre">PyInterpreterState</span></code> opaco ainda está disponível como parte da API pública (e ABI estável). Os documentos indicam que nenhum dos campos da estrutura é público, por isso esperamos que ninguém os tenha usado. No entanto, se você confia em um ou mais desses campos em particular e não tiver alternativa, abra um relatório de erro no BPO. Vamos trabalhar para ajudá-lo a ajustar (possivelmente incluindo a adição de funções de acessador à API pública). (Veja <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35886">bpo-35886</a>.)</p></li>
<li><p>O método <a class="reference internal" href="../library/mmap.html#mmap.mmap.flush" title="mmap.mmap.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mmap.flush()</span></code></a> agora retorna <code class="docutils literal notranslate"><span class="pre">None</span></code> com êxito e levanta uma exceção no erro em todas as plataformas. Anteriormente, seu comportamento dependia da plataforma: um valor diferente de zero era retornado com êxito; zero era retornado com erro no Windows. Um valor zero era retornado com sucesso; uma exceção era levanta no caso de erro no Unix. (Contribuição de Berker Peksag em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2122">bpo-2122</a>.)</p></li>
<li><p>Os módulos <a class="reference internal" href="../library/xml.dom.minidom.html#module-xml.dom.minidom" title="xml.dom.minidom: Minimal Document Object Model (DOM) implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.dom.minidom</span></code></a> e <a class="reference internal" href="../library/xml.sax.html#module-xml.sax" title="xml.sax: Package containing SAX2 base classes and convenience functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.sax</span></code></a> não mais processam entidades externas por padrão. (Contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17239">bpo-17239</a>.)</p></li>
<li><p>A exclusão de uma chave de um banco de dados somente leitura <a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm</span></code></a> (<a class="reference internal" href="../library/dbm.html#module-dbm.dumb" title="dbm.dumb: Portable implementation of the simple DBM interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm.dumb</span></code></a>, <a class="reference internal" href="../library/dbm.html#module-dbm.gnu" title="dbm.gnu: GNU's reinterpretation of dbm. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm.gnu</span></code></a> ou <a class="reference internal" href="../library/dbm.html#module-dbm.ndbm" title="dbm.ndbm: The standard &quot;database&quot; interface, based on ndbm. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm.ndbm</span></code></a>) levanta <code class="xref py py-attr docutils literal notranslate"><span class="pre">error</span></code> (<a class="reference internal" href="../library/dbm.html#dbm.dumb.error" title="dbm.dumb.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">dbm.dumb.error</span></code></a>, <a class="reference internal" href="../library/dbm.html#dbm.gnu.error" title="dbm.gnu.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">dbm.gnu.error</span></code></a> ou <a class="reference internal" href="../library/dbm.html#dbm.ndbm.error" title="dbm.ndbm.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">dbm.ndbm.error</span></code></a>) em vez de <a class="reference internal" href="../library/exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a>. (Contribuição de Xiang Zhang em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33106">bpo-33106</a>.)</p></li>
<li><p>AST foi simplificado para literais. Todas as constantes serão representadas como instâncias de <a class="reference internal" href="../library/ast.html#ast.Constant" title="ast.Constant"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.Constant</span></code></a>. Instanciar classes antigas <code class="docutils literal notranslate"><span class="pre">Num</span></code>, <code class="docutils literal notranslate"><span class="pre">Str</span></code>, <code class="docutils literal notranslate"><span class="pre">Bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">NameConstant</span></code> e <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> retornará uma instância de <code class="docutils literal notranslate"><span class="pre">Constant</span></code>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32892">bpo-32892</a>.)</p></li>
<li><p><a class="reference internal" href="../library/os.path.html#os.path.expanduser" title="os.path.expanduser"><code class="xref py py-func docutils literal notranslate"><span class="pre">expanduser()</span></code></a> no Windows agora prefere a variável de ambiente <span class="target" id="index-65"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">USERPROFILE</span></code> e não usa <span class="target" id="index-66"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">HOME</span></code>, que normalmente não é definido para contas de usuário comuns. (Contribuição de Anthony Sottile em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36264">bpo-36264</a>.)</p></li>
<li><p>A exceção <a class="reference internal" href="../library/asyncio-exceptions.html#asyncio.CancelledError" title="asyncio.CancelledError"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.CancelledError</span></code></a> agora herda de <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseException</span></code></a> em vez de <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a> e não mais herda de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.CancelledError" title="concurrent.futures.CancelledError"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.CancelledError</span></code></a>. (Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32528">bpo-32528</a>.)</p></li>
<li><p>A função <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a> agora aguarda corretamente o cancelamento ao usar uma instância de <a class="reference internal" href="../library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>. Anteriormente, ao atingir tempo limite, ele era cancelado e devolvido imediatamente. (Contribuição de Elvis Pranskevichus em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32751">bpo-32751</a>.)</p></li>
<li><p>A função <a class="reference internal" href="../library/asyncio-protocol.html#asyncio.BaseTransport.get_extra_info" title="asyncio.BaseTransport.get_extra_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.BaseTransport.get_extra_info()</span></code></a> agora retorna um objeto soquete seguro de usar quando ‘socket’ é passado para o parâmetro <em>name</em>. (Contribuição de Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37027">bpo-37027</a>.)</p></li>
<li><p><a class="reference internal" href="../library/asyncio-protocol.html#asyncio.BufferedProtocol" title="asyncio.BufferedProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.BufferedProtocol</span></code></a> foi promovida a API estável.</p></li>
</ul>
<ul class="simple" id="bpo-36085-whatsnew">
<li><p>As dependências de DLL para módulos de extensão e DLLs carregadas com <a class="reference internal" href="../library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a> no Windows agora são resolvidas com mais segurança. Somente os caminhos do sistema, o diretório que contém o arquivo DLL ou PYD e os diretórios adicionados com <a class="reference internal" href="../library/os.html#os.add_dll_directory" title="os.add_dll_directory"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_dll_directory()</span></code></a> são pesquisados por dependências de tempo de carregamento. Especificamente, <span class="target" id="index-67"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> e o diretório de trabalho atual não são mais usados, e as modificações nelas não terão mais efeito na resolução normal da DLL. Se seu aplicativo conta com esses mecanismos, você deve verificar <a class="reference internal" href="../library/os.html#os.add_dll_directory" title="os.add_dll_directory"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_dll_directory()</span></code></a> e, se existir, use-o para adicionar seu diretório DLLs ao carregar sua biblioteca. Observe que os usuários do Windows 7 precisarão garantir que o Windows Update KB2533623 esteja instalado (isso também é verificado pelo instalador). (Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36085">bpo-36085</a>.)</p></li>
<li><p>Os arquivos de cabeçalho e as funções relacionadas ao pgen foram removidos após sua substituição por uma implementação pura do Python. (Contribuição de Pablo Galindo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36623">bpo-36623</a>.)</p></li>
<li><p><a class="reference internal" href="../library/types.html#types.CodeType" title="types.CodeType"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.CodeType</span></code></a> possui um novo parâmetro na segunda posição do construtor (<em>posonlyargcount *) para suportar argumentos apenas de posição definidos em :pep:`570`. O primeiro argumento (*argcount</em>) agora representa o número total de argumentos posicionais (incluindo argumentos somente posicionais). O novo método <code class="docutils literal notranslate"><span class="pre">replace()</span></code> de <a class="reference internal" href="../library/types.html#types.CodeType" title="types.CodeType"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.CodeType</span></code></a> pode ser usado para tornar o código à prova de futuro.</p></li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Alterações na API C<a class="headerlink" href="#changes-in-the-c-api" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p>A estrutura <a class="reference internal" href="../c-api/veryhigh.html#c.PyCompilerFlags" title="PyCompilerFlags"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCompilerFlags</span></code></a> recebeu um novo campo <em>cf_feature_version</em>. Ele deve ser inicializado para <code class="docutils literal notranslate"><span class="pre">PY_MINOR_VERSION</span></code>. O campo é ignorado por padrão e é usado se e somente se o sinalizador <code class="docutils literal notranslate"><span class="pre">PyCF_ONLY_AST</span></code> estiver definido em <em>cf_flags</em>. (Contribuição de Guido van Rossum em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35766">bpo-35766</a>.)</p></li>
<li><p>A função <code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ReInitThreads()</span></code> foi removida da API C. Não deve ser chamada explicitamente: use <a class="reference internal" href="../c-api/sys.html#c.PyOS_AfterFork_Child" title="PyOS_AfterFork_Child"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_AfterFork_Child()</span></code></a>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36728">bpo-36728</a>.)</p></li>
<li><p>No Unix, as extensões C não estão mais vinculadas ao libpython, exceto no Android e Cygwin. Quando o Python é incorporado, <code class="docutils literal notranslate"><span class="pre">libpython</span></code> não deve ser carregado com <code class="docutils literal notranslate"><span class="pre">RTLD_LOCAL</span></code>, mas <code class="docutils literal notranslate"><span class="pre">RTLD_GLOBAL</span></code>. Anteriormente, usando <code class="docutils literal notranslate"><span class="pre">RTLD_LOCAL</span></code>, já não era possível carregar extensões C que não estavam vinculadas a <code class="docutils literal notranslate"><span class="pre">libpython</span></code>, como extensões C da biblioteca padrão criada pela seção <code class="docutils literal notranslate"><span class="pre">*shared*</span></code> de <code class="docutils literal notranslate"><span class="pre">Modules/Setup</span></code>. (Contribuição de Victor Stinner em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21536">bpo-21536</a>.)</p></li>
<li><p>O uso de variantes <code class="docutils literal notranslate"><span class="pre">#</span></code> de formatos na análise ou construção de valor (por exemplo, <a class="reference internal" href="../c-api/arg.html#c.PyArg_ParseTuple" title="PyArg_ParseTuple"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArg_ParseTuple()</span></code></a>, <a class="reference internal" href="../c-api/arg.html#c.Py_BuildValue" title="Py_BuildValue"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_BuildValue()</span></code></a>, <a class="reference internal" href="../c-api/call.html#c.PyObject_CallFunction" title="PyObject_CallFunction"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallFunction()</span></code></a>, etc.) sem <code class="docutils literal notranslate"><span class="pre">PY_SSIZE_T_CLEAN</span></code> definido agora levanta <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>. Será removido em 3.10 ou 4.0. Leia <a class="reference internal" href="../c-api/arg.html#arg-parsing"><span class="std std-ref">Análise de argumentos e construção de valores</span></a> para detalhes. (Contribuição de Inada Naoki em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36381">bpo-36381</a>.)</p></li>
<li><p>Instâncias de tipos alocados por heap (como aqueles criados com <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpec" title="PyType_FromSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpec()</span></code></a>) mantêm uma referência ao seu objeto de tipo. O aumento da contagem de referências desses objetos de tipo foi movido de <a class="reference internal" href="../c-api/type.html#c.PyType_GenericAlloc" title="PyType_GenericAlloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GenericAlloc()</span></code></a> para as funções de nível mais baixo, <a class="reference internal" href="../c-api/allocation.html#c.PyObject_Init" title="PyObject_Init"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Init()</span></code></a> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code>. Isso faz com que os tipos criados através de <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpec" title="PyType_FromSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpec()</span></code></a> se comportem como outras classes no código gerenciado.</p>
<p><a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">Tipos alocados estaticamente</span></a> não são afetados.</p>
<p>Para a grande maioria dos casos, não deve haver efeito colateral. No entanto, tipos que aumentam manualmente a contagem de referência após alocar uma instância (talvez para solucionar o bug) agora podem se tornar imortais. Para evitar isso, essas classes precisam chamar Py_DECREF no objeto de tipo durante a desalocação da instância.</p>
<p>Para portar corretamente esses tipos para o 3.8, aplique as seguintes alterações:</p>
<ul>
<li><p>Remove <a class="reference internal" href="../c-api/refcounting.html#c.Py_INCREF" title="Py_INCREF"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_INCREF</span></code></a> no objeto de tipo depois de alocar uma instância – se houver. Isso pode acontecer após a chamada <a class="reference internal" href="../c-api/allocation.html#c.PyObject_New" title="PyObject_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_New()</span></code></a>, <a class="reference internal" href="../c-api/allocation.html#c.PyObject_NewVar" title="PyObject_NewVar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NewVar()</span></code></a>, <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_New" title="PyObject_GC_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_New()</span></code></a>, <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_NewVar" title="PyObject_GC_NewVar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_NewVar()</span></code></a> ou qualquer outro alocador personalizado que use <a class="reference internal" href="../c-api/allocation.html#c.PyObject_Init" title="PyObject_Init"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Init()</span></code></a> ou <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code>.</p>
<p>Exemplo:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="w"></span>
<span class="nf">foo_new</span><span class="p">(</span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PyObject_GC_New</span><span class="p">(</span><span class="n">foo_struct</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">PyTypeObject</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">type</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foo</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="cp">#if PY_VERSION_HEX &lt; 0x03080000</span>
<span class="w">    </span><span class="c1">// Workaround for Python issue 35810; no longer necessary in Python 3.8</span>
<span class="w">    </span><span class="n">PY_INCREF</span><span class="p">(</span><span class="n">type</span><span class="p">)</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Certifica-se de que todas as funções <code class="docutils literal notranslate"><span class="pre">tp_dealloc</span></code> personalizadas de tipos alocados em heap diminuam a contagem de referências do tipo.</p>
<p>Exemplo:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"></span>
<span class="nf">foo_dealloc</span><span class="p">(</span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="n">instance</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">PyObject_GC_Del</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span><span class="w"></span>
<span class="cp">#if PY_VERSION_HEX &gt;= 0x03080000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.8 (Python issue 35810)</span>
<span class="w">    </span><span class="n">Py_DECREF</span><span class="p">(</span><span class="n">type</span><span class="p">);</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
<p>(Contribuição de Eddie Elizondo em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35810">bpo-35810</a>.)</p>
</li>
<li><p>A macro <a class="reference internal" href="../c-api/intro.html#c.Py_DEPRECATED" title="Py_DEPRECATED"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_DEPRECATED()</span></code></a> foi implementada para MSVC. A macro agora deve ser colocada antes do nome do símbolo.</p>
<p>Exemplo:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">Py_DEPRECATED</span><span class="p">(</span><span class="mf">3.8</span><span class="p">)</span><span class="w"> </span><span class="n">PyAPI_FUNC</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">Py_OldFunction</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>(Contribuição de Zackery Spytz em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33407">bpo-33407</a>.)</p>
</li>
<li><p>O interpretador não pretende mais dar suporte à compatibilidade binária de tipos de extensão nas liberações de recursos. O <a class="reference internal" href="../c-api/type.html#c.PyTypeObject" title="PyTypeObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyTypeObject</span></code></a> exportado por um módulo de extensão de terceiros deve ter todos os slots esperados na versão atual do Python, incluindo <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_finalize" title="PyTypeObject.tp_finalize"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_finalize</span></code></a> (<a class="reference internal" href="../c-api/typeobj.html#Py_TPFLAGS_HAVE_FINALIZE" title="Py_TPFLAGS_HAVE_FINALIZE"><code class="xref py py-const docutils literal notranslate"><span class="pre">Py_TPFLAGS_HAVE_FINALIZE</span></code></a> não é mais verificado antes de ler <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_finalize" title="PyTypeObject.tp_finalize"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_finalize</span></code></a>).</p>
<p>(Contribuição de Antoine Pitrou em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32388">bpo-32388</a>.)</p>
</li>
<li><p>As funções <code class="xref c c-func docutils literal notranslate"><span class="pre">PyNode_AddChild()</span></code> e <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_AddToken()</span></code> agora aceitam dois argumentos adicionais <code class="docutils literal notranslate"><span class="pre">int</span></code> <em>end_lineno</em> e <em>end_col_offset</em>.</p></li>
<li><p>O arquivo <code class="file docutils literal notranslate"><span class="pre">libpython38.a</span></code> para permitir que as ferramentas do MinGW se vinculem diretamente a <code class="file docutils literal notranslate"><span class="pre">python38.dll</span></code> não está mais incluído na distribuição regular do Windows. Se você precisar deste arquivo, ele poderá ser gerado com as ferramentas <code class="docutils literal notranslate"><span class="pre">gendef</span></code> e <code class="docutils literal notranslate"><span class="pre">dlltool</span></code>, que fazem parte do pacote binutils do MinGW:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gendef - python38.dll &gt; tmp.def
dlltool --dllname python38.dll --def tmp.def --output-lib libpython38.a
</pre></div>
</div>
<p>A localização de um arquivo <code class="file docutils literal notranslate"><span class="pre">pythonXY.dll</span></code> dependerá das opções de instalação e da versão e idioma do Windows. Consulte <a class="reference internal" href="../using/windows.html#using-on-windows"><span class="std std-ref">Utilizando Python no Windows</span></a> para mais informações. A biblioteca resultante deve ser colocada no mesmo diretório que <code class="file docutils literal notranslate"><span class="pre">pythonXY.lib</span></code>, que geralmente é o diretório <code class="file docutils literal notranslate"><span class="pre">libs</span></code> na sua instalação do Python.</p>
<p>(Contribuição de Steve Dower em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37351">bpo-37351</a>.)</p>
</li>
</ul>
</section>
<section id="cpython-bytecode-changes">
<h3>Alterações de bytecode do CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Link permanente para este título">¶</a></h3>
<ul>
<li><p>O loop do interpretador foi simplificado movendo a lógica de desenrolar a pilha de blocos no compilador. O compilador agora emite instruções explícitas para ajustar a pilha de valores e chamar o código de limpeza para <a class="reference internal" href="../reference/simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a>, <a class="reference internal" href="../reference/simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> e <a class="reference internal" href="../reference/simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a>.</p>
<p>Removidos os códigos de operação <code class="xref std std-opcode docutils literal notranslate"><span class="pre">BREAK_LOOP</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">CONTINUE_LOOP</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">SETUP_LOOP</span></code> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">SETUP_EXCEPT</span></code>. Adicionados novos códigos de operação <a class="reference internal" href="../library/dis.html#opcode-ROT_FOUR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">ROT_FOUR</span></code></a>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">BEGIN_FINALLY</span></code>, <code class="xref std std-opcode docutils literal notranslate"><span class="pre">CALL_FINALLY</span></code> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">POP_FINALLY</span></code>. Alterado o comportamento de <code class="xref std std-opcode docutils literal notranslate"><span class="pre">END_FINALLY</span></code> e <code class="xref std std-opcode docutils literal notranslate"><span class="pre">WITH_CLEANUP_START</span></code>.</p>
<p>(Contribuição de Mark Shannon, Antoine Pitrou e Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17611">bpo-17611</a>.)</p>
</li>
<li><p>Adicionado novo código de operação <a class="reference internal" href="../library/dis.html#opcode-END_ASYNC_FOR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">END_ASYNC_FOR</span></code></a> para lidar com exceções geradas ao aguardar um próximo item em um loop <a class="reference internal" href="../reference/compound_stmts.html#async-for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code></a>. (Contribuição de Serhiy Storchaka em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33041">bpo-33041</a>.)</p></li>
<li><p>O <a class="reference internal" href="../library/dis.html#opcode-MAP_ADD"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">MAP_ADD</span></code></a> agora espera o valor como o primeiro elemento na pilha e a chave como o segundo elemento. Essa alteração foi feita para que a chave seja sempre avaliada antes do valor na compreensão do dicionário, conforme proposto em <span class="target" id="index-68"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0572"><strong>PEP 572</strong></a>. (Contribuição de Jörn Heissler em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35224">bpo-35224</a>.)</p></li>
</ul>
</section>
<section id="demos-and-tools">
<h3>Ferramentas e daemons<a class="headerlink" href="#demos-and-tools" title="Link permanente para este título">¶</a></h3>
<p>Adicionado um script de benchmark para cronometrar várias maneiras de acessar variáveis: <code class="docutils literal notranslate"><span class="pre">Tools/scripts/var_access_benchmark.py</span></code>. (Contribuição de Raymond Hettinger em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35884">bpo-35884</a>.)</p>
<p>Aqui está um resumo das melhorias de desempenho desde Python 3.3:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Python version                       3.3     3.4     3.5     3.6     3.7     3.8
--------------                       ---     ---     ---     ---     ---     ---

Variable and attribute read access:
    read_local                       4.0     7.1     7.1     5.4     5.1     3.9
    read_nonlocal                    5.3     7.1     8.1     5.8     5.4     4.4
    read_global                     13.3    15.5    19.0    14.3    13.6     7.6
    read_builtin                    20.0    21.1    21.6    18.5    19.0     7.5
    read_classvar_from_class        20.5    25.6    26.5    20.7    19.5    18.4
    read_classvar_from_instance     18.5    22.8    23.5    18.8    17.1    16.4
    read_instancevar                26.8    32.4    33.1    28.0    26.3    25.4
    read_instancevar_slots          23.7    27.8    31.3    20.8    20.8    20.2
    read_namedtuple                 68.5    73.8    57.5    45.0    46.8    18.4
    read_boundmethod                29.8    37.6    37.9    29.6    26.9    27.7

Variable and attribute write access:
    write_local                      4.6     8.7     9.3     5.5     5.3     4.3
    write_nonlocal                   7.3    10.5    11.1     5.6     5.5     4.7
    write_global                    15.9    19.7    21.2    18.0    18.0    15.8
    write_classvar                  81.9    92.9    96.0   104.6   102.1    39.2
    write_instancevar               36.4    44.6    45.8    40.0    38.9    35.5
    write_instancevar_slots         28.7    35.6    36.1    27.3    26.6    25.7

Data structure read access:
    read_list                       19.2    24.2    24.5    20.8    20.8    19.0
    read_deque                      19.9    24.7    25.5    20.2    20.6    19.8
    read_dict                       19.7    24.3    25.7    22.3    23.0    21.0
    read_strdict                    17.9    22.6    24.3    19.5    21.2    18.9

Data structure write access:
    write_list                      21.2    27.1    28.5    22.5    21.6    20.0
    write_deque                     23.8    28.7    30.1    22.7    21.8    23.5
    write_dict                      25.9    31.4    33.3    29.3    29.2    24.7
    write_strdict                   22.9    28.4    29.9    27.5    25.2    23.1

Stack (or queue) operations:
    list_append_pop                144.2    93.4   112.7    75.4    74.2    50.8
    deque_append_pop                30.4    43.5    57.0    49.4    49.2    42.5
    deque_append_popleft            30.8    43.7    57.3    49.7    49.7    42.8

Timing loop:
    loop_overhead                    0.3     0.5     0.6     0.4     0.3     0.3
</pre></div>
</div>
<p>Os benchmarks foram medidos em um processador <a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.html">Intel® Core™ i7-4960HQ</a> nos sistemas macOS 64-bit encontrados em <a class="reference external" href="https://www.python.org/downloads/mac-osx/">python.org</a>. O script de benchmark exibe tempos em nanossegundos.</p>
</section>
</section>
<section id="notable-changes-in-python-3-8-1">
<h2>Alterações notáveis no Python 3.8.1<a class="headerlink" href="#notable-changes-in-python-3-8-1" title="Link permanente para este título">¶</a></h2>
<p>Devido a significativas preocupações de segurança, o parâmetro <em>reuse_address</em> de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a> não é mais suportado. Isso ocorre devido ao comportamento da opção de soquete <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> no UDP. Para mais detalhes, consulte a documentação de <code class="docutils literal notranslate"><span class="pre">loop.create_datagram_endpoint()</span></code>. (Contribuição de Kyle Stanley, Antoine Pitrou e Yury Selivanov em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37228">bpo-37228</a>.)</p>
</section>
<section id="notable-changes-in-python-3-8-8">
<h2>Alterações notáveis no Python 3.8.8<a class="headerlink" href="#notable-changes-in-python-3-8-8" title="Link permanente para este título">¶</a></h2>
<p>Versões anteriores do Python permitiam o uso de <code class="docutils literal notranslate"><span class="pre">;</span></code> e <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como separadores de parâmetros de consulta nas funções <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qs()</span></code></a> e <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qsl()</span></code></a>. Devido a questões de segurança, e em conformidade com as recomendações mais recentes do W3C, isso foi alterado para permitir apenas uma única chave separadora, com <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como padrão. Esta mudança também afeta as funções <a class="reference internal" href="../library/cgi.html#cgi.parse" title="cgi.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse()</span></code></a> e <a class="reference internal" href="../library/cgi.html#cgi.parse_multipart" title="cgi.parse_multipart"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse_multipart()</span></code></a> já que elas usam as funções afetadas internamente. Para obter mais detalhes, consulte sua respectiva documentação. (Contribuição de Adam Goldschmidt, Senthil Kumaran e Ken Jin em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42967">bpo-42967</a>.)</p>
</section>
<section id="notable-changes-in-python-3-8-12">
<h2>Alterações notáveis no Python 3.8.12<a class="headerlink" href="#notable-changes-in-python-3-8-12" title="Link permanente para este título">¶</a></h2>
<p>A partir do Python 3.8.12, o módulo <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> não aceita mais zeros à esquerda em strings de endereço IPv4. Os zeros à esquerda são ambíguos e interpretados como notação octal por algumas bibliotecas. Por exemplo, a função legada <a class="reference internal" href="../library/socket.html#socket.inet_aton" title="socket.inet_aton"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.inet_aton()</span></code></a> trata os zeros à esquerda como notação octal. A implementação glibc de <a class="reference internal" href="../library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_pton()</span></code></a> moderna não aceita nenhum zeros à esquerda.</p>
<p>(Originalmente contribuição de Christian Heimes em <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a> e backport para 3.8 por Achraf Merzouki.)</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabela de Conteúdo</a></h3>
  <ul>
<li><a class="reference internal" href="#">O que há de novo no Python 3.8</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumo – Destaques da versão</a></li>
<li><a class="reference internal" href="#new-features">Novas funcionalidades</a><ul>
<li><a class="reference internal" href="#assignment-expressions">Expressões de atribuição</a></li>
<li><a class="reference internal" href="#positional-only-parameters">Parâmetros apenas posicionais</a></li>
<li><a class="reference internal" href="#parallel-filesystem-cache-for-compiled-bytecode-files">Cache do sistema de arquivos paralelo para arquivos de bytecode compilados</a></li>
<li><a class="reference internal" href="#debug-build-uses-the-same-abi-as-release-build">A compilação de depuração usa a mesma ABI da compilação de lançamento</a></li>
<li><a class="reference internal" href="#f-strings-support-for-self-documenting-expressions-and-debugging">O suporte a f-strings <code class="docutils literal notranslate"><span class="pre">=</span></code> para expressões de auto-documentação e depuração</a></li>
<li><a class="reference internal" href="#pep-578-python-runtime-audit-hooks">PEP 578: Ganchos de auditoria em tempo de execução Python</a></li>
<li><a class="reference internal" href="#pep-587-python-initialization-configuration">PEP 587: Configuração de Inicialização do Python</a></li>
<li><a class="reference internal" href="#pep-590-vectorcall-a-fast-calling-protocol-for-cpython">PEP 590: Vectorcall: um protocolo de chamada rápida para CPython</a></li>
<li><a class="reference internal" href="#pickle-protocol-5-with-out-of-band-data-buffers">Protocolo de Pickle 5 com buffers de dados fora da banda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Outras mudanças na linguagem</a></li>
<li><a class="reference internal" href="#new-modules">Novos módulos</a></li>
<li><a class="reference internal" href="#improved-modules">Módulos melhorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#builtins">builtins</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#cprofile">cProfile</a></li>
<li><a class="reference internal" href="#csv">csv</a></li>
<li><a class="reference internal" href="#curses">curses</a></li>
<li><a class="reference internal" href="#ctypes">ctypes</a></li>
<li><a class="reference internal" href="#datetime">datetime</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#gc">gc</a></li>
<li><a class="reference internal" href="#gettext">gettext</a></li>
<li><a class="reference internal" href="#gzip">gzip</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#io">io</a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#json-tool">json.tool</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#mmap">mmap</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#os-path">os.path</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#pickle">pickle</a></li>
<li><a class="reference internal" href="#plistlib">plistlib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#py-compile">py_compile</a></li>
<li><a class="reference internal" href="#shlex">shlex</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#ssl">ssl</a></li>
<li><a class="reference internal" href="#statistics">statistics</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#tokenize">tokenize</a></li>
<li><a class="reference internal" href="#tkinter">tkinter</a></li>
<li><a class="reference internal" href="#time">time</a></li>
<li><a class="reference internal" href="#typing">typing</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#weakref">weakref</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
<li><a class="reference internal" href="#xmlrpc">xmlrpc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Otimizações</a></li>
<li><a class="reference internal" href="#build-and-c-api-changes">Alterações a compilações e API C</a></li>
<li><a class="reference internal" href="#deprecated">Descontinuados</a></li>
<li><a class="reference internal" href="#api-and-feature-removals">Remoção de APIs e recursos</a></li>
<li><a class="reference internal" href="#porting-to-python-3-8">Portando para o Python 3.8</a><ul>
<li><a class="reference internal" href="#changes-in-python-behavior">Alterações no comportamento do Python</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Alterações na API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Alterações na API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Alterações de bytecode do CPython</a></li>
<li><a class="reference internal" href="#demos-and-tools">Ferramentas e daemons</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-1">Alterações notáveis no Python 3.8.1</a></li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-8">Alterações notáveis no Python 3.8.8</a></li>
<li><a class="reference internal" href="#notable-changes-in-python-3-8-12">Alterações notáveis no Python 3.8.12</a></li>
</ul>
</li>
</ul>

  <h4>Tópico anterior</h4>
  <p class="topless"><a href="3.9.html"
                        title="capítulo anterior">O que há de novo no Python 3.9</a></p>
  <h4>Próximo tópico</h4>
  <p class="topless"><a href="3.7.html"
                        title="próximo capítulo">O que há de novo no Python 3.7</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Relatar um erro</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/3.8.rst"
            rel="nofollow">Exibir código-fonte
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegação</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice geral"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.7.html" title="O que há de novo no Python 3.7"
             >próximo</a> |</li>
        <li class="right" >
          <a href="3.9.html" title="O que há de novo no Python 3.9"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >O que há de novo no Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">O que há de novo no Python 3.8</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Busca rápida" aria-label="Busca rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Direitos autorais</a> 2001-2022, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Última atualização em jun. 04, 2022.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>